<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>8&nbsp;Running on Algorand</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Pay-<wbr></wbr>To-<wbr></wbr>Play Tic-<wbr></wbr>Tac-<wbr></wbr>Toe Tutorial</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="tic-tac-0.html" class="tocviewlink" data-pltdoc="x">Install and Initialize</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tic-tac-1.html" class="tocviewlink" data-pltdoc="x">Scaffolding and Setup</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="tic-tac-2.html" class="tocviewlink" data-pltdoc="x">Tic-<wbr></wbr>Tac-<wbr></wbr>Toe</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="tic-tac-3.html" class="tocviewlink" data-pltdoc="x">Pay-<wbr></wbr>to-<wbr></wbr>Play</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="tic-tac-5.html" class="tocviewlink" data-pltdoc="x">Timeouts and Participation</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="tic-tac-6.html" class="tocviewlink" data-pltdoc="x">Interaction and Independence</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="tic-tac-7.html" class="tocviewlink" data-pltdoc="x">Web Interaction</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Running on Algorand</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="trouble.html" class="tocviewlink" data-pltdoc="x">Troubleshooting</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tic-tac-7.html" title="backward to &quot;7 Web Interaction&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pay-To-Play Tic-Tac-Toe Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="trouble.html" title="forward to &quot;9 Troubleshooting&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>8<tt>&nbsp;</tt><a name="(part._algo)"></a>Running on Algorand</h3><p>To run a Reach application on Algorand, a few changes are needed.</p><p>For a CLI DApp, the only thing needed to change from ETH to ALGO is to run the usual command with</p><p><span class="stt">REACH_CONNECTOR_MODE=ALGO</span></p><p>before the <span class="stt">./reach</span> keyword.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>If you wanted to directly set the connection mode to ETH, just replace the <span class="stt">ALGO</span> in the command with <span class="stt">ETH</span></p></blockquote></blockquote></blockquote><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p>In the web app, however, you must change the import of</p><p><span class="stt">import * as reach from "reach-sh/stdlib/ETH";</span></p><p>to</p><p><span class="stt">import * as reach from "reach-sh/stdlib/ALGO";</span></p><p><span style="font-weight: bold">&#8212;<wbr></wbr></span></p><p>For both CLI and web DApps, beware of the byte limit!
Algorand currently does not support compiled consensus calculations larger than 1000 bytes.
This can be particularly problematic when attempting to create more complex games with Reach.
For now, applications larger than the 1000 byte limit must be compiled and run with Ethereum.</p><p>However, there are ways to make more efficient calculations to lower the calculation bytes. Some examples include:</p><ul><li><p>Using <span class="stt">or</span> statements instead of many <span class="stt">and</span> statements. For example,</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">((b[0] &amp;&amp; b[1] &amp;&amp; b[2]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">+((b[3] &amp;&amp; b[4] &amp;&amp; b[5]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">+((b[6] &amp;&amp; b[7] &amp;&amp; b[8]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">+((b[0] &amp;&amp; b[3] &amp;&amp; b[6]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">+((b[1] &amp;&amp; b[4] &amp;&amp; b[7]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">+((b[2] &amp;&amp; b[5] &amp;&amp; b[8]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">+((b[0] &amp;&amp; b[4] &amp;&amp; b[8]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">+((b[2] &amp;&amp; b[4] &amp;&amp; b[6]) ? 1:0)</span></p></td></tr><tr><td><p><span class="stt">) &gt; 0</span></p></td></tr></table></p><p>is an inefficient method of calculating the equivalent</p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(b[0] &amp;&amp; (((b[1]) &amp;&amp; (b[2])) || ((b[3]) &amp;&amp; (b[6]))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">||(b[8] &amp;&amp; (((b[6]) &amp;&amp; (b[7])) || ((b[2]) &amp;&amp; (b[5]))))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">||(b[4] &amp;&amp; ((b[0] &amp;&amp; b[8]) || (b[2] &amp;&amp; b[6]) || (b[1] &amp;&amp; b[7]) || (b[3] &amp;&amp; b[5])))</span></p></td></tr><tr><td><p><span class="stt">)</span></p></td></tr></table></li><li><p>Using <span class="stt">if..else</span> statements instead of multiplication statements. For example,</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">const fee_realized = (st, fee) =&gt; Array.iota(9).map((i) =&gt; fee[i] * (st[i] ? 1:0));</span></p></td></tr></table></p><p>is an inefficient method of calculating the equivalent</p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">const fee_realized = (st, fee) =&gt; Array.iota(9).map((i) =&gt; (st[i] ? fee[i]:0));</span></p></td></tr></table></li></ul><p><a href="index.html" data-pltdoc="x">Main menu</a></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tic-tac-7.html" title="backward to &quot;7 Web Interaction&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Pay-To-Play Tic-Tac-Toe Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="trouble.html" title="forward to &quot;9 Troubleshooting&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>
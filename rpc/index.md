[{"bookPath":"rpc","title":"RPC Server","titleId":"ref-backends-rpc","hasOtp":true,"hasPageHeader":true},"<h1 id=\"ref-backends-rpc\" class=\"refHeader\">RPC Server<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-backends-rpc\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_0\" class=\"pid\"></i>The Reach RPC Server provides access to compiled JavaScript backends via an <a href=\"/rpc/proto/#ref-backends-rpc-proto\">HTTPS-accessible JSON-based RPC protocol</a>.\n  The server allows frontends to be written in any programming language.\n  Reach provides client libraries for\n  <a href=\"/rpc/cs/#ref-frontends-rpc-cs\">C#</a>,\n  <a href=\"/rpc/js/#ref-frontends-rpc-js\">JavaScript</a>,\n  <a href=\"/rpc/py/#ref-frontends-rpc-py\">Python</a>, and\n  <a href=\"/rpc/go/#ref-frontends-rpc-go\">Go</a>.\n  It is easy to <a href=\"/rpc/client/#ref-backends-rpc-client\">implement a client library yourself</a>.\n  An example frontend written using the Reach RPC Server is shown in the <a href=\"/tut/rps/7-rpc/#tut-7-rpc\">tutorial section on RPC-based frontends</a>.<a href=\"#p_0\" class=\"pid\">0</a>\n</p>\n<p><i id=\"p_1\" class=\"pid\"></i>The command<a href=\"#p_1\" class=\"pid\">1</a></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"reach rpc-server\" href=\"#\" id=\"copyBtn1\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> reach rpc</span><span style=\"color: var(--shiki-token-keyword)\">-</span><span style=\"color: var(--shiki-token-constant)\">server</span></li></ol></pre>\n<p><i id=\"p_2\" class=\"pid\"></i>starts an instance of the Reach RPC Server.<a href=\"#p_2\" class=\"pid\">2</a></p>\n<hr>\n<h2 id=\"ref-rpc-method\" class=\"refHeader\">RPC Methods<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-rpc-method\"><span class=\"icon icon-link\"></span></a></h2>\n<p><i id=\"p_3\" class=\"pid\"></i>The Reach RPC Server supports the following <span class=\"term\" id=\"term_RPC%20methods\">RPC methods</span>:<a href=\"#p_3\" class=\"pid\">3</a></p>\n<ul>\n  <li><i id=\"p_4\" class=\"pid\"></i><code>/health</code> returns <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">true</span></span> to indicate the server is running properly.<a href=\"#p_4\" class=\"pid\">4</a></li>\n  <li><i id=\"p_5\" class=\"pid\"></i><code>/stdlib/$METHOD</code> where <code>$METHOD</code> is a function of the <a href=\"/frontend/#ref-frontends-js\">JavaScript standard library</a>.<a href=\"#p_5\" class=\"pid\">5</a></li>\n</ul>\n<p><i id=\"p_6\" class=\"pid\"></i>All <code>/stdlib</code> methods are synchronous value RPC methods that accept and produce the same arguments and return values as the corresponding function, encoded as JSON objects, except those that produce or consume account representations.<a href=\"#p_6\" class=\"pid\">6</a></p>\n<p>\n  <i id=\"p_7\" class=\"pid\"></i>Those methods instead accept and produce account RPC handles, which are random strings that represent the corresponding account representations.\n  For example, <code>/stdlib/newTestAccount</code> does not return an account like <span class=\"snip\"><a href=\"/frontend/#js_newTestAccount\" title=\"js: newTestAccount\"><span style=\"color: var(--shiki-color-text)\">newTestAccount</span></a></span>, but instead returns an account RPC handle.<a href=\"#p_7\" class=\"pid\">7</a>\n</p>\n<ul>\n  <li><i id=\"p_8\" class=\"pid\"></i><code>/forget/acc</code> accepts an account RPC handle and deletes it from the Reach RPC Server's memory.<a href=\"#p_8\" class=\"pid\">8</a></li>\n</ul>\n<h3 id=\"ref-rpc-method-acc\" class=\"refHeader\">Account Methods<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-rpc-method-acc\"><span class=\"icon icon-link\"></span></a></h3>\n<ul>\n  <li><i id=\"p_9\" class=\"pid\"></i><code>/acc/$METHOD</code> where <code>$METHOD</code> is a method of an account representation of the <a href=\"/frontend/#ref-frontends-js\">JavaScript standard library</a>.<a href=\"#p_9\" class=\"pid\">9</a></li>\n</ul>\n<p><i id=\"p_10\" class=\"pid\"></i>All <code>/acc</code> methods are synchronous value RPC methods that accept and produce the same arguments and return values as the corresponding function, encoded as JSON objects, except they accept an additional first argument, which is the account RPC handle returned by a prior RPC method invocation; and, a method that accepts a backend (like <code>/acc/attach</code> (i.e. <span class=\"snip\"><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_attach\" title=\"js: attach\"><span style=\"color: var(--shiki-color-text)\">.attach</span></a></span>) or <code>/acc/deploy</code> (i.e. <span class=\"snip\"><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_deploy\" title=\"js: deploy\"><span style=\"color: var(--shiki-color-text)\">.deploy</span></a></span>) does not accept a backend argument, but has it implicitly provided by the Reach RPC Server.<a href=\"#p_10\" class=\"pid\">10</a></p>\n<p>\n  <i id=\"p_11\" class=\"pid\"></i>Furthermore, those that produce contract representations instead produce contract RPC handles.\n  For example, <code>/acc/deploy</code> does not return a contract representation like <span class=\"snip\"><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_deploy\" title=\"js: deploy\"><span style=\"color: var(--shiki-color-text)\">.deploy</span></a></span>, but instead returns a contract RPC handle.<a href=\"#p_11\" class=\"pid\">11</a>\n</p>\n<h3 id=\"ref-rpc-method-ctc\" class=\"refHeader\">Contract Methods<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-rpc-method-ctc\"><span class=\"icon icon-link\"></span></a></h3>\n<p><i id=\"p_12\" class=\"pid\"></i>Most <code>/ctc</code> methods are synchronous value RPC methods that accept and produce the same arguments and return values as the corresponding function, encoded as JSON objects, except they accept an additional first argument, which is the contract RPC handle returned by a prior RPC method invocation.<a href=\"#p_12\" class=\"pid\">12</a></p>\n<ul>\n  <li><i id=\"p_13\" class=\"pid\"></i><code>/ctc/$METHOD</code> where <code>$METHOD</code> is a method of a contract representation of the <a href=\"/frontend/#ref-frontends-js\">JavaScript standard library</a>.<a href=\"#p_13\" class=\"pid\">13</a></li>\n</ul>\n<p>\n  <i id=\"p_14\" class=\"pid\"></i><code>/ctc</code> methods can access <span class=\"snip\"><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><a href=\"/frontend/#js_ctc.views\" title=\"js: ctc.views\"><span style=\"color: var(--shiki-color-text)\">.views</span></a></span>, <span class=\"snip\"><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><a href=\"/frontend/#js_ctc.apis\" title=\"js: ctc.apis\"><span style=\"color: var(--shiki-color-text)\">.apis</span></a></span>, and <span class=\"snip\"><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><a href=\"/frontend/#js_ctc.events\" title=\"js: ctc.events\"><span style=\"color: var(--shiki-color-text)\">.events</span></a></span>.\n  Similar to standard library functions, the full name or first letter can be used when calling the following methods.<a href=\"#p_14\" class=\"pid\">14</a>\n</p>\n<ul>\n  <li><i id=\"p_15\" class=\"pid\"></i><code>/ctc/v</code> and <code>/ctc/views</code> provide access to <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-color-text)\">View</span></a></span>s.<a href=\"#p_15\" class=\"pid\">15</a></li>\n  <li><i id=\"p_16\" class=\"pid\"></i><code>/ctc/a</code> and <code>/ctc/apis</code> make <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-constant)\">API</span></a></span> functions available to the frontend.<a href=\"#p_16\" class=\"pid\">16</a></li>\n  <li><i id=\"p_17\" class=\"pid\"></i><code>/ctc/e</code> and <code>/ctc/events</code> provide access to <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: var(--shiki-color-text)\">Events</span></a></span>.<a href=\"#p_17\" class=\"pid\">17</a></li>\n</ul>\n<p><i id=\"p_18\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-color-text)\">View</span></a></span>, <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-constant)\">API</span></a></span> and <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: var(--shiki-color-text)\">Events</span></a></span> may be accessed with the following syntax:<a href=\"#p_18\" class=\"pid\">18</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"RPC /ctc/views/$V_NAME          # Top-level data \nRPC /ctc/views/$V_NAME/$V_FUN   # Data in $V_FUN\nRPC /ctc/apis/$A_NAME           # Top-level data \nRPC /ctc/apis/$A_NAME/$A_FUN    # Data in $A_FUN\nRPC /ctc/events/$E_NAME         # Top-level data \nRPC /ctc/events/$E_NAME/$E_FUN  # Data in $E_FUN\" href=\"#\" id=\"copyBtn2\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\">RPC /ctc/views/$V_NAME          # Top-level data </li><li value=\"2\">RPC /ctc/views/$V_NAME/$V_FUN   # Data in $V_FUN</li><li value=\"3\">RPC /ctc/apis/$A_NAME           # Top-level data </li><li value=\"4\">RPC /ctc/apis/$A_NAME/$A_FUN    # Data in $A_FUN</li><li value=\"5\">RPC /ctc/events/$E_NAME         # Top-level data </li><li value=\"6\">RPC /ctc/events/$E_NAME/$E_FUN  # Data in $E_FUN</li></ol></pre>\n<p><i id=\"p_19\" class=\"pid\"></i>For example:<a href=\"#p_19\" class=\"pid\">19</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"rpc('/ctc/views/$V_NAME/$V_FUN', c)   # Access data of function, $V_FUN, found in View, $V_NAME; `c` handles the contract Id\nrpc('/ctc/apis/$A_NAME/$A_FUN', c)    # Calls API function, $A_FUN, from API, $A_NAME\nrpc('/ctc/events/$E_NAME/$E_FUN', c)  # Access data from event function, $E_FUN, in event $E_NAME\" href=\"#\" id=\"copyBtn3\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\">rpc('/ctc/views/$V_NAME/$V_FUN', c)   # Access data of function, $V_FUN, found in View, $V_NAME; `c` handles the contract Id</li><li value=\"2\">rpc('/ctc/apis/$A_NAME/$A_FUN', c)    # Calls API function, $A_FUN, from API, $A_NAME</li><li value=\"3\">rpc('/ctc/events/$E_NAME/$E_FUN', c)  # Access data from event function, $E_FUN, in event $E_NAME</li></ol></pre>\n<p><i id=\"p_20\" class=\"pid\"></i>Below, in line 45, <code>getRead</code> accesses a <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-color-text)\">View</span></a></span> named <code>Reader</code> from the attached contract handle stored in <code>const c</code>.<a href=\"#p_20\" class=\"pid\">20</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/rpc-api-full/index.mjs\">/examples/rpc-api-full/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  return async () => {\n    const c = await rpc('/acc/contract', a, await rpc('/ctc/getInfo', ctcAdmin));\n    ctcs.push(c);\n\n    const getRead     = async () => rpc('/ctc/v/Reader/read', c);\n    const showUserBal = showBal(uid, a);\n\n    await ready.wait();\n    await showUserBal('Start');\" href=\"#\" id=\"copyBtn4\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"41\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">return</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> () </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"42\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">c</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rpc/js/#js_rpc\" title=\"js: rpc\"><span style=\"color: var(--shiki-token-function)\">rpc</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'/acc/contract'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> a</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rpc/js/#js_rpc\" title=\"js: rpc\"><span style=\"color: var(--shiki-token-function)\">rpc</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'/ctc/getInfo'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> ctcAdmin));</span></li><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-constant)\">ctcs</span><span style=\"color: var(--shiki-token-function)\">.push</span><span style=\"color: var(--shiki-color-text)\">(c);</span></li><li value=\"44\"></li><li value=\"45\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">getRead</span><span style=\"color: var(--shiki-color-text)\">     </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> () </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rpc/js/#js_rpc\" title=\"js: rpc\"><span style=\"color: var(--shiki-token-function)\">rpc</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'/ctc/v/Reader/read'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> c);</span></li><li value=\"46\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">showUserBal</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBal</span><span style=\"color: var(--shiki-color-text)\">(uid</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> a);</span></li><li value=\"47\"></li><li value=\"48\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">ready</span><a href=\"/frontend/#js_wait\" title=\"js: wait\"><span style=\"color: var(--shiki-token-function)\">.wait</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"49\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showUserBal</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Start'</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n<p><i id=\"p_21\" class=\"pid\"></i>Further into the same file, RPC is used to access the attached <code>Writer</code> <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-constant)\">API</span></a></span> and its arguments.<a href=\"#p_21\" class=\"pid\">21</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/rpc-api-full/index.mjs\">/examples/rpc-api-full/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"      try {\n        res = await rpc(`/ctc/a/Writer/${t}`, c, ...args);\n      } catch (e) {\n        res = [ 'err', e ];\n      }\" href=\"#\" id=\"copyBtn5\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"59\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-keyword)\">try</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"60\"><span style=\"color: var(--shiki-color-text)\">        res </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rpc/js/#js_rpc\" title=\"js: rpc\"><span style=\"color: var(--shiki-token-function)\">rpc</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`/ctc/a/Writer/</span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">t</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> c</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">args);</span></li><li value=\"61\"><span style=\"color: var(--shiki-color-text)\">      } </span><span style=\"color: var(--shiki-token-keyword)\">catch</span><span style=\"color: var(--shiki-color-text)\"> (e) {</span></li><li value=\"62\"><span style=\"color: var(--shiki-color-text)\">        res </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> [ </span><span style=\"color: var(--shiki-token-string-expression)\">'err'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> e ];</span></li><li value=\"63\"><span style=\"color: var(--shiki-color-text)\">      }</span></li></ol></pre>\n<p><i id=\"p_22\" class=\"pid\"></i>By providing access to <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-color-text)\">View</span></a></span>s, <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-constant)\">API</span></a></span>s, and <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: var(--shiki-color-text)\">Events</span></a></span>, RPC <code>/ctc</code> methods allow developers to build complete frontend Reach applications in the language of their choice.<a href=\"#p_22\" class=\"pid\">22</a></p>\n<ul>\n  <li><i id=\"p_23\" class=\"pid\"></i><code>/forget/ctc</code> accepts a contract RPC handle and deletes it from the Reach RPC Server's memory.<a href=\"#p_23\" class=\"pid\">23</a></li>\n</ul>\n<h3 id=\"ref-rpc-method-part\" class=\"refHeader\">Participant Methods<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-rpc-method-part\"><span class=\"icon icon-link\"></span></a></h3>\n<p>\n  <i id=\"p_24\" class=\"pid\"></i><code>/ctc/p/$PARTICIPANT</code> and <code>/ctc/participants/$PARTICIPANT</code> are interactive RPC method alternatives to the <code>/backend/$PARTICIPANT</code> method described below.\n  They accept the same arguments and behave identically.<a href=\"#p_24\" class=\"pid\">24</a>\n</p>\n<ul>\n  <li><i id=\"p_25\" class=\"pid\"></i><code>/forget/token</code> accepts a token RPC handle and deletes it from the Reach RPC Server's memory.<a href=\"#p_25\" class=\"pid\">25</a></li>\n  <li><i id=\"p_26\" class=\"pid\"></i><code>/backend/$PARTICIPANT</code> where <code>$PARTICIPANT</code> is a participant of the backend compiled by the <a href=\"/cout/#ref-backends-js\">JavaScript backend</a>.<a href=\"#p_26\" class=\"pid\">26</a></li>\n</ul>\n<h3 id=\"ref-rpc-method-backend\" class=\"refHeader\">Backend Methods<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-rpc-method-backend\"><span class=\"icon icon-link\"></span></a></h3>\n<p><i id=\"p_27\" class=\"pid\"></i>All <code>/backend/$PARTICIPANT</code> methods are interactive RPC methods that accept three arguments:<a href=\"#p_27\" class=\"pid\">27</a></p>\n<ul>\n  <li><i id=\"p_28\" class=\"pid\"></i><code>ctcId</code> --- A contract RPC handle to provide as the contract to the backend<a href=\"#p_28\" class=\"pid\">28</a></li>\n  <li><i id=\"p_29\" class=\"pid\"></i><code>values</code> --- An object containing the non-function components of the participant interact interface of the backend.<a href=\"#p_29\" class=\"pid\">29</a></li>\n  <li><i id=\"p_30\" class=\"pid\"></i><code>methods</code> --- An object whose keys correspond to the function components of the participant interact interface of the backend, but whose values are <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">true</span></span>.<a href=\"#p_30\" class=\"pid\">30</a></li>\n</ul>\n<p><i id=\"p_31\" class=\"pid\"></i>As a special case, if <code>values</code> contains <code>stdlib.hasRandom</code> bound to <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">true</span></span>, then the <a href=\"/frontend/#ref-frontends-js\">JavaScript standard library</a>'s implementation of <span class=\"snip\"><a href=\"/frontend/#js_hasRandom\" title=\"js: hasRandom\"><span style=\"color: var(--shiki-color-text)\">hasRandom</span></a></span> is provided to the backend.<a href=\"#p_31\" class=\"pid\">31</a></p>\n<p>\n  <i id=\"p_32\" class=\"pid\"></i>As the backend executes, any of the components of <code>methods</code> invoked will be executed as interactive RPC callbacks as described by the <a href=\"/rpc/proto/#ref-backends-rpc-proto\">Reach RPC Protocol Specification</a>.\n  Reach RPC Client libraries <em>should</em> expose a function that hides the details of the construction of the <code>values</code> and <code>methods</code> objects and implements interactive RPC callback handlers automatically.<a href=\"#p_32\" class=\"pid\">32</a>\n</p>\n<ul>\n  <li><i id=\"p_33\" class=\"pid\"></i><code>/backend/getExports/$EXPORT_NAME</code> where <code>$EXPORT_NAME</code> is an export of the backend compiled by the <a href=\"/cout/#ref-backends-js\">JavaScript backend</a>.<a href=\"#p_33\" class=\"pid\">33</a></li>\n</ul>\n<p>\n  <i id=\"p_34\" class=\"pid\"></i>Any Reach module exports, including functions, may be accessed via this method.\n  Field accessors and zero-indexed array references support arbitrarily deep nesting.<a href=\"#p_34\" class=\"pid\">34</a>\n</p>\n<p><i id=\"p_35\" class=\"pid\"></i>For example:<a href=\"#p_35\" class=\"pid\">35</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"RPC /backend/getExports/o          # Top-level data\nRPC /backend/getExports/o/foo/bar  # Data nested within data\nRPC /backend/getExports/a/0/2      # A deeply-nested element of an array\nRPC /backend/getExports/add 2 3    # 5; i.e. `add(2, 3)`\" href=\"#\" id=\"copyBtn6\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\">RPC /backend/getExports/o          # Top-level data</li><li value=\"2\">RPC /backend/getExports/o/foo/bar  # Data nested within data</li><li value=\"3\">RPC /backend/getExports/a/0/2      # A deeply-nested element of an array</li><li value=\"4\">RPC /backend/getExports/add 2 3    # 5; i.e. `add(2, 3)`</li></ol></pre>\n<p><i id=\"p_36\" class=\"pid\"></i>Requests for non-existent exports and non-existent nested fields or elements always return <code>null</code>.<a href=\"#p_36\" class=\"pid\">36</a></p>\n<ul>\n  <li>\n    <p>\n      <i id=\"p_37\" class=\"pid\"></i><code>/kont</code> handles interactive RPC continuation completion during an interactive RPC method.\n      It should not be invoked directly by frontends.<a href=\"#p_37\" class=\"pid\">37</a>\n    </p>\n  </li>\n  <li>\n    <p><i id=\"p_38\" class=\"pid\"></i><code>/stop</code> quits the server.<a href=\"#p_38\" class=\"pid\">38</a></p>\n  </li>\n</ul>\n<h2 id=\"ref-backends-rpc-opts\" class=\"refHeader\">Reach RPC Client Standard Options<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-backends-rpc-opts\"><span class=\"icon icon-link\"></span></a></h2>\n<p><i id=\"p_39\" class=\"pid\"></i>Reach RPC client libraries must accept a dictionary data structure with the following keys for customizing their behavior:<a href=\"#p_39\" class=\"pid\">39</a></p>\n<ul>\n  <li>\n    <i id=\"p_40\" class=\"pid\"></i><code>host</code> --- This value sets the hostname to contact for the Reach RPC Server instance.\n    If it is not present, the client library must default to the value of the environment variable <code>REACH_RPC_SERVER</code>.<a href=\"#p_40\" class=\"pid\">40</a>\n  </li>\n  <li>\n    <i id=\"p_41\" class=\"pid\"></i><code>port</code> --- This value sets the TCP port to contact for the Reach RPC Server instance.\n    If it is not present, the client library must default to the value of the environment variable <code>REACH_RPC_PORT</code>.<a href=\"#p_41\" class=\"pid\">41</a>\n  </li>\n  <li>\n    <i id=\"p_42\" class=\"pid\"></i><code>verify</code> --- This value determines whether to verify the TLS certificate of the Reach RPC Server instance.\n    If it is not present, the client library must default to the value of the environment variable <code>REACH_RPC_TLS_REJECT_UNVERIFIED</code>.\n    If that is not present, it must default to true.<a href=\"#p_42\" class=\"pid\">42</a>\n  </li>\n</ul>\n<p><i id=\"p_43\" class=\"pid\"></i>To disable verification, set this value to the string: <code>\"0\"</code>; any other value will be considered to mean \"enable\".<a href=\"#p_43\" class=\"pid\">43</a></p>\n<ul>\n  <li>\n    <i id=\"p_44\" class=\"pid\"></i><code>timeout</code> --- This value sets the number of seconds to wait for the Reach RPC Server instance to respond to its first request.\n    If it is not present, the client library must default to the value of the environment variable <code>REACH_RPC_TIMEOUT</code>.\n    If that is not present, it must default to 5 seconds.<a href=\"#p_44\" class=\"pid\">44</a>\n  </li>\n  <li>\n    <i id=\"p_45\" class=\"pid\"></i><code>key</code> --- This value sets the API key for the Reach RPC Server instance.\n    If it is not present, the client library must default to the value of the environment variable <code>REACH_RPC_KEY</code>.<a href=\"#p_45\" class=\"pid\">45</a>\n  </li>\n</ul>","<ul><li class=\"dynamic\">\n    <a href=\"#ref-backends-rpc\">RPC Server</a>\n    <ul class=\"dynamic\">\n      <li class=\"dynamic\">\n        <a href=\"#ref-rpc-method\">RPC Methods</a>\n        <ul class=\"dynamic\">\n          <li class=\"dynamic\"><a href=\"#ref-rpc-method-acc\">Account Methods</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-rpc-method-ctc\">Contract Methods</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-rpc-method-part\">Participant Methods</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-rpc-method-backend\">Backend Methods</a></li>\n        </ul>\n      </li>\n      <li class=\"dynamic\">\n        <a href=\"#ref-backends-rpc-opts\">Reach RPC Client Standard Options</a>\n      </li>\n    </ul>\n  </li></ul>"]
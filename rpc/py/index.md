[{"bookPath":"rpc","title":"Python","titleId":"ref-frontends-rpc-py","hasOtp":true,"hasPageHeader":true},"<div class=\"note\">\n  <p><i id=\"p_0\" class=\"pid\"></i>This frontend library relies on the <a href=\"/rpc/#ref-backends-rpc\">Reach RPC Server</a>.<a href=\"#p_0\" class=\"pid\">0</a></p>\n</div>\n<p>\n  <i id=\"p_1\" class=\"pid\"></i>A <a href=\"https://www.python.org\">Python</a> client library for the\n  <a href=\"/rpc/#ref-backends-rpc\">Reach RPC protocol</a> may be installed by running:<a href=\"#p_1\" class=\"pid\">1</a>\n</p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"pip install --upgrade reach-rpc-client\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> pip install </span><span style=\"color: var(--shiki-token-keyword)\">--</span><span style=\"color: var(--shiki-color-text)\">upgrade reach</span><span style=\"color: var(--shiki-token-keyword)\">-</span><span style=\"color: var(--shiki-color-text)\">rpc</span><span style=\"color: var(--shiki-token-keyword)\">-</span><span style=\"color: var(--shiki-color-text)\">client</span></li></ol></pre>\n<p>\n  <i id=\"p_2\" class=\"pid\"></i>Once installed, add the following import line to your Python file which will\n  connect to the <a href=\"/rpc/#ref-backends-rpc\">RPC server</a>:<a href=\"#p_2\" class=\"pid\">2</a>\n</p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"from reach_rpc import mk_rpc\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> reach_rpc </span><span style=\"color: var(--shiki-token-keyword)\">import</span><span style=\"color: var(--shiki-color-text)\"> mk_rpc</span></li></ol></pre>\n<p><i id=\"p_3\" class=\"pid\"></i>The library provides the following bindings:<a href=\"#p_3\" class=\"pid\">3</a></p>\n<hr>\n<p><span class=\"ref\" id=\"py_mk_rpc\" data-scope=\"py\" data-symbol=\"mk_rpc\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"rpc, rpc_callbacks = mk_rpc(opts)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rpc/py/#py_rpc\" title=\"py: rpc\"><span style=\"color: var(--shiki-color-text)\">rpc</span></a><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> rpc_callbacks </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rpc/py/#py_mk_rpc\" title=\"py: mk_rpc\"><span style=\"color: var(--shiki-token-function)\">mk_rpc</span></a><span style=\"color: var(--shiki-token-punctuation)\">(opts)</span></li></ol></pre>\n<p><i id=\"p_4\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rpc/py/#py_mk_rpc\" title=\"py: mk_rpc\"><span style=\"color: var(--shiki-color-text)\">mk_rpc</span></a></span> accepts the <a href=\"/rpc/#ref-backends-rpc-opts\">Reach RPC Client Standard Options</a> as a dictionary and returns two functions, traditionally called <span class=\"snip\"><a href=\"/rpc/py/#py_rpc\" title=\"py: rpc\"><span style=\"color: var(--shiki-color-text)\">rpc</span></a></span> and <span class=\"snip\"><a href=\"/rpc/py/#py_rpc_callbacks\" title=\"py: rpc_callbacks\"><span style=\"color: var(--shiki-color-text)\">rpc_callbacks</span></a></span>.<a href=\"#p_4\" class=\"pid\">4</a></p>\n<p>\n  <i id=\"p_5\" class=\"pid\"></i><span class=\"ref\" id=\"py_rpc\" data-scope=\"py\" data-symbol=\"rpc\"></span><span class=\"snip\"><a href=\"/rpc/py/#py_rpc\" title=\"py: rpc\"><span style=\"color: var(--shiki-color-text)\">rpc</span></a></span> is a function that invokes a synchronous value RPC method.\n  It takes a string, naming the RPC method, and some JSON values to provide as arguments.\n  It returns a single JSON value as the result.<a href=\"#p_5\" class=\"pid\">5</a>\n</p>\n<p><i id=\"p_6\" class=\"pid\"></i>For example,<a href=\"#p_6\" class=\"pid\">6</a></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"rpc('/stdlib/formatCurrency', i, 4)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rpc/py/#py_rpc\" title=\"py: rpc\"><span style=\"color: var(--shiki-token-function)\">rpc</span></a><span style=\"color: var(--shiki-token-punctuation)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'/stdlib/formatCurrency'</span><span style=\"color: var(--shiki-token-punctuation)\">, i, </span><span style=\"color: var(--shiki-token-constant)\">4</span><span style=\"color: var(--shiki-token-punctuation)\">)</span></li></ol></pre>\n<p><i id=\"p_7\" class=\"pid\"></i>calls <span class=\"snip\"><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-color-text)\">formatCurrency</span></a></span> with some value <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">i</span></span> and <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">4</span></span>.<a href=\"#p_7\" class=\"pid\">7</a></p>\n<p>\n  <i id=\"p_8\" class=\"pid\"></i><span class=\"ref\" id=\"py_rpc_callbacks\" data-scope=\"py\" data-symbol=\"rpc_callbacks\"></span><span class=\"snip\"><a href=\"/rpc/py/#py_rpc_callbacks\" title=\"py: rpc_callbacks\"><span style=\"color: var(--shiki-color-text)\">rpc_callbacks</span></a></span> is a function that invokes an interactive RPC method, such as for a backend.\n  It takes a string, naming the RPC method, a JSON value as an argument,\n  and dictionary from strings to JSON values or functions.\n  The functions will be provided as interactive RPC callbacks to the\n  RPC method and should expect JSON values as arguments and return a JSON\n  value as a result.\n  It does not return a value.<a href=\"#p_8\" class=\"pid\">8</a>\n</p>\n<p><i id=\"p_9\" class=\"pid\"></i>For example,<a href=\"#p_9\" class=\"pid\">9</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"def showX(x):\n    print('Alice saw that X is %s'\n          % rpc('/stdlib/bigNumberToNumber', x))\n\nms = { 'price': 10,\n       'showX': showX,\n     }\nrpc_callbacks(&quot;/backend/Alice&quot;, ctc, ms)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">def</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showX</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-parameter)\">x</span><span style=\"color: var(--shiki-color-text)\">):</span></li><li value=\"2\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">print</span><span style=\"color: var(--shiki-token-punctuation)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Alice saw that X is </span><span style=\"color: var(--shiki-token-constant)\">%s</span><span style=\"color: var(--shiki-token-string-expression)\">'</span></li><li value=\"3\"><span style=\"color: var(--shiki-token-punctuation)\">          </span><span style=\"color: var(--shiki-token-keyword)\">%</span><span style=\"color: var(--shiki-token-punctuation)\"> </span><a href=\"/rpc/py/#py_rpc\" title=\"py: rpc\"><span style=\"color: var(--shiki-token-function)\">rpc</span></a><span style=\"color: var(--shiki-token-punctuation)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'/stdlib/bigNumberToNumber'</span><span style=\"color: var(--shiki-token-punctuation)\">, x))</span></li><li value=\"4\"></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">ms </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-punctuation)\">{</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'price'</span><span style=\"color: var(--shiki-token-punctuation)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">10</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">       </span><span style=\"color: var(--shiki-token-string-expression)\">'showX'</span><span style=\"color: var(--shiki-token-punctuation)\">:</span><span style=\"color: var(--shiki-color-text)\"> showX</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"7\"><span style=\"color: var(--shiki-color-text)\">     </span><span style=\"color: var(--shiki-token-punctuation)\">}</span></li><li value=\"8\"><a href=\"/rpc/py/#py_rpc_callbacks\" title=\"py: rpc_callbacks\"><span style=\"color: var(--shiki-token-function)\">rpc_callbacks</span></a><span style=\"color: var(--shiki-token-punctuation)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">\"/backend/Alice\"</span><span style=\"color: var(--shiki-token-punctuation)\">, ctc, ms)</span></li></ol></pre>\n<p><i id=\"p_10\" class=\"pid\"></i>calls a backend named <code>Alice</code> with the contract <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">ctc</span></span> and a value named <code>price</code> and a method named <code>showX</code> that prints out a result from the Reach backend.<a href=\"#p_10\" class=\"pid\">10</a></p>","<ul><li class=\"dynamic\"><a href=\"#ref-frontends-rpc-py\">Python</a></li></ul>"]
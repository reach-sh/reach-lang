[{"bookPath":"guide","title":"Determinism, simultaneity, and choice in decentralized applications","titleId":"guide-determ","hasOtp":true,"hasPageHeader":true},"<p>\n  <i id=\"p_0\" class=\"pid\"></i>The structure of a Reach computation is deterministic, because at each point in a computation, all participants agree on which publication is the next one in the computation.\n  If this were not the case, then different participants may attempt to pursue different paths through a computation and thereby reach different values at the end.\n  This deterministic structure, however, does not mean that the participant that provides the publication must be fixed, merely that which publication event is next must be fixed; see for example <span class=\"snip\"><a href=\"/rsh/step/#rsh_race\" title=\"rsh: race\"><span style=\"color: var(--shiki-color-text)\">race</span></a></span> expressions and the <a href=\"/guide/race/#guide-race\">the guide section on races</a> for an elaboration of this point.\n  Even in the presence of this non-determinism in actors, Reach programs remain deterministic in their structure.<a href=\"#p_0\" class=\"pid\">0</a>\n</p>\n<p>\n  <i id=\"p_1\" class=\"pid\"></i>However, many developers think of their application as having a step when two participants act simultaneously.\n  For example, in a game of <a href=\"/tut/rps/#tut\">Rock, Paper, Scissors!</a> in the real world, both players simultaneously choose their hands.\n  Similarly, a rental agreement gives both the landlord and the tenant the ability to cancel the agreement (subject to some penalty) at any time.\n  In both of these cases, it is not clear how to understand this interaction as being sequential and deterministic.<a href=\"#p_1\" class=\"pid\">1</a>\n</p>\n<p>\n  <i id=\"p_2\" class=\"pid\"></i>At first glance, these situations appear different.\n  In the first, the participants are doing \"the same thing\" simultaneously, because both will submit a hand eventually; while in the second, they are doing \"something different\", because only one of them will actually end the agreement early.\n  However, both of these situations are actually identical, because in the second case they are both simultaneously deciding whether they will end early.\n  In the first case, the participants are submitting one of three values (<code>Rock</code>, <code>Paper</code>, or <code>Scissors</code>), while in the second they are submitting one of two (<code>Leave</code> or <code>Stay</code>).<a href=\"#p_2\" class=\"pid\">2</a>\n</p>\n<p>\n  <i id=\"p_3\" class=\"pid\"></i>In such situations, in a decentralized application, the program must agree that one participant acts first.\n  The important thing to realize is that \"simultaneity\" is not the same thing as \"non-determinism\".\n  The pertinent design detail is whether one participant has an advantage for going in any particular order.\n  If there is no advantage for either place, then the developer can arbitrarily decide to go in one order.\n  If there is an advantage, then a commitment strategy similar to the <a href=\"/tut/rps/#tut\">Rock, Paper, Scissors! tutorial</a> should be used.<a href=\"#p_3\" class=\"pid\">3</a>\n</p>\n<p>\n  <i id=\"p_4\" class=\"pid\"></i>For example, in the rental agreement, if we felt there was no advantage for going second, then we could have either the landlord or the tenant go first.\n  But, is there no advantage?\n  If both the tenant and the landlord want to exit in the same month, but the landlord goes first, then the landlord would suffer a loss of their deposit; but, if they fairly shared their choice at the same time, then they could both be refunded in this case.\n  This is an example of the Pareto improvements that are possible in decentralized applications relative to existing institutions.<a href=\"#p_4\" class=\"pid\">4</a>\n</p>\n<div class=\"note\">\n  <p><i id=\"p_5\" class=\"pid\"></i>See <a href=\"/workshop/#workshop-rental\">rental workshop</a> for a discussion of this example in further detail.<a href=\"#p_5\" class=\"pid\">5</a></p>\n</div>","<ul><li class=\"dynamic\"><a href=\"#guide-determ\">Determinism, simultaneity, and choice in decentralized applications</a></li></ul>"]
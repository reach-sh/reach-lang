<p>Reach modules are specified in source files with <code>.rsh</code> extensions (e.g. <em>index.rsh</em> or <em>dao.rsh</em>). Here is a simple example:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #0A3069">'reach 0.1'</span><span style="color: #24292F">;</span></li><li value="2"><span style="color: #CF222E">export</span><span style="color: #24292F"> </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">main</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> Reach.</span><span style="color: #8250DF">App</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="3"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">S</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">Participant</span><span style="color: #24292F">(</span><span style="color: #0A3069">'Seller'</span><span style="color: #24292F">, {});</span></li><li value="4"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">B</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">Participant</span><span style="color: #24292F">(</span><span style="color: #0A3069">'Buyer'</span><span style="color: #24292F">, {});</span></li><li value="5"><span style="color: #24292F">  </span><span style="color: #8250DF">deploy</span><span style="color: #24292F">();</span></li><li value="6"><span style="color: #24292F">  </span><span style="color: #8250DF">exit</span><span style="color: #24292F">();</span></li><li value="7"><span style="color: #24292F">});</span></li></ol></pre>
<ul>
  <li>Line 1: Reach compiler version (major and minor numbers, but no patch number).</li>
  <li>Line 2: Application initialization function.</li>
  <li>Line 3-4: Expressions that instantiate participants.</li>
  <li>Line 5: Statement that transitions from Initialization mode to Step mode,</li>
  <li>Line 6: Statement that halts computation.</li>
</ul>
<p>In addition to the statements and expressions found in <a href="/en/essentials/backend-programming/reach-syntax/">Reach Syntax</a>, modules support the additional statements and expression described below.</p>
<h1 id="export">export<a aria-hidden="true" tabindex="-1" href="#export"><span class="icon icon-link"></span></a></h1>
<p>The <code>export</code> statement exports definitions allowing other modules to import them. Here are three valid exports:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">export</span><span style="color: #24292F"> </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">x</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">1</span><span style="color: #24292F">;</span></li><li value="2"><span style="color: #CF222E">export</span><span style="color: #24292F"> </span><span style="color: #CF222E">const</span><span style="color: #24292F"> [</span><span style="color: #0550AE">a</span><span style="color: #24292F">, </span><span style="color: #0550AE">b</span><span style="color: #24292F">, </span><span style="color: #CF222E">...</span><span style="color: #0550AE">more</span><span style="color: #24292F">] </span><span style="color: #CF222E">=</span><span style="color: #24292F"> [ </span><span style="color: #0550AE">0</span><span style="color: #24292F">, </span><span style="color: #0550AE">1</span><span style="color: #24292F">, </span><span style="color: #0550AE">2</span><span style="color: #24292F">, </span><span style="color: #0550AE">3</span><span style="color: #24292F">, </span><span style="color: #0550AE">4</span><span style="color: #24292F"> ];</span></li><li value="3"><span style="color: #CF222E">export</span><span style="color: #24292F"> </span><span style="color: #CF222E">function</span><span style="color: #24292F"> </span><span style="color: #8250DF">add1</span><span style="color: #24292F">(</span><span style="color: #953800">x</span><span style="color: #24292F">) { </span><span style="color: #CF222E">return</span><span style="color: #24292F"> x </span><span style="color: #CF222E">+</span><span style="color: #24292F"> </span><span style="color: #0550AE">1</span><span style="color: #24292F">; };</span></li></ol></pre>
<p>You can use <code>export</code> to export and rename definitions after the fact, too:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">w</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">2</span><span style="color: #24292F">;</span></li><li value="2"><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">z</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">;</span></li><li value="3"><span style="color: #CF222E">export</span><span style="color: #24292F"> {w, z </span><span style="color: #CF222E">as</span><span style="color: #24292F"> zero};</span></li></ol></pre>
<p>And, you can use <code>export</code> to re-export and rename identifiers from other modules even if you do not import these identifiers into the current module:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">export</span><span style="color: #24292F"> {u, x </span><span style="color: #CF222E">as</span><span style="color: #24292F"> other_x} </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'./other-module.rsh'</span><span style="color: #24292F">;</span></li></ol></pre>
<p>Frontends use the <a href="http://localhost:8081/en/essentials/frontend-programming/javascript-frontends/">Reach JS Standard Library</a> <code>getExports</code> method to access backend exports.</p>
<h1 id="import">import<a aria-hidden="true" tabindex="-1" href="#import"><span class="icon icon-link"></span></a></h1>
<p>The <code>import</code> statement imports (into the current module) definitions from other Reach modules. Reach supports <em>local</em> and <em>package</em> imports.</p>
<h2 id="local">Local<a aria-hidden="true" tabindex="-1" href="#local"><span class="icon icon-link"></span></a></h2>
<p>A <em>local import</em> imports (into the current module) other modules in your project:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">import</span><span style="color: #24292F"> </span><span style="color: #0A3069">'games-of-chance.rsh'</span><span style="color: #24292F">;</span></li></ol></pre>
<p>When a module, <code>X</code>, contains a local import, written <code>import "LIB.rsh";</code>, then the path <code>"LIB.rsh"</code> must resolve to another Reach source file. The exports from the module defined by <code>"LIB.rsh"</code> are included in the set of bound identifiers in <code>X</code>:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">import</span><span style="color: #24292F"> {flipCoin, rollDice </span><span style="color: #CF222E">as</span><span style="color: #24292F"> d6} </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'games-of-chance.rsh'</span><span style="color: #24292F">;</span></li></ol></pre>
<p>Import statements may limit or rename the imported identifiers:</p>
<pre class="snippet unnumbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">import</span><span style="color: #24292F"> </span><span style="color: #0550AE">*</span><span style="color: #24292F"> </span><span style="color: #CF222E">as</span><span style="color: #24292F"> gamesOfChance </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'games-of-chance.rsh'</span><span style="color: #24292F">;</span></li></ol></pre>
<p>Imports may also bind the entire module to a single identifier which is an object with fields corresponding to that module’s exports. Import cycles are invalid. The path given to an import may not include <code>..</code> to specify files outside the current directory, nor may it be an absolute path. It must be a relative path which is resolved relative to the parent directory of the source file in which it appears.</p>
<h2 id="package">Package<a aria-hidden="true" tabindex="-1" href="#package"><span class="icon icon-link"></span></a></h2>
<p>A <em>package import</em> imports (into the local module) remote libraries that may be fetched from <a href="https://github.com/">Github</a> or other sources:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">import</span><span style="color: #24292F"> </span><span style="color: #0550AE">*</span><span style="color: #24292F"> </span><span style="color: #CF222E">as</span><span style="color: #24292F"> func </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'@reach-sh/reach-example-package'</span><span style="color: #24292F">;</span></li><li value="2"><span style="color: #CF222E">import</span><span style="color: #24292F"> </span><span style="color: #0550AE">*</span><span style="color: #24292F"> </span><span style="color: #CF222E">as</span><span style="color: #24292F"> func </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'@reach-sh/reach-example-package:src/func.rsh'</span><span style="color: #24292F">;</span></li><li value="3"><span style="color: #CF222E">import</span><span style="color: #24292F"> </span><span style="color: #0550AE">*</span><span style="color: #24292F"> </span><span style="color: #CF222E">as</span><span style="color: #24292F"> func </span><span style="color: #CF222E">from</span><span style="color: #24292F"> </span><span style="color: #0A3069">'@github.com:reach-sh/reach-example-package#main:src/func.rsh'</span><span style="color: #24292F">;</span></li></ol></pre>
<p>Package imports obey the same rules as local imports, but they support the following extended path syntax which allows Reach programmers to seamlessly plug into third-party libraries hosted on the internet:</p>
<div>
  <img src="/exp/essentials/backend-programming/reach-modules/package-import-format.png" class="img-fluid" width="800" height="120" loading="lazy">
</div>
<p>Note the following:</p>
<ol>
  <li>All valid package imports must begin with the <code>@</code> character.</li>
  <li>If you do not specify a <em>Tag</em>, Reach defaults to the master branch and then the main branch.</li>
  <li>If you do specify a <em>Tag</em>, use git tags to denote version releases (e.g. <code>v0.2.1</code>). Branch names also work.</li>
</ol>
<p>Below are several pseudo examples:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo</span></li><li value="2"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:</span></li><li value="3"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span><span style="color: #24292F">file.rsh</span></li><li value="4"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span></li><li value="5"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:file.rsh</span></li><li value="6"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#</span></li><li value="7"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:</span></li><li value="8"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span><span style="color: #24292F">file.rsh</span></li><li value="9"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span></li><li value="10"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:file.rsh</span></li><li value="11"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref</span></li><li value="12"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:</span></li><li value="13"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span><span style="color: #24292F">file.rsh</span></li><li value="14"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span></li><li value="15"><span style="color: #24292F">@account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:file.rsh</span></li><li value="16"><span style="color: #24292F">   </span></li><li value="17"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo</span></li><li value="18"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:</span></li><li value="19"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span><span style="color: #24292F">file.rsh</span></li><li value="20"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span></li><li value="21"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo:file.rsh</span></li><li value="22"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#</span></li><li value="23"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:</span></li><li value="24"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span><span style="color: #24292F">file.rsh</span></li><li value="25"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span></li><li value="26"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#:file.rsh</span></li><li value="27"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref</span></li><li value="28"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:</span></li><li value="29"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span><span style="color: #24292F">file.rsh</span></li><li value="30"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:a</span><span style="color: #CF222E">/</span><span style="color: #24292F">b</span><span style="color: #CF222E">/</span></li><li value="31"><span style="color: #24292F">@server:account</span><span style="color: #CF222E">/</span><span style="color: #24292F">repo#ref:file.rsh</span></li></ol></pre>
<p>Since git repositories evolve and change over time, Reach takes extra steps in order to pin a given module import’s version to the specific SHA hash of the specified revision at the time the package is first installed. These pins are stored in a <a href="/en/essentials/backend-programming/reach-script/#reach-compile">lockfile</a>, which should be included in your source control system.</p>
<h1 id="reachapp">Reach.App<a aria-hidden="true" tabindex="-1" href="#reachapp"><span class="icon icon-link"></span></a></h1>
<p>The <code>Reach.App</code> expression accepts a no-argument function (e.g. <code>() =&gt; {}</code>) that specifies the entire DApp between its curly braces:</p>
<pre class="snippet numbered"><ol class="snippet"><li value="1"><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">sellerInteract</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> {</span></li><li value="2"><span style="color: #24292F">  displayResult: </span><span style="color: #8250DF">Fun</span><span style="color: #24292F">(Int, Null) </span></li><li value="3"><span style="color: #24292F">};</span></li><li value="4"></li><li value="5"><span style="color: #CF222E">export</span><span style="color: #24292F"> </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">main</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> Reach.</span><span style="color: #8250DF">App</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> {</span></li><li value="6"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">S</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #8250DF">Participant</span><span style="color: #24292F">(</span><span style="color: #0A3069">'Seller'</span><span style="color: #24292F">, sellerInteract);</span></li><li value="7"><span style="color: #24292F">  </span><span style="color: #8250DF">deploy</span><span style="color: #24292F">();</span></li><li value="8"></li><li value="9"><span style="color: #24292F">  </span><span style="color: #CF222E">const</span><span style="color: #24292F"> </span><span style="color: #0550AE">result</span><span style="color: #24292F"> </span><span style="color: #CF222E">=</span><span style="color: #24292F"> </span><span style="color: #0550AE">0</span><span style="color: #24292F">;</span></li><li value="10"><span style="color: #24292F">  </span><span style="color: #0550AE">S</span><span style="color: #24292F">.</span><span style="color: #8250DF">only</span><span style="color: #24292F">(() </span><span style="color: #CF222E">=&gt;</span><span style="color: #24292F"> { interact.</span><span style="color: #8250DF">displayResult</span><span style="color: #24292F">(result); });</span></li><li value="11"></li><li value="12"><span style="color: #24292F"> </span><span style="color: #8250DF">exit</span><span style="color: #24292F">();</span></li><li value="13"><span style="color: #24292F">});</span></li></ol></pre>
<ul>
  <li>Line 5: The function starts in <a href="/en/essentials/backend-programming/reach-modes/#initialization">Initialization</a> mode.</li>
  <li>Line 7: <code>deploy()</code> transitions the function to <a href="/en/essentials/backend-programming/reach-modes/#step">Step</a> mode.</li>
</ul>
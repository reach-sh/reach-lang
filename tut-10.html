<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149147406-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149147406-2');</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script src="tooltips.js"></script><script src="reach-pre.js"></script><link rel="stylesheet" href="tooltips.css"><link rel="stylesheet" href="reach.css"><link rel="stylesheet" href="minted.css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><link rel="manifest" href="/favicon/site.webmanifest"><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2.10&nbsp;Onward and Further</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewselflink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="tut-1.html" class="tocviewlink" data-pltdoc="x">Install and Initialize</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="tut-2.html" class="tocviewlink" data-pltdoc="x">Scaffolding and Setup</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="tut-3.html" class="tocviewlink" data-pltdoc="x">Rock, Paper, and Scissors</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="tut-4.html" class="tocviewlink" data-pltdoc="x">Bets and Wagers</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="tut-5.html" class="tocviewlink" data-pltdoc="x">Trust and Commitments</a></td></tr><tr><td align="right">2.6&nbsp;</td><td><a href="tut-6.html" class="tocviewlink" data-pltdoc="x">Timeouts and Participation</a></td></tr><tr><td align="right">2.7&nbsp;</td><td><a href="tut-7.html" class="tocviewlink" data-pltdoc="x">Play and Play Again</a></td></tr><tr><td align="right">2.8&nbsp;</td><td><a href="tut-8.html" class="tocviewlink" data-pltdoc="x">Interaction and Independence</a></td></tr><tr><td align="right">2.9&nbsp;</td><td><a href="tut-9.html" class="tocviewlink" data-pltdoc="x">Web Interaction</a></td></tr><tr><td align="right">2.10&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Onward and Further</a></td></tr><tr><td align="right">2.11&nbsp;</td><td><a href="tut-7-rpc.html" class="tocviewlink" data-pltdoc="x">Rock, Paper, Scissors in Python</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-9.html" title="backward to &quot;2.9 Web Interaction&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-7-rpc.html" title="forward to &quot;2.11 Rock, Paper, Scissors in Python&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.10<tt>&nbsp;</tt><a name="(part._tut-10)"></a>Onward and Further</h4><p>Let&rsquo;s review what we&rsquo;ve done through this tutorial:</p><ul><li><p>In <a href="tut-1.html" data-pltdoc="x">part one</a>, we saw how Reach can be installed with one command on almost any system without any dependencies beyond what most developers have anyways.</p></li><li><p>In <a href="tut-2.html" data-pltdoc="x">part two</a>, we saw how Reach programs have a succinct setup that easily abstracts the details of your chosen <a href="ref-model.html#%28tech._consensus._network%29" class="techoutside" data-pltdoc="x"><span class="techinside">consensus network</span></a> into a couple lines and three key API calls.</p></li><li><p>In <a href="tut-3.html" data-pltdoc="x">part three</a>, we saw how Reach allows developers to focus on the business logic of their decentralized application and look past the nitty-gritty details of blockchain interaction and protocol design.</p></li><li><p>In <a href="tut-4.html" data-pltdoc="x">part four</a>, we saw that it is just as easy for Reach to deal with tokens and network transactions as it is to deal with data sharing.</p></li><li><p>In <a href="tut-5.html" data-pltdoc="x">part five</a>, we introduce you to the Reach <a href="guide-assert.html" data-pltdoc="x">automatic formal verification</a> engine and its ability to ensure our program doesn&rsquo;t have entire categories of flaws and security vulnerabilities.</p></li><li><p>In <a href="tut-6.html" data-pltdoc="x">part six</a>, we saw how Reach allows you to specify how to deal with <a href="guide-timeout.html" data-pltdoc="x">non-participation</a> and protect against funds being locked in contracts.</p></li><li><p>In <a href="tut-7.html" data-pltdoc="x">part seven</a>, we saw how Reach can express arbitrary length interactions and how flexible the Reach <a href="ref-model.html#%28tech._frontend%29" class="techoutside" data-pltdoc="x"><span class="techinside">frontends</span></a> are to variations in the <a href="ref-model.html#%28tech._backend%29" class="techoutside" data-pltdoc="x"><span class="techinside">backend</span></a>.</p></li><li><p>In <a href="tut-8.html" data-pltdoc="x">part eight</a>, we saw how to decouple your Reach program from the Reach standard testing environment and launch an interactive version on a real network.</p></li><li><p>In <a href="tut-9.html" data-pltdoc="x">part nine</a>, we saw how to deploy your Reach program as a fully decentralized Web application.</p></li></ul><p>Despite having done so much, this is really just a brief introduction to what is possible with Reach.</p><p>How difficult was all this?
Let&rsquo;s look at the final versions of our programs.</p><p>First, let&rsquo;s look at the Reach program:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-8/index.rsh"><span class="stt">tut-8/index.rsh</span></a><button class="btn" data-clipboard-text="'reach 0.1';

const [ isHand, ROCK, PAPER, SCISSORS ] = makeEnum(3);
const [ isOutcome, B_WINS, DRAW, A_WINS ] = makeEnum(3);

const winner = (handA, handB) =&gt;
      ((handA + (4 - handB)) % 3);

assert(winner(ROCK, PAPER) == B_WINS);
assert(winner(PAPER, ROCK) == A_WINS);
assert(winner(ROCK, ROCK) == DRAW);

forall(UInt, handA =&gt;
  forall(UInt, handB =&gt;
    assert(isOutcome(winner(handA, handB)))));

forall(UInt, (hand) =&gt;
  assert(winner(hand, hand) == DRAW));

const Player =
      { ...hasRandom,
        getHand: Fun([], UInt),
        seeOutcome: Fun([UInt], Null),
        informTimeout: Fun([], Null) };
const Alice =
      { ...Player,
        wager: UInt };
const Bob =
      { ...Player,
        acceptWager: Fun([UInt], Null) };

const DEADLINE = 100;
export const main =
  Reach.App(
    {},
    [Participant('Alice', Alice), Participant('Bob', Bob)],
    (A, B) =&gt; {
      const informTimeout = () =&gt; {
        each([A, B], () =&gt; {
          interact.informTimeout(); }); };

      A.only(() =&gt; {
        const wager = declassify(interact.wager); });
      A.publish(wager)
        .pay(wager);
      commit();

      B.only(() =&gt; {
        interact.acceptWager(wager); });
      B.pay(wager)
        .timeout(DEADLINE, () =&gt; closeTo(A, informTimeout));

      var outcome = DRAW;
      invariant(balance() == 2 * wager &amp;&amp; isOutcome(outcome) );
      while ( outcome == DRAW ) {
        commit();

        A.only(() =&gt; {
          const _handA = interact.getHand();
          const [_commitA, _saltA] = makeCommitment(interact, _handA);
          const commitA = declassify(_commitA); });
        A.publish(commitA)
          .timeout(DEADLINE, () =&gt; closeTo(B, informTimeout));
        commit();

        unknowable(B, A(_handA, _saltA));
        B.only(() =&gt; {
          const handB = declassify(interact.getHand()); });
        B.publish(handB)
          .timeout(DEADLINE, () =&gt; closeTo(A, informTimeout));
        commit();

        A.only(() =&gt; {
          const [saltA, handA] = declassify([_saltA, _handA]); });
        A.publish(saltA, handA)
          .timeout(DEADLINE, () =&gt; closeTo(B, informTimeout));
        checkCommitment(commitA, saltA, handA);

        outcome = winner(handA, handB);
        continue; }

      assert(outcome == A_WINS || outcome == B_WINS);
      transfer(2 * wager).to(outcome == A_WINS ? A : B);
      commit();

      each([A, B], () =&gt; {
        interact.seeOutcome(outcome); });
      exit(); });"><img class="clippy" width="13" src="clippy.svg" alt="Copy to clipboard"> </img></button>&nbsp;</p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mi">1</span>    <span class="s1">&#39;reach 0.1&#39;</span><span class="p">;</span>
 <span class="mi">2</span>    
 <span class="mi">3</span>    <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <span class="p">[</span> <font class="badlink"><span class="nx">isHand</span></font><span class="p">,</span> <font class="badlink"><span class="nx">ROCK</span></font><span class="p">,</span> <font class="badlink"><span class="nx">PAPER</span></font><span class="p">,</span> <font class="badlink"><span class="nx">SCISSORS</span></font> <span class="p">]</span> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-compute.html#%28reach._%28%28make.Enum%29%29%29" class="nb" data-pltdoc="x">makeEnum</a><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
 <span class="mi">4</span>    <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <span class="p">[</span> <font class="badlink"><span class="nx">isOutcome</span></font><span class="p">,</span> <font class="badlink"><span class="nx">B_WINS</span></font><span class="p">,</span> <font class="badlink"><span class="nx">DRAW</span></font><span class="p">,</span> <font class="badlink"><span class="nx">A_WINS</span></font> <span class="p">]</span> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-compute.html#%28reach._%28%28make.Enum%29%29%29" class="nb" data-pltdoc="x">makeEnum</a><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
 <span class="mi">5</span>    
 <span class="mi">6</span>    <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">winner</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">(</span><font class="badlink"><span class="nx">handA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">handB</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a>
 <span class="mi">7</span>          <span class="p">((</span><font class="badlink"><span class="nx">handA</span></font> <a href="ref-programs-compute.html#%28reach._%28%28%2B%29%29%29" class="o" data-pltdoc="x">+</a> <span class="p">(</span><span class="mi">4</span> <a href="ref-programs-compute.html#%28reach._%28%28-%29%29%29" class="o" data-pltdoc="x">-</a> <font class="badlink"><span class="nx">handB</span></font><span class="p">))</span> <a href="ref-programs-compute.html#%28reach._%28%28~25%29%29%29" class="o" data-pltdoc="x">%</a> <span class="mi">3</span><span class="p">);</span>
 <span class="mi">8</span>    
 <span class="mi">9</span>    <a href="ref-programs-compute.html#%28reach._%28%28assert%29%29%29" class="k" data-pltdoc="x">assert</a><span class="p">(</span><font class="badlink"><span class="nx">winner</span></font><span class="p">(</span><font class="badlink"><span class="nx">ROCK</span></font><span class="p">,</span> <font class="badlink"><span class="nx">PAPER</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">B_WINS</span></font><span class="p">);</span>
<span class="mi">10</span>    <a href="ref-programs-compute.html#%28reach._%28%28assert%29%29%29" class="k" data-pltdoc="x">assert</a><span class="p">(</span><font class="badlink"><span class="nx">winner</span></font><span class="p">(</span><font class="badlink"><span class="nx">PAPER</span></font><span class="p">,</span> <font class="badlink"><span class="nx">ROCK</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">A_WINS</span></font><span class="p">);</span>
<span class="mi">11</span>    <a href="ref-programs-compute.html#%28reach._%28%28assert%29%29%29" class="k" data-pltdoc="x">assert</a><span class="p">(</span><font class="badlink"><span class="nx">winner</span></font><span class="p">(</span><font class="badlink"><span class="nx">ROCK</span></font><span class="p">,</span> <font class="badlink"><span class="nx">ROCK</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">DRAW</span></font><span class="p">);</span>
<span class="mi">12</span>    
<span class="mi">13</span>    <a href="ref-programs-compute.html#%28reach._%28%28forall%29%29%29" class="k" data-pltdoc="x">forall</a><span class="p">(</span><a href="ref-programs-compute.html#%28reach._%28%28.U.Int%29%29%29" class="nb" data-pltdoc="x">UInt</a><span class="p">,</span> <font class="badlink"><span class="nx">handA</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a>
<span class="mi">14</span>      <a href="ref-programs-compute.html#%28reach._%28%28forall%29%29%29" class="k" data-pltdoc="x">forall</a><span class="p">(</span><a href="ref-programs-compute.html#%28reach._%28%28.U.Int%29%29%29" class="nb" data-pltdoc="x">UInt</a><span class="p">,</span> <font class="badlink"><span class="nx">handB</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a>
<span class="mi">15</span>        <a href="ref-programs-compute.html#%28reach._%28%28assert%29%29%29" class="k" data-pltdoc="x">assert</a><span class="p">(</span><font class="badlink"><span class="nx">isOutcome</span></font><span class="p">(</span><font class="badlink"><span class="nx">winner</span></font><span class="p">(</span><font class="badlink"><span class="nx">handA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">handB</span></font><span class="p">)))));</span>
<span class="mi">16</span>    
<span class="mi">17</span>    <a href="ref-programs-compute.html#%28reach._%28%28forall%29%29%29" class="k" data-pltdoc="x">forall</a><span class="p">(</span><a href="ref-programs-compute.html#%28reach._%28%28.U.Int%29%29%29" class="nb" data-pltdoc="x">UInt</a><span class="p">,</span> <span class="p">(</span><font class="badlink"><span class="nx">hand</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a>
<span class="mi">18</span>      <a href="ref-programs-compute.html#%28reach._%28%28assert%29%29%29" class="k" data-pltdoc="x">assert</a><span class="p">(</span><font class="badlink"><span class="nx">winner</span></font><span class="p">(</span><font class="badlink"><span class="nx">hand</span></font><span class="p">,</span> <font class="badlink"><span class="nx">hand</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">DRAW</span></font><span class="p">));</span>
<span class="mi">19</span>    
<span class="mi">20</span>    <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">Player</span></font> <font class="badlink"><span class="o">=</span></font>
<span class="mi">21</span>          <span class="p">{</span> <span class="p">...</span><a href="ref-programs-compute.html#%28reach._%28%28has.Random%29%29%29" class="nb" data-pltdoc="x">hasRandom</a><span class="p">,</span>
<span class="mi">22</span>            <font class="badlink"><span class="nx">getHand</span></font><font class="badlink"><span class="o">:</span></font> <a href="ref-programs-compute.html#%28reach._%28%28.Fun%29%29%29" class="nb" data-pltdoc="x">Fun</a><span class="p">([],</span> <a href="ref-programs-compute.html#%28reach._%28%28.U.Int%29%29%29" class="nb" data-pltdoc="x">UInt</a><span class="p">),</span>
<span class="mi">23</span>            <font class="badlink"><span class="nx">seeOutcome</span></font><font class="badlink"><span class="o">:</span></font> <a href="ref-programs-compute.html#%28reach._%28%28.Fun%29%29%29" class="nb" data-pltdoc="x">Fun</a><span class="p">([</span><a href="ref-programs-compute.html#%28reach._%28%28.U.Int%29%29%29" class="nb" data-pltdoc="x">UInt</a><span class="p">],</span> <a href="ref-programs-compute.html#%28reach._%28%28.Null%29%29%29" class="nb" data-pltdoc="x">Null</a><span class="p">),</span>
<span class="mi">24</span>            <font class="badlink"><span class="nx">informTimeout</span></font><font class="badlink"><span class="o">:</span></font> <a href="ref-programs-compute.html#%28reach._%28%28.Fun%29%29%29" class="nb" data-pltdoc="x">Fun</a><span class="p">([],</span> <a href="ref-programs-compute.html#%28reach._%28%28.Null%29%29%29" class="nb" data-pltdoc="x">Null</a><span class="p">)</span> <span class="p">};</span>
<span class="mi">25</span>    <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">Alice</span></font> <font class="badlink"><span class="o">=</span></font>
<span class="mi">26</span>          <span class="p">{</span> <span class="p">...</span><font class="badlink"><span class="nx">Player</span></font><span class="p">,</span>
<span class="mi">27</span>            <font class="badlink"><span class="nx">wager</span></font><font class="badlink"><span class="o">:</span></font> <a href="ref-programs-compute.html#%28reach._%28%28.U.Int%29%29%29" class="nb" data-pltdoc="x">UInt</a> <span class="p">};</span>
<span class="mi">28</span>    <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">Bob</span></font> <font class="badlink"><span class="o">=</span></font>
<span class="mi">29</span>          <span class="p">{</span> <span class="p">...</span><font class="badlink"><span class="nx">Player</span></font><span class="p">,</span>
<span class="mi">30</span>            <font class="badlink"><span class="nx">acceptWager</span></font><font class="badlink"><span class="o">:</span></font> <a href="ref-programs-compute.html#%28reach._%28%28.Fun%29%29%29" class="nb" data-pltdoc="x">Fun</a><span class="p">([</span><a href="ref-programs-compute.html#%28reach._%28%28.U.Int%29%29%29" class="nb" data-pltdoc="x">UInt</a><span class="p">],</span> <a href="ref-programs-compute.html#%28reach._%28%28.Null%29%29%29" class="nb" data-pltdoc="x">Null</a><span class="p">)</span> <span class="p">};</span>
<span class="mi">31</span>    
<span class="mi">32</span>    <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">DEADLINE</span></font> <font class="badlink"><span class="o">=</span></font> <span class="mi">100</span><span class="p">;</span>
<span class="mi">33</span>    <a href="ref-programs-module.html#%28reach._%28%28export%29%29%29" class="kd" data-pltdoc="x">export</a> <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">main</span></font> <font class="badlink"><span class="o">=</span></font>
<span class="mi">34</span>      <a href="ref-programs-module.html#%28reach._%28%28.Reach%29%29%29" class="nb" data-pltdoc="x">Reach</a><span class="p">.</span><a href="ref-programs-module.html#%28reach._%28%28.App%29%29%29" class="nb" data-pltdoc="x">App</a><span class="p">(</span>
<span class="mi">35</span>        <span class="p">{},</span>
<span class="mi">36</span>        <span class="p">[</span><a href="ref-programs-appinit.html#%28reach._%28%28.Participant%29%29%29" class="nb" data-pltdoc="x">Participant</a><span class="p">(</span><span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">Alice</span></font><span class="p">),</span> <a href="ref-programs-appinit.html#%28reach._%28%28.Participant%29%29%29" class="nb" data-pltdoc="x">Participant</a><span class="p">(</span><span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">Bob</span></font><span class="p">)],</span>
<span class="mi">37</span>        <span class="p">(</span><font class="badlink"><span class="nx">A</span></font><span class="p">,</span> <font class="badlink"><span class="nx">B</span></font><span class="p">)</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">38</span>          <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">informTimeout</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">39</span>            <a href="ref-programs-step.html#%28reach._%28%28each%29%29%29" class="k" data-pltdoc="x">each</a><span class="p">([</span><font class="badlink"><span class="nx">A</span></font><span class="p">,</span> <font class="badlink"><span class="nx">B</span></font><span class="p">],</span> <span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">40</span>              <a href="ref-programs-local.html#%28reach._%28%28interact%29%29%29" class="k" data-pltdoc="x">interact</a><span class="p">.</span><font class="badlink"><span class="nx">informTimeout</span></font><span class="p">();</span> <span class="p">});</span> <span class="p">};</span>
<span class="mi">41</span>    
<span class="mi">42</span>          <font class="badlink"><span class="nx">A</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28only%29%29%29" class="k" data-pltdoc="x">only</a><span class="p">(()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">43</span>            <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">wager</span></font> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-local.html#%28reach._%28%28declassify%29%29%29" class="k" data-pltdoc="x">declassify</a><span class="p">(</span><a href="ref-programs-local.html#%28reach._%28%28interact%29%29%29" class="k" data-pltdoc="x">interact</a><span class="p">.</span><font class="badlink"><span class="nx">wager</span></font><span class="p">);</span> <span class="p">});</span>
<span class="mi">44</span>          <font class="badlink"><span class="nx">A</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28publish%29%29%29" class="k" data-pltdoc="x">publish</a><span class="p">(</span><font class="badlink"><span class="nx">wager</span></font><span class="p">)</span>
<span class="mi">45</span>            <span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28pay%29%29%29" class="k" data-pltdoc="x">pay</a><span class="p">(</span><font class="badlink"><span class="nx">wager</span></font><span class="p">);</span>
<span class="mi">46</span>          <a href="ref-programs-consensus.html#%28reach._%28%28commit%29%29%29" class="k" data-pltdoc="x">commit</a><span class="p">();</span>
<span class="mi">47</span>    
<span class="mi">48</span>          <font class="badlink"><span class="nx">B</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28only%29%29%29" class="k" data-pltdoc="x">only</a><span class="p">(()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">49</span>            <a href="ref-programs-local.html#%28reach._%28%28interact%29%29%29" class="k" data-pltdoc="x">interact</a><span class="p">.</span><font class="badlink"><span class="nx">acceptWager</span></font><span class="p">(</span><font class="badlink"><span class="nx">wager</span></font><span class="p">);</span> <span class="p">});</span>
<span class="mi">50</span>          <font class="badlink"><span class="nx">B</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28pay%29%29%29" class="k" data-pltdoc="x">pay</a><span class="p">(</span><font class="badlink"><span class="nx">wager</span></font><span class="p">)</span>
<span class="mi">51</span>            <span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28timeout%29%29%29" class="k" data-pltdoc="x">timeout</a><span class="p">(</span><font class="badlink"><span class="nx">DEADLINE</span></font><span class="p">,</span> <span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <a href="ref-programs-step.html#%28reach._%28%28close.To%29%29%29" class="nb" data-pltdoc="x">closeTo</a><span class="p">(</span><font class="badlink"><span class="nx">A</span></font><span class="p">,</span> <font class="badlink"><span class="nx">informTimeout</span></font><span class="p">));</span>
<span class="mi">52</span>    
<span class="mi">53</span>          <a href="ref-programs-consensus.html#%28reach._%28%28var%29%29%29" class="kd" data-pltdoc="x">var</a> <font class="badlink"><span class="nx">outcome</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">DRAW</span></font><span class="p">;</span>
<span class="mi">54</span>          <a href="ref-programs-consensus.html#%28reach._%28%28invariant%29%29%29" class="k" data-pltdoc="x">invariant</a><span class="p">(</span><a href="ref-programs-compute.html#%28reach._%28%28balance%29%29%29" class="nb" data-pltdoc="x">balance</a><span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <span class="mi">2</span> <a href="ref-programs-compute.html#%28reach._%28%28%2A%29%29%29" class="o" data-pltdoc="x">*</a> <font class="badlink"><span class="nx">wager</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~26._~26%29%29%29" class="o" data-pltdoc="x">&amp;&amp;</a> <font class="badlink"><span class="nx">isOutcome</span></font><span class="p">(</span><font class="badlink"><span class="nx">outcome</span></font><span class="p">)</span> <span class="p">);</span>
<span class="mi">55</span>          <a href="ref-programs-consensus.html#%28reach._%28%28while%29%29%29" class="k" data-pltdoc="x">while</a> <span class="p">(</span> <font class="badlink"><span class="nx">outcome</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">DRAW</span></font> <span class="p">)</span> <span class="p">{</span>
<span class="mi">56</span>            <a href="ref-programs-consensus.html#%28reach._%28%28commit%29%29%29" class="k" data-pltdoc="x">commit</a><span class="p">();</span>
<span class="mi">57</span>    
<span class="mi">58</span>            <font class="badlink"><span class="nx">A</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28only%29%29%29" class="k" data-pltdoc="x">only</a><span class="p">(()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">59</span>              <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">_handA</span></font> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-local.html#%28reach._%28%28interact%29%29%29" class="k" data-pltdoc="x">interact</a><span class="p">.</span><font class="badlink"><span class="nx">getHand</span></font><span class="p">();</span>
<span class="mi">60</span>              <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <span class="p">[</span><font class="badlink"><span class="nx">_commitA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">_saltA</span></font><span class="p">]</span> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-local.html#%28reach._%28%28make.Commitment%29%29%29" class="nb" data-pltdoc="x">makeCommitment</a><span class="p">(</span><a href="ref-programs-local.html#%28reach._%28%28interact%29%29%29" class="k" data-pltdoc="x">interact</a><span class="p">,</span> <font class="badlink"><span class="nx">_handA</span></font><span class="p">);</span>
<span class="mi">61</span>              <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">commitA</span></font> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-local.html#%28reach._%28%28declassify%29%29%29" class="k" data-pltdoc="x">declassify</a><span class="p">(</span><font class="badlink"><span class="nx">_commitA</span></font><span class="p">);</span> <span class="p">});</span>
<span class="mi">62</span>            <font class="badlink"><span class="nx">A</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28publish%29%29%29" class="k" data-pltdoc="x">publish</a><span class="p">(</span><font class="badlink"><span class="nx">commitA</span></font><span class="p">)</span>
<span class="mi">63</span>              <span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28timeout%29%29%29" class="k" data-pltdoc="x">timeout</a><span class="p">(</span><font class="badlink"><span class="nx">DEADLINE</span></font><span class="p">,</span> <span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <a href="ref-programs-step.html#%28reach._%28%28close.To%29%29%29" class="nb" data-pltdoc="x">closeTo</a><span class="p">(</span><font class="badlink"><span class="nx">B</span></font><span class="p">,</span> <font class="badlink"><span class="nx">informTimeout</span></font><span class="p">));</span>
<span class="mi">64</span>            <a href="ref-programs-consensus.html#%28reach._%28%28commit%29%29%29" class="k" data-pltdoc="x">commit</a><span class="p">();</span>
<span class="mi">65</span>    
<span class="mi">66</span>            <a href="ref-programs-step.html#%28reach._%28%28unknowable%29%29%29" class="k" data-pltdoc="x">unknowable</a><span class="p">(</span><font class="badlink"><span class="nx">B</span></font><span class="p">,</span> <font class="badlink"><span class="nx">A</span></font><span class="p">(</span><font class="badlink"><span class="nx">_handA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">_saltA</span></font><span class="p">));</span>
<span class="mi">67</span>            <font class="badlink"><span class="nx">B</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28only%29%29%29" class="k" data-pltdoc="x">only</a><span class="p">(()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">68</span>              <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <font class="badlink"><span class="nx">handB</span></font> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-local.html#%28reach._%28%28declassify%29%29%29" class="k" data-pltdoc="x">declassify</a><span class="p">(</span><a href="ref-programs-local.html#%28reach._%28%28interact%29%29%29" class="k" data-pltdoc="x">interact</a><span class="p">.</span><font class="badlink"><span class="nx">getHand</span></font><span class="p">());</span> <span class="p">});</span>
<span class="mi">69</span>            <font class="badlink"><span class="nx">B</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28publish%29%29%29" class="k" data-pltdoc="x">publish</a><span class="p">(</span><font class="badlink"><span class="nx">handB</span></font><span class="p">)</span>
<span class="mi">70</span>              <span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28timeout%29%29%29" class="k" data-pltdoc="x">timeout</a><span class="p">(</span><font class="badlink"><span class="nx">DEADLINE</span></font><span class="p">,</span> <span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <a href="ref-programs-step.html#%28reach._%28%28close.To%29%29%29" class="nb" data-pltdoc="x">closeTo</a><span class="p">(</span><font class="badlink"><span class="nx">A</span></font><span class="p">,</span> <font class="badlink"><span class="nx">informTimeout</span></font><span class="p">));</span>
<span class="mi">71</span>            <a href="ref-programs-consensus.html#%28reach._%28%28commit%29%29%29" class="k" data-pltdoc="x">commit</a><span class="p">();</span>
<span class="mi">72</span>    
<span class="mi">73</span>            <font class="badlink"><span class="nx">A</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28only%29%29%29" class="k" data-pltdoc="x">only</a><span class="p">(()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">74</span>              <a href="ref-programs-compute.html#%28reach._%28%28const%29%29%29" class="kd" data-pltdoc="x">const</a> <span class="p">[</span><font class="badlink"><span class="nx">saltA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">handA</span></font><span class="p">]</span> <font class="badlink"><span class="o">=</span></font> <a href="ref-programs-local.html#%28reach._%28%28declassify%29%29%29" class="k" data-pltdoc="x">declassify</a><span class="p">([</span><font class="badlink"><span class="nx">_saltA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">_handA</span></font><span class="p">]);</span> <span class="p">});</span>
<span class="mi">75</span>            <font class="badlink"><span class="nx">A</span></font><span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28publish%29%29%29" class="k" data-pltdoc="x">publish</a><span class="p">(</span><font class="badlink"><span class="nx">saltA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">handA</span></font><span class="p">)</span>
<span class="mi">76</span>              <span class="p">.</span><a href="ref-programs-step.html#%28reach._%28%28timeout%29%29%29" class="k" data-pltdoc="x">timeout</a><span class="p">(</span><font class="badlink"><span class="nx">DEADLINE</span></font><span class="p">,</span> <span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <a href="ref-programs-step.html#%28reach._%28%28close.To%29%29%29" class="nb" data-pltdoc="x">closeTo</a><span class="p">(</span><font class="badlink"><span class="nx">B</span></font><span class="p">,</span> <font class="badlink"><span class="nx">informTimeout</span></font><span class="p">));</span>
<span class="mi">77</span>            <a href="ref-programs-consensus.html#%28reach._%28%28check.Commitment%29%29%29" class="nb" data-pltdoc="x">checkCommitment</a><span class="p">(</span><font class="badlink"><span class="nx">commitA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">saltA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">handA</span></font><span class="p">);</span>
<span class="mi">78</span>    
<span class="mi">79</span>            <font class="badlink"><span class="nx">outcome</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">winner</span></font><span class="p">(</span><font class="badlink"><span class="nx">handA</span></font><span class="p">,</span> <font class="badlink"><span class="nx">handB</span></font><span class="p">);</span>
<span class="mi">80</span>            <a href="ref-programs-consensus.html#%28reach._%28%28continue%29%29%29" class="k" data-pltdoc="x">continue</a><span class="p">;</span> <span class="p">}</span>
<span class="mi">81</span>    
<span class="mi">82</span>          <a href="ref-programs-compute.html#%28reach._%28%28assert%29%29%29" class="k" data-pltdoc="x">assert</a><span class="p">(</span><font class="badlink"><span class="nx">outcome</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">A_WINS</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~7c~7c%29%29%29" class="o" data-pltdoc="x">||</a> <font class="badlink"><span class="nx">outcome</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">B_WINS</span></font><span class="p">);</span>
<span class="mi">83</span>          <a href="ref-programs-consensus.html#%28reach._%28%28transfer%29%29%29" class="k" data-pltdoc="x">transfer</a><span class="p">(</span><span class="mi">2</span> <a href="ref-programs-compute.html#%28reach._%28%28%2A%29%29%29" class="o" data-pltdoc="x">*</a> <font class="badlink"><span class="nx">wager</span></font><span class="p">).</span><font class="badlink"><span class="nx">to</span></font><span class="p">(</span><font class="badlink"><span class="nx">outcome</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~3d~3d%29%29%29" class="o" data-pltdoc="x">==</a> <font class="badlink"><span class="nx">A_WINS</span></font> <a href="ref-programs-compute.html#%28reach._%28%28~3f%29%29%29" class="o" data-pltdoc="x">?</a> <font class="badlink"><span class="nx">A</span></font> <font class="badlink"><span class="o">:</span></font> <font class="badlink"><span class="nx">B</span></font><span class="p">);</span>
<span class="mi">84</span>          <a href="ref-programs-consensus.html#%28reach._%28%28commit%29%29%29" class="k" data-pltdoc="x">commit</a><span class="p">();</span>
<span class="mi">85</span>    
<span class="mi">86</span>          <a href="ref-programs-step.html#%28reach._%28%28each%29%29%29" class="k" data-pltdoc="x">each</a><span class="p">([</span><font class="badlink"><span class="nx">A</span></font><span class="p">,</span> <font class="badlink"><span class="nx">B</span></font><span class="p">],</span> <span class="p">()</span> <a href="ref-programs-compute.html#%28reach._%28%28~3d._~3e%29%29%29" class="o" data-pltdoc="x">=&gt;</a> <span class="p">{</span>
<span class="mi">87</span>            <a href="ref-programs-local.html#%28reach._%28%28interact%29%29%29" class="k" data-pltdoc="x">interact</a><span class="p">.</span><font class="badlink"><span class="nx">seeOutcome</span></font><span class="p">(</span><font class="badlink"><span class="nx">outcome</span></font><span class="p">);</span> <span class="p">});</span>
<span class="mi">88</span>          <a href="ref-programs-step.html#%28reach._%28%28exit%29%29%29" class="k" data-pltdoc="x">exit</a><span class="p">();</span> <span class="p">});</span>
</pre></div></div></p><p>Next, the JavaScript command-line frontend:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-8/index.mjs"><span class="stt">tut-8/index.mjs</span></a><button class="btn" data-clipboard-text="import { loadStdlib } from '@reach-sh/stdlib';
import * as backend from './build/index.main.mjs';
import { ask, yesno, done } from '@reach-sh/stdlib/ask.mjs';

(async () =&gt; {
  const stdlib = await loadStdlib();

  const isAlice = await ask(
    `Are you Alice?`,
    yesno
  );
  const who = isAlice ? 'Alice' : 'Bob';

  console.log(`Starting Rock, Paper, Scissors! as ${who}`);

  let acc = null;
  const createAcc = await ask(
    `Would you like to create an account? (only possible on devnet)`,
    yesno
  );
  if (createAcc) {
    acc = await stdlib.newTestAccount(stdlib.parseCurrency(1000));
  } else {
    const secret = await ask(
      `What is your account secret?`,
      (x =&gt; x)
    );
    acc = await stdlib.newAccountFromSecret(secret);
  }

  let ctc = null;
  const deployCtc = await ask(
    `Do you want to deploy the contract? (y/n)`,
    yesno
  );
  if (deployCtc) {
    ctc = acc.deploy(backend);
    const info = await ctc.getInfo();
    console.log(`The contract is deployed as = ${JSON.stringify(info)}`);
  } else {
    const info = await ask(
      `Please paste the contract information:`,
      JSON.parse
    );
    ctc = acc.attach(backend, info);
  }

  const fmt = (x) =&gt; stdlib.formatCurrency(x, 4);
  const getBalance = async () =&gt; fmt(await stdlib.balanceOf(acc));

  const before = await getBalance();
  console.log(`Your balance is ${before}`);

  const interact = { ...stdlib.hasRandom };

  interact.informTimeout = () =&gt; {
    console.log(`There was a timeout.`);
    process.exit(1);
  };

  if (isAlice) {
    const amt = await ask(
      `How much do you want to wager?`,
      stdlib.parseCurrency
    );
    interact.wager = amt;
  } else {
    interact.acceptWager = async (amt) =&gt; {
      const accepted = await ask(
        `Do you accept the wager of ${fmt(amt)}?`,
        yesno
      );
      if (accepted) {
        return;
      } else {
        process.exit(0);
      }
    };
  }

  const HAND = ['Rock', 'Paper', 'Scissors'];
  const HANDS = {
    'Rock': 0, 'R': 0, 'r': 0,
    'Paper': 1, 'P': 1, 'p': 1,
    'Scissors': 2, 'S': 2, 's': 2,
  };
  interact.getHand = async () =&gt; {
    const hand = await ask(`What hand will you play?`, (x) =&gt; {
      const hand = HANDS[x];
      if ( hand == null ) {
        throw Error(`Not a valid hand ${hand}`);
      }
      return hand;
    });
    console.log(`You played ${HAND[hand]}`);
    return hand;
  };

  const OUTCOME = ['Bob wins', 'Draw', 'Alice wins'];
  interact.seeOutcome = async (outcome) =&gt; {
    console.log(`The outcome is: ${OUTCOME[outcome]}`);
  };

  const part = isAlice ? backend.Alice : backend.Bob;
  await part(ctc, interact);

  const after = await getBalance();
  console.log(`Your balance is now ${after}`);

  done();
})();"><img class="clippy" width="13" src="clippy.svg" alt="Copy to clipboard"> </img></button>&nbsp;</p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mf">1</span>    <font class="badlink"><span class="k">import</span></font> <span class="p">{</span> <a href="ref-frontends-js-loader_mjs.html#%28javascript._%28%28load.Stdlib%29%29%29" class="nx" data-pltdoc="x">loadStdlib</a> <span class="p">}</span> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;@reach-sh/stdlib&#39;</span><span class="p">;</span>
 <span class="mf">2</span>    <font class="badlink"><span class="k">import</span></font> <font class="badlink"><span class="o">*</span></font> <font class="badlink"><span class="k">as</span></font> <a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;./build/index.main.mjs&#39;</span><span class="p">;</span>
 <span class="mf">3</span>    <font class="badlink"><span class="k">import</span></font> <span class="p">{</span> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">,</span> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28yesno%29%29%29" class="nx" data-pltdoc="x">yesno</a><span class="p">,</span> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28done%29%29%29" class="nx" data-pltdoc="x">done</a> <span class="p">}</span> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;@reach-sh/stdlib/ask.mjs&#39;</span><span class="p">;</span>
 <span class="mf">4</span>    
 <span class="mf">5</span>    <span class="p">(</span><font class="badlink"><span class="k">async</span></font> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
 <span class="mf">6</span>      <font class="badlink"><span class="kd">const</span></font> <a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-loader_mjs.html#%28javascript._%28%28load.Stdlib%29%29%29" class="nx" data-pltdoc="x">loadStdlib</a><span class="p">();</span>
 <span class="mf">7</span>    
 <span class="mf">8</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">isAlice</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span>
 <span class="mf">9</span>        <span class="sb">`Are you Alice?`</span><span class="p">,</span>
<span class="mf">10</span>        <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28yesno%29%29%29" class="nx" data-pltdoc="x">yesno</a>
<span class="mf">11</span>      <span class="p">);</span>
<span class="mf">12</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">who</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">isAlice</span></font> <font class="badlink"><span class="o">?</span></font> <span class="s1">&#39;Alice&#39;</span> <font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Bob&#39;</span><span class="p">;</span>
<span class="mf">13</span>    
<span class="mf">14</span>      <font class="badlink"><span class="nx">console</span></font><span class="p">.</span><font class="badlink"><span class="nx">log</span></font><span class="p">(</span><span class="sb">`Starting Rock, Paper, Scissors! as </span><span class="si">${</span><font class="badlink"><span class="nx">who</span></font><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mf">15</span>    
<span class="mf">16</span>      <font class="badlink"><span class="kd">let</span></font> <font class="badlink"><span class="nx">acc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="kc">null</span></font><span class="p">;</span>
<span class="mf">17</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">createAcc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span>
<span class="mf">18</span>        <span class="sb">`Would you like to create an account? (only possible on devnet)`</span><span class="p">,</span>
<span class="mf">19</span>        <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28yesno%29%29%29" class="nx" data-pltdoc="x">yesno</a>
<span class="mf">20</span>      <span class="p">);</span>
<span class="mf">21</span>      <font class="badlink"><span class="k">if</span></font> <span class="p">(</span><font class="badlink"><span class="nx">createAcc</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">22</span>        <font class="badlink"><span class="nx">acc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-frontends-js-acc.html#%28javascript._%28%28new.Test.Account%29%29%29" class="nx" data-pltdoc="x">newTestAccount</a><span class="p">(</span><a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28parse.Currency%29%29%29" class="nx" data-pltdoc="x">parseCurrency</a><span class="p">(</span><span class="mf">1000</span><span class="p">));</span>
<span class="mf">23</span>      <span class="p">}</span> <font class="badlink"><span class="k">else</span></font> <span class="p">{</span>
<span class="mf">24</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">secret</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span>
<span class="mf">25</span>          <span class="sb">`What is your account secret?`</span><span class="p">,</span>
<span class="mf">26</span>          <span class="p">(</span><font class="badlink"><span class="nx">x</span></font> <span class="p">=&gt;</span> <font class="badlink"><span class="nx">x</span></font><span class="p">)</span>
<span class="mf">27</span>        <span class="p">);</span>
<span class="mf">28</span>        <font class="badlink"><span class="nx">acc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-frontends-js-acc.html#%28javascript._%28%28new.Account.From.Secret%29%29%29" class="nx" data-pltdoc="x">newAccountFromSecret</a><span class="p">(</span><font class="badlink"><span class="nx">secret</span></font><span class="p">);</span>
<span class="mf">29</span>      <span class="p">}</span>
<span class="mf">30</span>    
<span class="mf">31</span>      <font class="badlink"><span class="kd">let</span></font> <font class="badlink"><span class="nx">ctc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="kc">null</span></font><span class="p">;</span>
<span class="mf">32</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">deployCtc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span>
<span class="mf">33</span>        <span class="sb">`Do you want to deploy the contract? (y/n)`</span><span class="p">,</span>
<span class="mf">34</span>        <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28yesno%29%29%29" class="nx" data-pltdoc="x">yesno</a>
<span class="mf">35</span>      <span class="p">);</span>
<span class="mf">36</span>      <font class="badlink"><span class="k">if</span></font> <span class="p">(</span><font class="badlink"><span class="nx">deployCtc</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">37</span>        <font class="badlink"><span class="nx">ctc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">acc</span></font><span class="p">.</span><a href="ref-frontends-js-ctc.html#%28javascript._%28%28deploy%29%29%29" class="nx" data-pltdoc="x">deploy</a><span class="p">(</span><a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">);</span>
<span class="mf">38</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">info</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">ctc</span></font><span class="p">.</span><a href="ref-frontends-js-ctc.html#%28javascript._%28%28get.Info%29%29%29" class="nx" data-pltdoc="x">getInfo</a><span class="p">();</span>
<span class="mf">39</span>        <font class="badlink"><span class="nx">console</span></font><span class="p">.</span><font class="badlink"><span class="nx">log</span></font><span class="p">(</span><span class="sb">`The contract is deployed as = </span><span class="si">${</span><font class="badlink"><span class="nx">JSON</span></font><span class="p">.</span><font class="badlink"><span class="nx">stringify</span></font><span class="p">(</span><font class="badlink"><span class="nx">info</span></font><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mf">40</span>      <span class="p">}</span> <font class="badlink"><span class="k">else</span></font> <span class="p">{</span>
<span class="mf">41</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">info</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span>
<span class="mf">42</span>          <span class="sb">`Please paste the contract information:`</span><span class="p">,</span>
<span class="mf">43</span>          <font class="badlink"><span class="nx">JSON</span></font><span class="p">.</span><font class="badlink"><span class="nx">parse</span></font>
<span class="mf">44</span>        <span class="p">);</span>
<span class="mf">45</span>        <font class="badlink"><span class="nx">ctc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">acc</span></font><span class="p">.</span><a href="ref-frontends-js-ctc.html#%28javascript._%28%28attach%29%29%29" class="nx" data-pltdoc="x">attach</a><span class="p">(</span><a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">,</span> <font class="badlink"><span class="nx">info</span></font><span class="p">);</span>
<span class="mf">46</span>      <span class="p">}</span>
<span class="mf">47</span>    
<span class="mf">48</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">fmt</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">(</span><font class="badlink"><span class="nx">x</span></font><span class="p">)</span> <span class="p">=&gt;</span> <a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28format.Currency%29%29%29" class="nx" data-pltdoc="x">formatCurrency</a><span class="p">(</span><font class="badlink"><span class="nx">x</span></font><span class="p">,</span> <span class="mf">4</span><span class="p">);</span>
<span class="mf">49</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">getBalance</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">async</span></font> <span class="p">()</span> <span class="p">=&gt;</span> <font class="badlink"><span class="nx">fmt</span></font><span class="p">(</span><font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-frontends-js-acc.html#%28javascript._%28%28balance.Of%29%29%29" class="nx" data-pltdoc="x">balanceOf</a><span class="p">(</span><font class="badlink"><span class="nx">acc</span></font><span class="p">));</span>
<span class="mf">50</span>    
<span class="mf">51</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">before</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">getBalance</span></font><span class="p">();</span>
<span class="mf">52</span>      <font class="badlink"><span class="nx">console</span></font><span class="p">.</span><font class="badlink"><span class="nx">log</span></font><span class="p">(</span><span class="sb">`Your balance is </span><span class="si">${</span><font class="badlink"><span class="nx">before</span></font><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mf">53</span>    
<span class="mf">54</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">interact</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">{</span> <span class="p">...</span><a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><font class="badlink"><span class="nx">hasRandom</span></font> <span class="p">};</span>
<span class="mf">55</span>    
<span class="mf">56</span>      <font class="badlink"><span class="nx">interact</span></font><span class="p">.</span><font class="badlink"><span class="nx">informTimeout</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mf">57</span>        <font class="badlink"><span class="nx">console</span></font><span class="p">.</span><font class="badlink"><span class="nx">log</span></font><span class="p">(</span><span class="sb">`There was a timeout.`</span><span class="p">);</span>
<span class="mf">58</span>        <font class="badlink"><span class="nx">process</span></font><span class="p">.</span><font class="badlink"><span class="nx">exit</span></font><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<span class="mf">59</span>      <span class="p">};</span>
<span class="mf">60</span>    
<span class="mf">61</span>      <font class="badlink"><span class="k">if</span></font> <span class="p">(</span><font class="badlink"><span class="nx">isAlice</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">62</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">amt</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span>
<span class="mf">63</span>          <span class="sb">`How much do you want to wager?`</span><span class="p">,</span>
<span class="mf">64</span>          <a href="ref-frontends-js.html#%28javascript._%28%28stdlib%29%29%29" class="nx" data-pltdoc="x">stdlib</a><span class="p">.</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28parse.Currency%29%29%29" class="nx" data-pltdoc="x">parseCurrency</a>
<span class="mf">65</span>        <span class="p">);</span>
<span class="mf">66</span>        <font class="badlink"><span class="nx">interact</span></font><span class="p">.</span><font class="badlink"><span class="nx">wager</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">amt</span></font><span class="p">;</span>
<span class="mf">67</span>      <span class="p">}</span> <font class="badlink"><span class="k">else</span></font> <span class="p">{</span>
<span class="mf">68</span>        <font class="badlink"><span class="nx">interact</span></font><span class="p">.</span><font class="badlink"><span class="nx">acceptWager</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">async</span></font> <span class="p">(</span><font class="badlink"><span class="nx">amt</span></font><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mf">69</span>          <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">accepted</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span>
<span class="mf">70</span>            <span class="sb">`Do you accept the wager of </span><span class="si">${</span><font class="badlink"><span class="nx">fmt</span></font><span class="p">(</span><font class="badlink"><span class="nx">amt</span></font><span class="p">)</span><span class="si">}</span><span class="sb">?`</span><span class="p">,</span>
<span class="mf">71</span>            <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28yesno%29%29%29" class="nx" data-pltdoc="x">yesno</a>
<span class="mf">72</span>          <span class="p">);</span>
<span class="mf">73</span>          <font class="badlink"><span class="k">if</span></font> <span class="p">(</span><font class="badlink"><span class="nx">accepted</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">74</span>            <font class="badlink"><span class="k">return</span></font><span class="p">;</span>
<span class="mf">75</span>          <span class="p">}</span> <font class="badlink"><span class="k">else</span></font> <span class="p">{</span>
<span class="mf">76</span>            <font class="badlink"><span class="nx">process</span></font><span class="p">.</span><font class="badlink"><span class="nx">exit</span></font><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="mf">77</span>          <span class="p">}</span>
<span class="mf">78</span>        <span class="p">};</span>
<span class="mf">79</span>      <span class="p">}</span>
<span class="mf">80</span>    
<span class="mf">81</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">HAND</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">[</span><span class="s1">&#39;Rock&#39;</span><span class="p">,</span> <span class="s1">&#39;Paper&#39;</span><span class="p">,</span> <span class="s1">&#39;Scissors&#39;</span><span class="p">];</span>
<span class="mf">82</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">HANDS</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">{</span>
<span class="mf">83</span>        <span class="s1">&#39;Rock&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">0</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">0</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">0</span><span class="p">,</span>
<span class="mf">84</span>        <span class="s1">&#39;Paper&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">1</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">1</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">1</span><span class="p">,</span>
<span class="mf">85</span>        <span class="s1">&#39;Scissors&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">2</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">2</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">2</span><span class="p">,</span>
<span class="mf">86</span>      <span class="p">};</span>
<span class="mf">87</span>      <font class="badlink"><span class="nx">interact</span></font><span class="p">.</span><font class="badlink"><span class="nx">getHand</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">async</span></font> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mf">88</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">hand</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28ask%29%29%29" class="nx" data-pltdoc="x">ask</a><span class="p">(</span><span class="sb">`What hand will you play?`</span><span class="p">,</span> <span class="p">(</span><font class="badlink"><span class="nx">x</span></font><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mf">89</span>          <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">hand</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">HANDS</span></font><span class="p">[</span><font class="badlink"><span class="nx">x</span></font><span class="p">];</span>
<span class="mf">90</span>          <font class="badlink"><span class="k">if</span></font> <span class="p">(</span> <font class="badlink"><span class="nx">hand</span></font> <font class="badlink"><span class="o">==</span></font> <font class="badlink"><span class="kc">null</span></font> <span class="p">)</span> <span class="p">{</span>
<span class="mf">91</span>            <font class="badlink"><span class="k">throw</span></font> <font class="badlink"><span class="nb">Error</span></font><span class="p">(</span><span class="sb">`Not a valid hand </span><span class="si">${</span><font class="badlink"><span class="nx">hand</span></font><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mf">92</span>          <span class="p">}</span>
<span class="mf">93</span>          <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="nx">hand</span></font><span class="p">;</span>
<span class="mf">94</span>        <span class="p">});</span>
<span class="mf">95</span>        <font class="badlink"><span class="nx">console</span></font><span class="p">.</span><font class="badlink"><span class="nx">log</span></font><span class="p">(</span><span class="sb">`You played </span><span class="si">${</span><font class="badlink"><span class="nx">HAND</span></font><span class="p">[</span><font class="badlink"><span class="nx">hand</span></font><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mf">96</span>        <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="nx">hand</span></font><span class="p">;</span>
<span class="mf">97</span>      <span class="p">};</span>
<span class="mf">98</span>    
<span class="mf">99</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">OUTCOME</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">[</span><span class="s1">&#39;Bob wins&#39;</span><span class="p">,</span> <span class="s1">&#39;Draw&#39;</span><span class="p">,</span> <span class="s1">&#39;Alice wins&#39;</span><span class="p">];</span>
<span class="mf">100</span>      <font class="badlink"><span class="nx">interact</span></font><span class="p">.</span><font class="badlink"><span class="nx">seeOutcome</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">async</span></font> <span class="p">(</span><font class="badlink"><span class="nx">outcome</span></font><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mf">101</span>        <font class="badlink"><span class="nx">console</span></font><span class="p">.</span><font class="badlink"><span class="nx">log</span></font><span class="p">(</span><span class="sb">`The outcome is: </span><span class="si">${</span><font class="badlink"><span class="nx">OUTCOME</span></font><span class="p">[</span><font class="badlink"><span class="nx">outcome</span></font><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mf">102</span>      <span class="p">};</span>
<span class="mf">103</span>    
<span class="mf">104</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">part</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">isAlice</span></font> <font class="badlink"><span class="o">?</span></font> <a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">.</span><font class="badlink"><span class="nx">Alice</span></font> <font class="badlink"><span class="o">:</span></font> <a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">.</span><font class="badlink"><span class="nx">Bob</span></font><span class="p">;</span>
<span class="mf">105</span>      <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">part</span></font><span class="p">(</span><font class="badlink"><span class="nx">ctc</span></font><span class="p">,</span> <font class="badlink"><span class="nx">interact</span></font><span class="p">);</span>
<span class="mf">106</span>    
<span class="mf">107</span>      <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">after</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">getBalance</span></font><span class="p">();</span>
<span class="mf">108</span>      <font class="badlink"><span class="nx">console</span></font><span class="p">.</span><font class="badlink"><span class="nx">log</span></font><span class="p">(</span><span class="sb">`Your balance is now </span><span class="si">${</span><font class="badlink"><span class="nx">after</span></font><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="mf">109</span>    
<span class="mf">110</span>      <a href="ref-frontends-js-ask_mjs.html#%28javascript._%28%28done%29%29%29" class="nx" data-pltdoc="x">done</a><span class="p">();</span>
<span class="mf">111</span>    <span class="p">})();</span>
</pre></div></div></p><p>And finally, the Web frontend:</p><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="boxed"><tr><td><p><a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-9/index.js"><span class="stt">tut-9/index.js</span></a><button class="btn" data-clipboard-text="import React from 'react';
import AppViews from './views/AppViews';
import DeployerViews from './views/DeployerViews';
import AttacherViews from './views/AttacherViews';
import {renderDOM, renderView} from './views/render';
import './index.css';
import * as backend from './build/index.main.mjs';
import {loadStdlib} from '@reach-sh/stdlib';
const reach = loadStdlib(process.env);
const handToInt = {'ROCK': 0, 'PAPER': 1, 'SCISSORS': 2};
const intToOutcome = ['Bob wins!', 'Draw!', 'Alice wins!'];
const {standardUnit} = reach;
const defaults = {defaultFundAmt: '10', defaultWager: '3', standardUnit};

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {view: 'ConnectAccount', ...defaults};
  }
  async componentDidMount() {
    const acc = await reach.getDefaultAccount();
    const balAtomic = await reach.balanceOf(acc);
    const bal = reach.formatCurrency(balAtomic, 4);
    this.setState({acc, bal});
    try {
      const faucet = await reach.getFaucet();
      this.setState({view: 'FundAccount', faucet});
    } catch (e) {
      this.setState({view: 'DeployerOrAttacher'});
    }
  }
  async fundAccount(fundAmount) {
    await reach.transfer(this.state.faucet, this.state.acc, reach.parseCurrency(fundAmount));
    this.setState({view: 'DeployerOrAttacher'});
  }
  async skipFundAccount() { this.setState({view: 'DeployerOrAttacher'}); }
  selectAttacher() { this.setState({view: 'Wrapper', ContentView: Attacher}); }
  selectDeployer() { this.setState({view: 'Wrapper', ContentView: Deployer}); }
  render() { return renderView(this, AppViews); }
}

class Player extends React.Component {
  random() { return reach.hasRandom.random(); }
  async getHand() { // Fun([], UInt)
    const hand = await new Promise(resolveHandP =&gt; {
      this.setState({view: 'GetHand', playable: true, resolveHandP});
    });
    this.setState({view: 'WaitingForResults', hand});
    return handToInt[hand];
  }
  seeOutcome(i) { this.setState({view: 'Done', outcome: intToOutcome[i]}); }
  informTimeout() { this.setState({view: 'Timeout'}); }
  playHand(hand) { this.state.resolveHandP(hand); }
}

class Deployer extends Player {
  constructor(props) {
    super(props);
    this.state = {view: 'SetWager'};
  }
  setWager(wager) { this.setState({view: 'Deploy', wager}); }
  async deploy() {
    const ctc = this.props.acc.deploy(backend);
    this.setState({view: 'Deploying', ctc});
    this.wager = reach.parseCurrency(this.state.wager); // UInt
    backend.Alice(ctc, this);
    const ctcInfoStr = JSON.stringify(await ctc.getInfo(), null, 2);
    this.setState({view: 'WaitingForAttacher', ctcInfoStr});
  }
  render() { return renderView(this, DeployerViews); }
}

class Attacher extends Player {
  constructor(props) {
    super(props);
    this.state = {view: 'Attach'};
  }
  attach(ctcInfoStr) {
    const ctc = this.props.acc.attach(backend, JSON.parse(ctcInfoStr));
    this.setState({view: 'Attaching'});
    backend.Bob(ctc, this);
  }
  async acceptWager(wagerAtomic) { // Fun([UInt], Null)
    const wager = reach.formatCurrency(wagerAtomic, 4);
    return await new Promise(resolveAcceptedP =&gt; {
      this.setState({view: 'AcceptTerms', wager, resolveAcceptedP});
    });
  }
  termsAccepted() {
    this.state.resolveAcceptedP();
    this.setState({view: 'WaitingForTurn'});
  }
  render() { return renderView(this, AttacherViews); }
}

renderDOM(&lt;App /&gt;);"><img class="clippy" width="13" src="clippy.svg" alt="Copy to clipboard"> </img></button>&nbsp;</p></td></tr></table></div><div class="SIntrapara"><div class="highlight"><pre><span></span> <span class="mf">1</span>    <font class="badlink"><span class="k">import</span></font> <font class="badlink"><span class="nx">React</span></font> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
 <span class="mf">2</span>    <font class="badlink"><span class="k">import</span></font> <font class="badlink"><span class="nx">AppViews</span></font> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;./views/AppViews&#39;</span><span class="p">;</span>
 <span class="mf">3</span>    <font class="badlink"><span class="k">import</span></font> <font class="badlink"><span class="nx">DeployerViews</span></font> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;./views/DeployerViews&#39;</span><span class="p">;</span>
 <span class="mf">4</span>    <font class="badlink"><span class="k">import</span></font> <font class="badlink"><span class="nx">AttacherViews</span></font> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;./views/AttacherViews&#39;</span><span class="p">;</span>
 <span class="mf">5</span>    <font class="badlink"><span class="k">import</span></font> <span class="p">{</span><font class="badlink"><span class="nx">renderDOM</span></font><span class="p">,</span> <font class="badlink"><span class="nx">renderView</span></font><span class="p">}</span> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;./views/render&#39;</span><span class="p">;</span>
 <span class="mf">6</span>    <font class="badlink"><span class="k">import</span></font> <span class="s1">&#39;./index.css&#39;</span><span class="p">;</span>
 <span class="mf">7</span>    <font class="badlink"><span class="k">import</span></font> <font class="badlink"><span class="o">*</span></font> <font class="badlink"><span class="k">as</span></font> <a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;./build/index.main.mjs&#39;</span><span class="p">;</span>
 <span class="mf">8</span>    <font class="badlink"><span class="k">import</span></font> <span class="p">{</span><a href="ref-frontends-js-loader_mjs.html#%28javascript._%28%28load.Stdlib%29%29%29" class="nx" data-pltdoc="x">loadStdlib</a><span class="p">}</span> <font class="badlink"><span class="k">from</span></font> <span class="s1">&#39;@reach-sh/stdlib&#39;</span><span class="p">;</span>
 <span class="mf">9</span>    <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">reach</span></font> <font class="badlink"><span class="o">=</span></font> <a href="ref-frontends-js-loader_mjs.html#%28javascript._%28%28load.Stdlib%29%29%29" class="nx" data-pltdoc="x">loadStdlib</a><span class="p">(</span><font class="badlink"><span class="nx">process</span></font><span class="p">.</span><font class="badlink"><span class="nx">env</span></font><span class="p">);</span>
<span class="mf">10</span>    <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">handToInt</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">{</span><span class="s1">&#39;ROCK&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">0</span><span class="p">,</span> <span class="s1">&#39;PAPER&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">1</span><span class="p">,</span> <span class="s1">&#39;SCISSORS&#39;</span><font class="badlink"><span class="o">:</span></font> <span class="mf">2</span><span class="p">};</span>
<span class="mf">11</span>    <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">intToOutcome</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">[</span><span class="s1">&#39;Bob wins!&#39;</span><span class="p">,</span> <span class="s1">&#39;Draw!&#39;</span><span class="p">,</span> <span class="s1">&#39;Alice wins!&#39;</span><span class="p">];</span>
<span class="mf">12</span>    <font class="badlink"><span class="kd">const</span></font> <span class="p">{</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28standard.Unit%29%29%29" class="nx" data-pltdoc="x">standardUnit</a><span class="p">}</span> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">;</span>
<span class="mf">13</span>    <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">defaults</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">{</span><font class="badlink"><span class="nx">defaultFundAmt</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;10&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">defaultWager</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <a href="ref-frontends-js-utils.html#%28javascript._%28%28standard.Unit%29%29%29" class="nx" data-pltdoc="x">standardUnit</a><span class="p">};</span>
<span class="mf">14</span>    
<span class="mf">15</span>    <font class="badlink"><span class="kd">class</span></font> <font class="badlink"><span class="nx">App</span></font> <font class="badlink"><span class="k">extends</span></font> <font class="badlink"><span class="nx">React</span></font><span class="p">.</span><font class="badlink"><span class="nx">Component</span></font> <span class="p">{</span>
<span class="mf">16</span>      <font class="badlink"><span class="nx">constructor</span></font><span class="p">(</span><font class="badlink"><span class="nx">props</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">17</span>        <font class="badlink"><span class="k">super</span></font><span class="p">(</span><font class="badlink"><span class="nx">props</span></font><span class="p">);</span>
<span class="mf">18</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">{</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;ConnectAccount&#39;</span><span class="p">,</span> <span class="p">...</span><font class="badlink"><span class="nx">defaults</span></font><span class="p">};</span>
<span class="mf">19</span>      <span class="p">}</span>
<span class="mf">20</span>      <font class="badlink"><span class="k">async</span></font> <font class="badlink"><span class="nx">componentDidMount</span></font><span class="p">()</span> <span class="p">{</span>
<span class="mf">21</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">acc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><a href="ref-frontends-js-acc.html#%28javascript._%28%28get.Default.Account%29%29%29" class="nx" data-pltdoc="x">getDefaultAccount</a><span class="p">();</span>
<span class="mf">22</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">balAtomic</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><a href="ref-frontends-js-acc.html#%28javascript._%28%28balance.Of%29%29%29" class="nx" data-pltdoc="x">balanceOf</a><span class="p">(</span><font class="badlink"><span class="nx">acc</span></font><span class="p">);</span>
<span class="mf">23</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">bal</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28format.Currency%29%29%29" class="nx" data-pltdoc="x">formatCurrency</a><span class="p">(</span><font class="badlink"><span class="nx">balAtomic</span></font><span class="p">,</span> <span class="mf">4</span><span class="p">);</span>
<span class="mf">24</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">acc</span></font><span class="p">,</span> <font class="badlink"><span class="nx">bal</span></font><span class="p">});</span>
<span class="mf">25</span>        <font class="badlink"><span class="k">try</span></font> <span class="p">{</span>
<span class="mf">26</span>          <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">faucet</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><font class="badlink"><span class="nx">getFaucet</span></font><span class="p">();</span>
<span class="mf">27</span>          <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;FundAccount&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">faucet</span></font><span class="p">});</span>
<span class="mf">28</span>        <span class="p">}</span> <font class="badlink"><span class="k">catch</span></font> <span class="p">(</span><font class="badlink"><span class="nx">e</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">29</span>          <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;DeployerOrAttacher&#39;</span><span class="p">});</span>
<span class="mf">30</span>        <span class="p">}</span>
<span class="mf">31</span>      <span class="p">}</span>
<span class="mf">32</span>      <font class="badlink"><span class="k">async</span></font> <font class="badlink"><span class="nx">fundAccount</span></font><span class="p">(</span><font class="badlink"><span class="nx">fundAmount</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">33</span>        <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><a href="ref-frontends-js-acc.html#%28javascript._%28%28transfer%29%29%29" class="nx" data-pltdoc="x">transfer</a><span class="p">(</span><font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font><span class="p">.</span><font class="badlink"><span class="nx">faucet</span></font><span class="p">,</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font><span class="p">.</span><font class="badlink"><span class="nx">acc</span></font><span class="p">,</span> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28parse.Currency%29%29%29" class="nx" data-pltdoc="x">parseCurrency</a><span class="p">(</span><font class="badlink"><span class="nx">fundAmount</span></font><span class="p">));</span>
<span class="mf">34</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;DeployerOrAttacher&#39;</span><span class="p">});</span>
<span class="mf">35</span>      <span class="p">}</span>
<span class="mf">36</span>      <font class="badlink"><span class="k">async</span></font> <font class="badlink"><span class="nx">skipFundAccount</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;DeployerOrAttacher&#39;</span><span class="p">});</span> <span class="p">}</span>
<span class="mf">37</span>      <font class="badlink"><span class="nx">selectAttacher</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Wrapper&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">ContentView</span></font><font class="badlink"><span class="o">:</span></font> <font class="badlink"><span class="nx">Attacher</span></font><span class="p">});</span> <span class="p">}</span>
<span class="mf">38</span>      <font class="badlink"><span class="nx">selectDeployer</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Wrapper&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">ContentView</span></font><font class="badlink"><span class="o">:</span></font> <font class="badlink"><span class="nx">Deployer</span></font><span class="p">});</span> <span class="p">}</span>
<span class="mf">39</span>      <font class="badlink"><span class="nx">render</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="nx">renderView</span></font><span class="p">(</span><font class="badlink"><span class="k">this</span></font><span class="p">,</span> <font class="badlink"><span class="nx">AppViews</span></font><span class="p">);</span> <span class="p">}</span>
<span class="mf">40</span>    <span class="p">}</span>
<span class="mf">41</span>    
<span class="mf">42</span>    <font class="badlink"><span class="kd">class</span></font> <font class="badlink"><span class="nx">Player</span></font> <font class="badlink"><span class="k">extends</span></font> <font class="badlink"><span class="nx">React</span></font><span class="p">.</span><font class="badlink"><span class="nx">Component</span></font> <span class="p">{</span>
<span class="mf">43</span>      <font class="badlink"><span class="nx">random</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><font class="badlink"><span class="nx">hasRandom</span></font><span class="p">.</span><font class="badlink"><span class="nx">random</span></font><span class="p">();</span> <span class="p">}</span>
<span class="mf">44</span>      <font class="badlink"><span class="k">async</span></font> <font class="badlink"><span class="nx">getHand</span></font><span class="p">()</span> <span class="p">{</span> <span class="c1">// Fun([], UInt)</span>
<span class="mf">45</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">hand</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="k">new</span></font> <font class="badlink"><span class="nb">Promise</span></font><span class="p">(</span><font class="badlink"><span class="nx">resolveHandP</span></font> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mf">46</span>          <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;GetHand&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">playable</span></font><font class="badlink"><span class="o">:</span></font> <font class="badlink"><span class="kc">true</span></font><span class="p">,</span> <font class="badlink"><span class="nx">resolveHandP</span></font><span class="p">});</span>
<span class="mf">47</span>        <span class="p">});</span>
<span class="mf">48</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;WaitingForResults&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">hand</span></font><span class="p">});</span>
<span class="mf">49</span>        <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="nx">handToInt</span></font><span class="p">[</span><font class="badlink"><span class="nx">hand</span></font><span class="p">];</span>
<span class="mf">50</span>      <span class="p">}</span>
<span class="mf">51</span>      <font class="badlink"><span class="nx">seeOutcome</span></font><span class="p">(</span><font class="badlink"><span class="nx">i</span></font><span class="p">)</span> <span class="p">{</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Done&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">outcome</span></font><font class="badlink"><span class="o">:</span></font> <font class="badlink"><span class="nx">intToOutcome</span></font><span class="p">[</span><font class="badlink"><span class="nx">i</span></font><span class="p">]});</span> <span class="p">}</span>
<span class="mf">52</span>      <font class="badlink"><span class="nx">informTimeout</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Timeout&#39;</span><span class="p">});</span> <span class="p">}</span>
<span class="mf">53</span>      <font class="badlink"><span class="nx">playHand</span></font><span class="p">(</span><font class="badlink"><span class="nx">hand</span></font><span class="p">)</span> <span class="p">{</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font><span class="p">.</span><font class="badlink"><span class="nx">resolveHandP</span></font><span class="p">(</span><font class="badlink"><span class="nx">hand</span></font><span class="p">);</span> <span class="p">}</span>
<span class="mf">54</span>    <span class="p">}</span>
<span class="mf">55</span>    
<span class="mf">56</span>    <font class="badlink"><span class="kd">class</span></font> <font class="badlink"><span class="nx">Deployer</span></font> <font class="badlink"><span class="k">extends</span></font> <font class="badlink"><span class="nx">Player</span></font> <span class="p">{</span>
<span class="mf">57</span>      <font class="badlink"><span class="nx">constructor</span></font><span class="p">(</span><font class="badlink"><span class="nx">props</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">58</span>        <font class="badlink"><span class="k">super</span></font><span class="p">(</span><font class="badlink"><span class="nx">props</span></font><span class="p">);</span>
<span class="mf">59</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">{</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;SetWager&#39;</span><span class="p">};</span>
<span class="mf">60</span>      <span class="p">}</span>
<span class="mf">61</span>      <font class="badlink"><span class="nx">setWager</span></font><span class="p">(</span><font class="badlink"><span class="nx">wager</span></font><span class="p">)</span> <span class="p">{</span> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Deploy&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">wager</span></font><span class="p">});</span> <span class="p">}</span>
<span class="mf">62</span>      <font class="badlink"><span class="k">async</span></font> <a href="ref-frontends-js-ctc.html#%28javascript._%28%28deploy%29%29%29" class="nx" data-pltdoc="x">deploy</a><span class="p">()</span> <span class="p">{</span>
<span class="mf">63</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">ctc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">props</span></font><span class="p">.</span><font class="badlink"><span class="nx">acc</span></font><span class="p">.</span><a href="ref-frontends-js-ctc.html#%28javascript._%28%28deploy%29%29%29" class="nx" data-pltdoc="x">deploy</a><span class="p">(</span><a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">);</span>
<span class="mf">64</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Deploying&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">ctc</span></font><span class="p">});</span>
<span class="mf">65</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">wager</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28parse.Currency%29%29%29" class="nx" data-pltdoc="x">parseCurrency</a><span class="p">(</span><font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font><span class="p">.</span><font class="badlink"><span class="nx">wager</span></font><span class="p">);</span> <span class="c1">// UInt</span>
<span class="mf">66</span>        <a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">.</span><font class="badlink"><span class="nx">Alice</span></font><span class="p">(</span><font class="badlink"><span class="nx">ctc</span></font><span class="p">,</span> <font class="badlink"><span class="k">this</span></font><span class="p">);</span>
<span class="mf">67</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">ctcInfoStr</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">JSON</span></font><span class="p">.</span><font class="badlink"><span class="nx">stringify</span></font><span class="p">(</span><font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="nx">ctc</span></font><span class="p">.</span><a href="ref-frontends-js-ctc.html#%28javascript._%28%28get.Info%29%29%29" class="nx" data-pltdoc="x">getInfo</a><span class="p">(),</span> <font class="badlink"><span class="kc">null</span></font><span class="p">,</span> <span class="mf">2</span><span class="p">);</span>
<span class="mf">68</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;WaitingForAttacher&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">ctcInfoStr</span></font><span class="p">});</span>
<span class="mf">69</span>      <span class="p">}</span>
<span class="mf">70</span>      <font class="badlink"><span class="nx">render</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="nx">renderView</span></font><span class="p">(</span><font class="badlink"><span class="k">this</span></font><span class="p">,</span> <font class="badlink"><span class="nx">DeployerViews</span></font><span class="p">);</span> <span class="p">}</span>
<span class="mf">71</span>    <span class="p">}</span>
<span class="mf">72</span>    
<span class="mf">73</span>    <font class="badlink"><span class="kd">class</span></font> <font class="badlink"><span class="nx">Attacher</span></font> <font class="badlink"><span class="k">extends</span></font> <font class="badlink"><span class="nx">Player</span></font> <span class="p">{</span>
<span class="mf">74</span>      <font class="badlink"><span class="nx">constructor</span></font><span class="p">(</span><font class="badlink"><span class="nx">props</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">75</span>        <font class="badlink"><span class="k">super</span></font><span class="p">(</span><font class="badlink"><span class="nx">props</span></font><span class="p">);</span>
<span class="mf">76</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font> <font class="badlink"><span class="o">=</span></font> <span class="p">{</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Attach&#39;</span><span class="p">};</span>
<span class="mf">77</span>      <span class="p">}</span>
<span class="mf">78</span>      <a href="ref-frontends-js-ctc.html#%28javascript._%28%28attach%29%29%29" class="nx" data-pltdoc="x">attach</a><span class="p">(</span><font class="badlink"><span class="nx">ctcInfoStr</span></font><span class="p">)</span> <span class="p">{</span>
<span class="mf">79</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">ctc</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">props</span></font><span class="p">.</span><font class="badlink"><span class="nx">acc</span></font><span class="p">.</span><a href="ref-frontends-js-ctc.html#%28javascript._%28%28attach%29%29%29" class="nx" data-pltdoc="x">attach</a><span class="p">(</span><a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">,</span> <font class="badlink"><span class="nx">JSON</span></font><span class="p">.</span><font class="badlink"><span class="nx">parse</span></font><span class="p">(</span><font class="badlink"><span class="nx">ctcInfoStr</span></font><span class="p">));</span>
<span class="mf">80</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;Attaching&#39;</span><span class="p">});</span>
<span class="mf">81</span>        <a href="ref-backends-js.html#%28javascript._%28%28backend%29%29%29" class="nx" data-pltdoc="x">backend</a><span class="p">.</span><font class="badlink"><span class="nx">Bob</span></font><span class="p">(</span><font class="badlink"><span class="nx">ctc</span></font><span class="p">,</span> <font class="badlink"><span class="k">this</span></font><span class="p">);</span>
<span class="mf">82</span>      <span class="p">}</span>
<span class="mf">83</span>      <font class="badlink"><span class="k">async</span></font> <font class="badlink"><span class="nx">acceptWager</span></font><span class="p">(</span><font class="badlink"><span class="nx">wagerAtomic</span></font><span class="p">)</span> <span class="p">{</span> <span class="c1">// Fun([UInt], Null)</span>
<span class="mf">84</span>        <font class="badlink"><span class="kd">const</span></font> <font class="badlink"><span class="nx">wager</span></font> <font class="badlink"><span class="o">=</span></font> <font class="badlink"><span class="nx">reach</span></font><span class="p">.</span><a href="ref-frontends-js-utils.html#%28javascript._%28%28format.Currency%29%29%29" class="nx" data-pltdoc="x">formatCurrency</a><span class="p">(</span><font class="badlink"><span class="nx">wagerAtomic</span></font><span class="p">,</span> <span class="mf">4</span><span class="p">);</span>
<span class="mf">85</span>        <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="k">await</span></font> <font class="badlink"><span class="k">new</span></font> <font class="badlink"><span class="nb">Promise</span></font><span class="p">(</span><font class="badlink"><span class="nx">resolveAcceptedP</span></font> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="mf">86</span>          <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;AcceptTerms&#39;</span><span class="p">,</span> <font class="badlink"><span class="nx">wager</span></font><span class="p">,</span> <font class="badlink"><span class="nx">resolveAcceptedP</span></font><span class="p">});</span>
<span class="mf">87</span>        <span class="p">});</span>
<span class="mf">88</span>      <span class="p">}</span>
<span class="mf">89</span>      <font class="badlink"><span class="nx">termsAccepted</span></font><span class="p">()</span> <span class="p">{</span>
<span class="mf">90</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">state</span></font><span class="p">.</span><font class="badlink"><span class="nx">resolveAcceptedP</span></font><span class="p">();</span>
<span class="mf">91</span>        <font class="badlink"><span class="k">this</span></font><span class="p">.</span><font class="badlink"><span class="nx">setState</span></font><span class="p">({</span><font class="badlink"><span class="nx">view</span></font><font class="badlink"><span class="o">:</span></font> <span class="s1">&#39;WaitingForTurn&#39;</span><span class="p">});</span>
<span class="mf">92</span>      <span class="p">}</span>
<span class="mf">93</span>      <font class="badlink"><span class="nx">render</span></font><span class="p">()</span> <span class="p">{</span> <font class="badlink"><span class="k">return</span></font> <font class="badlink"><span class="nx">renderView</span></font><span class="p">(</span><font class="badlink"><span class="k">this</span></font><span class="p">,</span> <font class="badlink"><span class="nx">AttacherViews</span></font><span class="p">);</span> <span class="p">}</span>
<span class="mf">94</span>    <span class="p">}</span>
<span class="mf">95</span>    
<span class="mf">96</span>    <font class="badlink"><span class="nx">renderDOM</span></font><span class="p">(</span><font class="badlink"><span class="o">&lt;</span></font><font class="badlink"><span class="nx">App</span></font> <font class="badlink"><span class="o">/&gt;</span></font><span class="p">);</span>
</pre></div></div></p><p>We wrote 88 lines of Reach and two different frontends.
Our command-line version is 111 lines of JavaScript, or 199 lines together.
While our Web version is 96 lines of JavaScript, or 184 lines together.</p><p>Behind the scenes, Reach generated 422 lines of Solidity (which you can look at here: <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-8/build/index.main.sol"><span class="stt">tut-8/build/index.main.sol</span></a>), 1621 lines of TEAL (which you can look at here: <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-8/build/index.main.mjs#L584"><span class="stt">tut-8/build/index.main.mjs#L584</span></a>), as well as 1889 lines of JavaScript (which you can look at here: <a href="https://github.com/reach-sh/reach-lang/blob/master/examples/tut-8/build/index.main.mjs"><span class="stt">tut-8/build/index.main.mjs</span></a>).
If we weren&rsquo;t using Reach, then we&rsquo;d have to write these 3937 lines ourselves and ensure that they are consistent and updated at every change to the application.</p><p>Now that you&rsquo;ve seen an entire Reach application from beginning to end, it&rsquo;s time for you to start working on your own applications!</p><ul><li><p>You may want to start <a href="workshop.html" data-pltdoc="x">the workshop</a>, which is a self-study course on practicing and learning Reach through different specific projects.</p></li><li><p>Or, maybe you&rsquo;d like to spend some time in <a href="guide.html" data-pltdoc="x">the guide</a> learning about the background of some of the concepts used in Reach programs.</p></li><li><p>Or, maybe it&rsquo;s time for you to dive into <a href="ref.html" data-pltdoc="x">the reference</a> and look into the minutiae of Reach&rsquo;s features.</p></li><li><p>Finally, you may like to repeat a portion of this tutorial, but using <a href="tut-7-rpc.html" data-pltdoc="x">a language other than JavaScript</a>, like Python or Go!</p></li></ul><p>No matter what you decide to read or work on next, we hope you&rsquo;ll join us on <a href="https://discord.gg/AZsgcXu">the Discord community</a>.
Once you join, message <span class="RktInBG"><span class="hspace"></span><span class="RktIn">@team, I just completed the tutorial!</span><span class="hspace"></span></span> and we&rsquo;ll give you the <span class="RktInBG"><span class="hspace"></span><span class="RktIn">tutorial veteran</span><span class="hspace"></span></span> role, so you can more easily help others work through it!</p><p>Thanks for spending your afternoon with us!</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="tut-9.html" title="backward to &quot;2.9 Web Interaction&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="tut.html" title="up to &quot;2 Tutorial&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="tut-7-rpc.html" title="forward to &quot;2.11 Rock, Paper, Scissors in Python&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div><script src="reach-post.js"></script></body></html>
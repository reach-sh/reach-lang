<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-149147406-2"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-149147406-2');</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script src="tooltips.js"></script><script src="reach-pre.js"></script><link rel="stylesheet" href="tooltips.css"><link rel="stylesheet" href="reach.css"><link rel="stylesheet" href="minted.css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><link rel="manifest" href="/favicon/site.webmanifest"><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3.8&nbsp;Determinism, simultaneity, and choice in decentralized applications</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Reach:<span class="mywbr"> &nbsp;</span> The Safest and Easiest DApp Programming Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="tut.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="guide.html" class="tocviewselflink" data-pltdoc="x">Guide</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="workshop.html" class="tocviewlink" data-pltdoc="x">Workshop</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ref.html" class="tocviewlink" data-pltdoc="x">Reference</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>3&nbsp;</td><td><a href="guide.html" class="tocviewlink" data-pltdoc="x">Guide</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="guide-windows.html" class="tocviewlink" data-pltdoc="x">Using Reach on Windows</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="guide-versions.html" class="tocviewlink" data-pltdoc="x">How does Reach use version numbers?</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="guide-solidity.html" class="tocviewlink" data-pltdoc="x">How does Reach development compare to Solidity development?</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="guide-assert.html" class="tocviewlink" data-pltdoc="x">How and what to verify</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="guide-loop-invs.html" class="tocviewlink" data-pltdoc="x">Finding and using loop invariants</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="guide-deploymode.html" class="tocviewlink" data-pltdoc="x">Choosing a deployment mode</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="guide-timeout.html" class="tocviewlink" data-pltdoc="x">Non-<wbr></wbr>participation:<span class="mywbr"> &nbsp;</span> What it is and how to protect against it</a></td></tr><tr><td align="right">3.8&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Determinism, simultaneity, and choice in decentralized applications</a></td></tr><tr><td align="right">3.9&nbsp;</td><td><a href="guide-race.html" class="tocviewlink" data-pltdoc="x">Racing non-<wbr></wbr>determinism in decentralized applications</a></td></tr><tr><td align="right">3.10&nbsp;</td><td><a href="guide-abstract.html" class="tocviewlink" data-pltdoc="x">Building decentralized abstractions</a></td></tr><tr><td align="right">3.11&nbsp;</td><td><a href="guide-browser-testing.html" class="tocviewlink" data-pltdoc="x">Testing Reach programs in the browser</a></td></tr><tr><td align="right">3.12&nbsp;</td><td><a href="guide-limits.html" class="tocviewlink" data-pltdoc="x">What are Reach&rsquo;s limitations and its future roadmap</a></td></tr><tr><td align="right">3.13&nbsp;</td><td><a href="guide-reach.html" class="tocviewlink" data-pltdoc="x">How does Reach work?</a></td></tr><tr><td align="right">3.14&nbsp;</td><td><a href="guide-editor-support.html" class="tocviewlink" data-pltdoc="x">IDE/<span class="mywbr"> &nbsp;</span>Text Editor Support</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">0.1.2</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="guide-timeout.html" title="backward to &quot;3.7 Non-participation: What it is and how to protect against it&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="guide.html" title="up to &quot;3 Guide&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="guide-race.html" title="forward to &quot;3.9 Racing non-determinism in decentralized applications&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>3.8<tt>&nbsp;</tt><a name="(part._guide-determ)"></a>Determinism, simultaneity, and choice in decentralized applications</h4><p>The structure of a Reach computation is deterministic, because at each point in a computation, all participants agree on which publication is the next one in the computation.
If this were not the case, then different participants may attempt to pursue different paths through a computation and thereby reach different values at the end.
This deterministic structure, however, does not mean that the participant that provides the publication must be fixed, merely that which publication event is next must be fixed; see for example <code class="highlight"><a href="ref-programs-step.html#%28reach._%28%28race%29%29%29" class="k" data-pltdoc="x">race</a></code> expressions and the <a href="guide-race.html" data-pltdoc="x">the guide section on races</a> for an elaboration of this point.)
Even in the presence of this non-determinism in actors, Reach programs remain deterministic in their structure.</p><p>However, many developers think of their application as having a step when two participants act simultaneously.
For example, in a game of <a href="tut.html" data-pltdoc="x">Rock, Paper, Scissors!</a> in the real world, both players simultaneously choose their hands.
Similarly, a rental agreement gives both the landlord and the tenant the ability to cancel the agreement (subject to some penalty) at any time.
In both of these cases, it is not clear how to understand this interaction as being sequential and deterministic.</p><p>At first glance, these situations appear different.
In the first, the participants are doing "the same thing" simultaneously, because both will submit a hand eventually; while in the second, they are doing "something different", because only one of them will actually end the agreement early.
However, both of these situations are actually identical, because in the second case they are both simultaneously deciding whether they will end early.
In the first case, the participants are submitting one of three values (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">Rock</span><span class="hspace"></span></span>, <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Paper</span><span class="hspace"></span></span>, or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Scissors</span><span class="hspace"></span></span>), while in the second they are submitting one of two (<span class="RktInBG"><span class="hspace"></span><span class="RktIn">Leave</span><span class="hspace"></span></span> or <span class="RktInBG"><span class="hspace"></span><span class="RktIn">Stay</span><span class="hspace"></span></span>).</p><p>In such situations, in a decentralized application, the program must agree that one participant acts first.
The important thing to realize is that "simultaneity" is not the same thing as "non-determinism".
The pertinent design detail is whether one participant has an advantage for going in any particular order.
If there is no advantage for either place, then the developer can arbitrarily decide to go in one order.
If there is an advantage, then a commitment strategy similar to the <a href="tut.html" data-pltdoc="x">Rock, Paper, Scissors! tutorial</a> should be used.</p><p>For example, in the rental agreement, if we felt there was no advantage for going second, then we could have either the landlord or the tenant go first.
But, is there no advantage?
If both the tenant and the landlord want to exit in the same month, but the landlord goes first, and then the landlord would suffer a loss of their deposit; but, if they fairly shared their choice at the same time, then they could both be refunded in this case.
This is an example of the Pareto improvements that are possible in decentralized applications relative to existing institutions.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>See <a href="workshop-rental.html" data-pltdoc="x">Workshop: Rental Agreement</a> for a discussion of this example in further detail.</p></blockquote></blockquote></blockquote><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search docs..." title="Enter a search string to search the Reach documentation" onkeypress="return reach_DoSearch(event, this);"></form>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="guide-timeout.html" title="backward to &quot;3.7 Non-participation: What it is and how to protect against it&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="guide.html" title="up to &quot;3 Guide&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="guide-race.html" title="forward to &quot;3.9 Racing non-determinism in decentralized applications&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div><script src="reach-post.js"></script></body></html>
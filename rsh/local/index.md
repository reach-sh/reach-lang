[{"bookPath":"","title":"Local Steps","titleId":"ref-programs-local","hasOtp":true,"hasPageHeader":true},"<p>\n  <i id=\"p_0\" class=\"pid\"></i>A Reach local step occurs in the body of <span class=\"snip\"><span style=\"color: #24292E\">only</span></span> or <span class=\"snip\"><span style=\"color: #24292E\">each</span></span> statements.\n  It represents the actions taken by a single participant in an application.<a href=\"#p_0\" class=\"pid\">0</a>\n</p>\n<h2 id=\"ref-programs-local-stmts\" class=\"refHeader\">Statements<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-local-stmts\"><span class=\"icon icon-link\"></span></a></h2>\n<p><i id=\"p_1\" class=\"pid\"></i>Any statements valid for a <a href=\"/rsh/compute/#ref-programs-compute-stmts\">computation</a> are valid for a local step.<a href=\"#p_1\" class=\"pid\">1</a></p>\n<h2 id=\"ref-programs-local-exprs\" class=\"refHeader\">Expressions<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-local-exprs\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_2\" class=\"pid\"></i>Any expressions valid for a <a href=\"/rsh/compute/#ref-programs-compute-exprs\">computation</a> are valid for a local step.\n  However, some additional expressions are allowed.<a href=\"#p_2\" class=\"pid\">2</a>\n</p>\n<h3 id=\"ref-programs-local-this\" class=\"refHeader\"><code>this</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-local-this\"><span class=\"icon icon-link\"></span></a></h3>\n<p>\n  <i id=\"p_3\" class=\"pid\"></i>Inside of a local step, <span class=\"snip\"><span style=\"color: #005CC5\">this</span></span> refers to the participant performing the step.\n  This is useful when the local step was initiated by an <span class=\"snip\"><span style=\"color: #24292E\">each</span></span> expression.<a href=\"#p_3\" class=\"pid\">3</a>\n</p>\n<h3 id=\"interact\" class=\"refHeader\"><code>interact</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#interact\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_interact\" data-scope=\"rsh\" data-symbol=\"interact\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"interact.amount\ninteract.notify(handA, handB)\ninteract.chooseAmount(heap1, heap2)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: #24292E\">interact.amount</span></li><li value=\"2\"><span style=\"color: #24292E\">interact.</span><span style=\"color: #6F42C1\">notify</span><span style=\"color: #24292E\">(handA, handB)</span></li><li value=\"3\"><span style=\"color: #24292E\">interact.</span><span style=\"color: #6F42C1\">chooseAmount</span><span style=\"color: #24292E\">(heap1, heap2)</span></li></ol></pre>\n<p><i id=\"p_4\" class=\"pid\"></i>An <span class=\"term\" id=\"term_interaction%20expression\">interaction expression</span>, written <span class=\"snip\"><span style=\"color: #24292E\">interact.</span><span style=\"color: #6F42C1\">METHOD</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">EXPR_0</span><span style=\"color: #24292E\">, </span><span style=\"color: #D73A49\">...</span><span style=\"color: #24292E\">, EXPR_n)</span></span>, where <span class=\"snip\"><span style=\"color: #005CC5\">METHOD</span></span> is an identifier bound in the participant interact interface to a function type, and <span class=\"snip\"><span style=\"color: #005CC5\">EXPR_0</span></span> through <span class=\"snip\"><span style=\"color: #24292E\">EXPR_n</span></span> are expressions that evaluate to the result of an interaction with a frontend that receives the evaluation of the <span class=\"snip\"><span style=\"color: #24292E\">n</span></span> expressions and sends a value.<a href=\"#p_4\" class=\"pid\">4</a></p>\n<p><i id=\"p_5\" class=\"pid\"></i>An interaction expression may also be written <span class=\"snip\"><span style=\"color: #24292E\">interact.</span><span style=\"color: #005CC5\">KEY</span></span>, where <span class=\"snip\"><span style=\"color: #005CC5\">KEY</span></span> is bound in the participant interact interface to a non-function type.<a href=\"#p_5\" class=\"pid\">5</a></p>\n<p><i id=\"p_6\" class=\"pid\"></i>An interaction expression may only occur in a local step.<a href=\"#p_6\" class=\"pid\">6</a></p>\n<h3 id=\"assume\" class=\"refHeader\"><code>assume</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#assume\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_assume\" data-scope=\"rsh\" data-symbol=\"assume\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"assume( claim, [msg] )\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: #6F42C1\">assume</span><span style=\"color: #24292E\">( claim, [msg] )</span></li></ol></pre>\n<p>\n  <i id=\"p_7\" class=\"pid\"></i>An assumption where <span class=\"snip\"><span style=\"color: #24292E\">claim</span></span> evaluates to <span class=\"snip\"><span style=\"color: #005CC5\">true</span></span> with honest frontends.\n  This may only appear in a local step.\n  It accepts an optional bytes argument, which is included in any reported violation.<a href=\"#p_7\" class=\"pid\">7</a>\n</p>\n<h3 id=\"fail\" class=\"refHeader\"><code>fail</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#fail\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_fail\" data-scope=\"rsh\" data-symbol=\"fail\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"fail()\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: #6F42C1\">fail</span><span style=\"color: #24292E\">()</span></li></ol></pre>\n<p><i id=\"p_8\" class=\"pid\"></i>is a convenience method equivalent to <span class=\"snip\"><span style=\"color: #6F42C1\">assume</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">false</span><span style=\"color: #24292E\">)</span></span>. This may only appear in a local step.<a href=\"#p_8\" class=\"pid\">8</a></p>\n<h3 id=\"declassify\" class=\"refHeader\"><code>declassify</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#declassify\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_declassify\" data-scope=\"rsh\" data-symbol=\"declassify\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"declassify( arg )\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: #6F42C1\">declassify</span><span style=\"color: #24292E\">( arg )</span></li></ol></pre>\n<p><i id=\"p_9\" class=\"pid\"></i>The <span class=\"term\" id=\"term_declassify\">declassify</span> primitive performs a declassification of the given argument.<a href=\"#p_9\" class=\"pid\">9</a></p>\n<h3 id=\"makecommitment\" class=\"refHeader\"><code>makeCommitment</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#makecommitment\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_makeCommitment\" data-scope=\"rsh\" data-symbol=\"makeCommitment\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"makeCommitment( interact, x )\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: #6F42C1\">makeCommitment</span><span style=\"color: #24292E\">( interact, x )</span></li></ol></pre>\n<p>\n  <i id=\"p_10\" class=\"pid\"></i>Returns two values, <span class=\"snip\"><span style=\"color: #24292E\">[ commitment, salt ]</span></span>, where <span class=\"snip\"><span style=\"color: #24292E\">salt</span></span> is the result of calling <span class=\"snip\"><span style=\"color: #24292E\">interact.</span><span style=\"color: #6F42C1\">random</span><span style=\"color: #24292E\">()</span></span>, and\n  <span class=\"snip\"><span style=\"color: #24292E\">commitment</span></span> is the digest of <span class=\"snip\"><span style=\"color: #24292E\">salt</span></span> and <span class=\"snip\"><span style=\"color: #24292E\">x</span></span>.\n  This is used in a local step before <span class=\"snip\"><span style=\"color: #24292E\">checkCommitment</span></span> is used in a consensus step.<a href=\"#p_10\" class=\"pid\">10</a>\n</p>\n<h3 id=\"didpublish\" class=\"refHeader\"><code>didPublish</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#didpublish\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_didPublish\" data-scope=\"rsh\" data-symbol=\"didPublish\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"didPublish()\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: #6F42C1\">didPublish</span><span style=\"color: #24292E\">()</span></li></ol></pre>\n<p><i id=\"p_11\" class=\"pid\"></i>Returns a boolean that indicates whether the last publication was made by this principal.<a href=\"#p_11\" class=\"pid\">11</a></p>","<ul><li class=\"dynamic\">\n    <a href=\"#ref-programs-local\">Local Steps</a>\n    <ul class=\"dynamic\">\n      <li class=\"dynamic\">\n        <a href=\"#ref-programs-local-stmts\">Statements</a>\n      </li>\n      <li class=\"dynamic\">\n        <a href=\"#ref-programs-local-exprs\">Expressions</a>\n        <ul class=\"dynamic\">\n          <li class=\"dynamic\"><a href=\"#ref-programs-local-this\"><code>this</code></a></li>\n          <li class=\"dynamic\"><a href=\"#interact\"><code>interact</code></a></li>\n          <li class=\"dynamic\"><a href=\"#assume\"><code>assume</code></a></li>\n          <li class=\"dynamic\"><a href=\"#fail\"><code>fail</code></a></li>\n          <li class=\"dynamic\"><a href=\"#declassify\"><code>declassify</code></a></li>\n          <li class=\"dynamic\"><a href=\"#makecommitment\"><code>makeCommitment</code></a></li>\n          <li class=\"dynamic\"><a href=\"#didpublish\"><code>didPublish</code></a></li>\n        </ul>\n      </li>\n    </ul>\n  </li></ul>"]
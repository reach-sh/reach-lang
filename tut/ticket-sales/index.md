[{"bookPath":"","title":"Ticket Sales","titleId":"ticket-sales","hasOtp":true,"hasPageHeader":true},"<h1 id=\"ticket-sales\" class=\"refHeader\">Ticket Sales<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ticket-sales\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_0\" class=\"pid\"></i>This tutorial will demonstrate a token distribution mechanism in Reach.<a href=\"#p_0\" class=\"pid\">0</a></p>\n<p><i id=\"p_1\" class=\"pid\"></i>This token distribution DApp could be used for many different applications, but we thought it would be best used to demonstrate a decentralized DApp replacement for Ticketmaster.<a href=\"#p_1\" class=\"pid\">1</a></p>\n<p><i id=\"p_2\" class=\"pid\"></i>It assumes prior knowledge of Reach: we recommend completing the <a href=\"/tut/rps/#tut\">Rock, Paper, Scissors</a> tutorial first.<a href=\"#p_2\" class=\"pid\">2</a></p>\n<p><i id=\"p_3\" class=\"pid\"></i>And maybe <a href=\"/tut/rsvp/#tut-rsvp\">RSVP</a>.<a href=\"#p_3\" class=\"pid\">3</a></p>\n<p><i id=\"p_4\" class=\"pid\"></i>And maybe <a href=\"/tut/wfs/#wfs\">Wisdom For Sale</a>.<a href=\"#p_4\" class=\"pid\">4</a></p>\n<p><i id=\"p_5\" class=\"pid\"></i>And maybe <a href=\"/tut/erc20/#erc20\">ERC20</a>.<a href=\"#p_5\" class=\"pid\">5</a></p>\n<p><i id=\"p_6\" class=\"pid\"></i>Just do them all, you will be really good after.<a href=\"#p_6\" class=\"pid\">6</a></p>\n<p><i id=\"p_7\" class=\"pid\"></i>We assume you are working in a project folder called <code>ticket-sales</code>:<a href=\"#p_7\" class=\"pid\">7</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"mkdir ticket-sales\n$ cd ticket-sales\" href=\"#\" id=\"copyBtn1\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> mkdir ticket</span><span style=\"color: var(--shiki-token-keyword)\">-</span><span style=\"color: var(--shiki-color-text)\">sales</span></li><li value=\"2\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> cd ticket</span><span style=\"color: var(--shiki-token-keyword)\">-</span><span style=\"color: var(--shiki-color-text)\">sales</span></li></ol></pre>\n<p><i id=\"p_8\" class=\"pid\"></i>Start by creating your files:<a href=\"#p_8\" class=\"pid\">8</a></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"touch index.rsh index.mjs\" href=\"#\" id=\"copyBtn2\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> touch index.rsh index.mjs</span></li></ol></pre>\n<p><i id=\"p_9\" class=\"pid\"></i>Our application is going to allow the Administrator to provide details about the token sale and then allow users to come in and buy tokens until the contract balance is zero.<a href=\"#p_9\" class=\"pid\">9</a></p>\n<p><i id=\"p_10\" class=\"pid\"></i>At that time it will close the sale functions and transfer the total network tokens collected back to the Administrator.<a href=\"#p_10\" class=\"pid\">10</a></p>\n<p><i id=\"p_11\" class=\"pid\"></i>As with any Reach DApp, it is best to first think about who the users are in our application.<a href=\"#p_11\" class=\"pid\">11</a></p>\n<p><i id=\"p_12\" class=\"pid\"></i>There will be one Deployer (the Admin) providing the parameters of the sale, including the non-network tokens (or tickets).<a href=\"#p_12\" class=\"pid\">12</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.rsh\">/examples/ticket-sales/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"'reach 0.1';\n\nexport const main = Reach.App(() => {\n  const A = Participant('Admin', {\n    params: Object({\n      cost: UInt,\n      tok: Token,\n      supply: UInt,\n    }),\n    launched: Fun([Contract], Null),\n  });\" href=\"#\" id=\"copyBtn3\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-string-expression)\">'reach 0.1'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"></li><li value=\"3\"><a href=\"/rsh/module/#rsh_export\" title=\"rsh: export\"><span style=\"color: var(--shiki-token-keyword)\">export</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">main</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/module/#rsh_Reach\" title=\"rsh: Reach\"><span style=\"color: var(--shiki-token-constant)\">Reach</span></a><a href=\"/rsh/module/#rsh_Reach.App\" title=\"rsh: Reach.App\"><span style=\"color: var(--shiki-token-function)\">.App</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"4\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">A</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Admin'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">    params</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Object\" title=\"rsh: Object\"><span style=\"color: var(--shiki-token-constant)\">Object</span></a><span style=\"color: var(--shiki-color-text)\">({</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">      cost</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"7\"><span style=\"color: var(--shiki-color-text)\">      tok</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> Token</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"8\"><span style=\"color: var(--shiki-color-text)\">      supply</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"9\"><span style=\"color: var(--shiki-color-text)\">    })</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"10\"><span style=\"color: var(--shiki-color-text)\">    launched</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([Contract]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"11\"><span style=\"color: var(--shiki-color-text)\">  });</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_13\" class=\"pid\"></i>Line 4 declares a single <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-color-text)\">Participant</span></a></span> to bind as the <code>Admin</code>.<a href=\"#p_13\" class=\"pid\">13</a></li>\n  <li><i id=\"p_14\" class=\"pid\"></i>Lines 5-8 declares the parameters to be passed to the contract initially.<a href=\"#p_14\" class=\"pid\">14</a></li>\n  <li><i id=\"p_15\" class=\"pid\"></i>Line 10 declares a <code>launched</code> function, common in this style of application. <a href=\"/tut/erc20/#erc20\">Why?</a><a href=\"#p_15\" class=\"pid\">15</a></li>\n</ul>\n<p><i id=\"p_16\" class=\"pid\"></i>We then need a dynamic amount of users whose functionality will be repeated.<a href=\"#p_16\" class=\"pid\">16</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.rsh\">/examples/ticket-sales/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  const B = API('Buyer', {\n    buyTicket: Fun([], Null),\n  });\n  init();\" href=\"#\" id=\"copyBtn4\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"12\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Buyer'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"13\"><span style=\"color: var(--shiki-color-text)\">    buyTicket</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"14\"><span style=\"color: var(--shiki-color-text)\">  });</span></li><li value=\"15\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_17\" class=\"pid\"></i>Line 12 defines a dynamic amount of users, all with shared abilities.<a href=\"#p_17\" class=\"pid\">17</a></li>\n  <li><i id=\"p_18\" class=\"pid\"></i>Line 13 declares a <code>buyTicket</code> function that our Buyer(s) will be able to call.<a href=\"#p_18\" class=\"pid\">18</a></li>\n</ul>\n<p><i id=\"p_19\" class=\"pid\"></i>Now we've defined our users and the functions they will be allowed, we call <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> to start stepping through the states of our program.<a href=\"#p_19\" class=\"pid\">19</a></p>\n<p><i id=\"p_20\" class=\"pid\"></i>Now the Admin can actually provide the values for the parameters we've declared. This happens in an Local Step.<a href=\"#p_20\" class=\"pid\">20</a></p>\n<p><i id=\"p_21\" class=\"pid\"></i><a href=\"https://github.com/reach-sh/reach-lang/discussions/1171\" target=\"_blank\">Read more about Modes of a Reach App</a>.<a href=\"#p_21\" class=\"pid\">21</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.rsh\">/examples/ticket-sales/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  A.only(() => {\n    const {cost, tok, supply} = declassify(interact.params);\n  });\n  A.publish(cost, tok, supply);\n  commit();\" href=\"#\" id=\"copyBtn5\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"17\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">A</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"18\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> {</span><span style=\"color: var(--shiki-token-constant)\">cost</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">tok</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/consensus/#rsh_supply\" title=\"rsh: supply\"><span style=\"color: var(--shiki-token-constant)\">supply</span></a><span style=\"color: var(--shiki-color-text)\">} </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.params);</span></li><li value=\"19\"><span style=\"color: var(--shiki-color-text)\">  });</span></li><li value=\"20\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">A</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(cost</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> tok</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> supply);</span></li><li value=\"21\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_22\" class=\"pid\"></i>Line 17 starts the Local Step.<a href=\"#p_22\" class=\"pid\">22</a></li>\n  <li><i id=\"p_23\" class=\"pid\"></i>Line 18 declassifies the parameters and unpacks them into respective constants.<a href=\"#p_23\" class=\"pid\">23</a></li>\n  <li><i id=\"p_24\" class=\"pid\"></i>Line 20 publishes those values to the blockchain.<a href=\"#p_24\" class=\"pid\">24</a></li>\n  <li><i id=\"p_25\" class=\"pid\"></i>Line 21 <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-color-text)\">commit</span></a></span>s to move us out of consensus step.<a href=\"#p_25\" class=\"pid\">25</a></li>\n</ul>\n<p><i id=\"p_26\" class=\"pid\"></i>Now, the next step is to have the Admin actually pay the non-network tokens into the contract. This needs to happen in a consensus step.<a href=\"#p_26\" class=\"pid\">26</a></p>\n<p><i id=\"p_27\" class=\"pid\"></i>Why then did we move <em>out</em> of consensus on Line 21?<a href=\"#p_27\" class=\"pid\">27</a></p>\n<p><i id=\"p_28\" class=\"pid\"></i>The answer is that we need to <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span> the non-network token <code>tok</code> before we can <span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span> it into the contract.<a href=\"#p_28\" class=\"pid\">28</a></p>\n<p><i id=\"p_29\" class=\"pid\"></i>Reach supports network tokens by default, but a non-network token, like the one in our program, needs to be taught to Reach before you can pay it in.<a href=\"#p_29\" class=\"pid\">29</a></p>\n<p><i id=\"p_30\" class=\"pid\"></i>The general flow for paying non-network tokens:<a href=\"#p_30\" class=\"pid\">30</a></p>\n<ol>\n  <li><i id=\"p_31\" class=\"pid\"></i>Get token info in Local Step.<a href=\"#p_31\" class=\"pid\">31</a></li>\n  <li><i id=\"p_32\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span> token info in Consensus Step.<a href=\"#p_32\" class=\"pid\">32</a></li>\n  <li><i id=\"p_33\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span>.<a href=\"#p_33\" class=\"pid\">33</a></li>\n  <li><i id=\"p_34\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span> tokens in Consensus Step.<a href=\"#p_34\" class=\"pid\">34</a></li>\n</ol>\n<p><i id=\"p_35\" class=\"pid\"></i>That means our next step is to <span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span> the tokens into the contract.<a href=\"#p_35\" class=\"pid\">35</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.rsh\">/examples/ticket-sales/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  A.pay([[supply, tok]]);\n  A.interact.launched(getContract());\" href=\"#\" id=\"copyBtn6\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"22\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">A</span><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-token-function)\">.pay</span></a><span style=\"color: var(--shiki-color-text)\">([[supply</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> tok]]);</span></li><li value=\"23\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">A</span><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.launched</span><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/compute/#rsh_getContract\" title=\"rsh: getContract\"><span style=\"color: var(--shiki-token-function)\">getContract</span></a><span style=\"color: var(--shiki-color-text)\">());</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_36\" class=\"pid\"></i>Line 22 pays the <code>supply</code> of <code>tok</code> from <code>A</code> into the contract account. This must be a syntactic tuple where the general structure is <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">A</span><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-token-function)\">.pay</span></a><span style=\"color: var(--shiki-color-text)\">([networkTokenAmount</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> [amount</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> non</span><a href=\"/rsh/compute/#rsh_-\" title=\"rsh: -\"><span style=\"color: var(--shiki-token-keyword)\">-</span></a><span style=\"color: var(--shiki-color-text)\">networkTokens]]);</span></span>.<a href=\"#p_36\" class=\"pid\">36</a></li>\n  <li><i id=\"p_37\" class=\"pid\"></i>Line 23 notifies the frontend that our contract is ready to start accepting API calls, this can only be called after the first <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span>.<a href=\"#p_37\" class=\"pid\">37</a></li>\n</ul>\n<p><i id=\"p_38\" class=\"pid\"></i>This is a good place to pause in our Reach <code>rsh</code> file and get into the frontend <code>mjs</code> testing file.<a href=\"#p_38\" class=\"pid\">38</a></p>\n<p><i id=\"p_39\" class=\"pid\"></i>Let's start with some basics.<a href=\"#p_39\" class=\"pid\">39</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.mjs\">/examples/ticket-sales/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"import { loadStdlib } from &quot;@reach-sh/stdlib&quot;;\nimport * as backend from './build/index.main.mjs';\nconst stdlib = loadStdlib({REACH_NO_WARN: 'Y'});\nconst MAX = 50;\nconst accA = await stdlib.newTestAccount(stdlib.parseCurrency(5000));\nconst ctcA = accA.contract(backend);\nconst tickets = await stdlib.launchToken(accA, &quot;Tickets&quot;, &quot;TIX&quot;, {supply: MAX});\n\nconsole.log('Welcome to the ticket distributor\\nLets get you a ticket');\" href=\"#\" id=\"copyBtn7\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> { loadStdlib } </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">\"@reach-sh/stdlib\"</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">*</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">as</span><span style=\"color: var(--shiki-color-text)\"> backend </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'./build/index.main.mjs'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"3\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_loadStdlib\" title=\"js: loadStdlib\"><span style=\"color: var(--shiki-token-function)\">loadStdlib</span></a><span style=\"color: var(--shiki-color-text)\">({REACH_NO_WARN</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'Y'</span><span style=\"color: var(--shiki-color-text)\">});</span></li><li value=\"4\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">MAX</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">50</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"5\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">accA</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">5000</span><span style=\"color: var(--shiki-color-text)\">));</span></li><li value=\"6\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">ctcA</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">accA</span><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend);</span></li><li value=\"7\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">tickets</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.launchToken\" title=\"js: stdlib.launchToken\"><span style=\"color: var(--shiki-token-function)\">.launchToken</span></a><span style=\"color: var(--shiki-color-text)\">(accA</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">\"Tickets\"</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">\"TIX\"</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {supply</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">MAX</span><span style=\"color: var(--shiki-color-text)\">});</span></li><li value=\"8\"></li><li value=\"9\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Welcome to the ticket distributor\\nLets get you a ticket'</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_40\" class=\"pid\"></i>Line 1-2 are necessary imports.<a href=\"#p_40\" class=\"pid\">40</a></li>\n  <li><i id=\"p_41\" class=\"pid\"></i>Line 3 sets a constant for the standard library and hides warning messages.<a href=\"#p_41\" class=\"pid\">41</a></li>\n  <li><i id=\"p_42\" class=\"pid\"></i>Line 4 sets a constant for the <code>MAX</code> number of tickets. Changing this number does so across the entire program.<a href=\"#p_42\" class=\"pid\">42</a></li>\n  <li><i id=\"p_43\" class=\"pid\"></i>Line 7 launches a new token with a <code>MAX</code> supply. Alternatively, you could replace <code>tickets.id</code> with a known testnet token id string.<a href=\"#p_43\" class=\"pid\">43</a></li>\n  <li><i id=\"p_44\" class=\"pid\"></i>Line 9 welcomes you to the ticket sales revolution. Just make sure you <a href=\"https://youtu.be/Kb1ztV93dsE\" target=\"_blank\">print enough pamphlets</a>.<a href=\"#p_44\" class=\"pid\">44</a></li>\n</ul>\n<div class=\"note\">\n  <p><code>REACH_NO_WARN: 'Y'</code></p>\n  <p><i id=\"p_45\" class=\"pid\"></i>It is <em>very</em> important for you as a programmer to understand the warning messages Reach is giving you before you silence them. Many times, these warnings are indicative of critical DApp design flaws.<a href=\"#p_45\" class=\"pid\">45</a></p>\n  <p><i id=\"p_46\" class=\"pid\"></i>If you remove this from this particular program, Reach will warn you that you are using <code>stdlib.newTestAccount</code> and this cannot be used outside of devnet environments. When you move to TestNet, you'll need to get the users account via <code>stdlib.getDefaultAccount()</code>.<a href=\"#p_46\" class=\"pid\">46</a></p>\n</div>\n<p><i id=\"p_47\" class=\"pid\"></i>Now we'll fast forward to the end of our test suite and add the functionality for our <code>Admin</code>.<a href=\"#p_47\" class=\"pid\">47</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.mjs\">/examples/ticket-sales/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"await ctcA.p.Admin({\n  params: {\n    tok: tickets.id,\n    cost: stdlib.parseCurrency(10),\n    supply: MAX,\n  },\n  launched: async (contract) => {\n    console.log(`Ready at contract: ${contract}`);\n    await startBuyers();\n  },\n}),\nconsole.log('Exiting...');\" href=\"#\" id=\"copyBtn8\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"24\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-constant)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> ctcA.p.Admin({</span></li><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">  params</span><span style=\"color: var(--shiki-token-punctuation)\">:</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"26\"><span style=\"color: var(--shiki-color-text)\">    tok</span><span style=\"color: var(--shiki-token-punctuation)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">tickets</span><span style=\"color: var(--shiki-color-text)\">.id</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">    cost</span><span style=\"color: var(--shiki-token-punctuation)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">10</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">    supply</span><span style=\"color: var(--shiki-token-punctuation)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">MAX</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">  }</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">  launched</span><span style=\"color: var(--shiki-token-punctuation)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (contract) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"31\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Ready at contract: </span><span style=\"color: var(--shiki-token-keyword)\">${</span><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-color-text)\">contract</span></a><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"32\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">startBuyers</span><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"33\"><span style=\"color: var(--shiki-color-text)\">  }</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"34\"><span style=\"color: var(--shiki-color-text)\">})</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"35\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Exiting...'</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_48\" class=\"pid\"></i>Line 24 creates a promise with the <code>Admin</code> contract handle.<a href=\"#p_48\" class=\"pid\">48</a></li>\n  <li><i id=\"p_49\" class=\"pid\"></i>Lines 25-28 specify the parameters of our sale.<a href=\"#p_49\" class=\"pid\">49</a></li>\n  <li><i id=\"p_50\" class=\"pid\"></i>Line 30 defines our <code>launched</code> function, which starts the chain of API calls to our contract with <code>startBuyers()</code>.<a href=\"#p_50\" class=\"pid\">50</a></li>\n  <li><i id=\"p_51\" class=\"pid\"></i>Line 35 is useful to note our test suite reached its exit normally.<a href=\"#p_51\" class=\"pid\">51</a></li>\n</ul>\n<p><i id=\"p_52\" class=\"pid\"></i>Our frontend test suite <code>mjs</code> is now caught up to our Reach <code>rsh</code> file.<a href=\"#p_52\" class=\"pid\">52</a></p>\n<p><i id=\"p_53\" class=\"pid\"></i>Let's move back to the Reach file and actually create our API function.<a href=\"#p_53\" class=\"pid\">53</a></p>\n<p><i id=\"p_54\" class=\"pid\"></i>This program ends up being short and compact because of the <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span> control structure that we'll implement to allow access to our API functions in a looping construct.<a href=\"#p_54\" class=\"pid\">54</a></p>\n<p><i id=\"p_55\" class=\"pid\"></i>Read all about it in our <a href=\"/guide/parallelReduce/#guide-parallelReduce\">parallelReduce Guide</a>.<a href=\"#p_55\" class=\"pid\">55</a></p>\n<p><i id=\"p_56\" class=\"pid\"></i>In this case, we want the loop to allow the function to be callable until the contract is out of tokens. This is an important piece of information for our design.<a href=\"#p_56\" class=\"pid\">56</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.rsh\">/examples/ticket-sales/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  const [ticketsSold] = parallelReduce([0])\n    .invariant(balance() == cost * ticketsSold)\n    .invariant(balance(tok) == supply - ticketsSold)\n    .while(ticketsSold < supply)\" href=\"#\" id=\"copyBtn9\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> [</span><span style=\"color: var(--shiki-token-constant)\">ticketsSold</span><span style=\"color: var(--shiki-color-text)\">] </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-token-function)\">parallelReduce</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">0</span><span style=\"color: var(--shiki-color-text)\">])</span></li><li value=\"26\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_parallelReduce.invariant\" title=\"rsh: parallelReduce.invariant\"><span style=\"color: var(--shiki-token-function)\">.invariant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/compute/#rsh_balance\" title=\"rsh: balance\"><span style=\"color: var(--shiki-token-function)\">balance</span></a><span style=\"color: var(--shiki-color-text)\">() </span><a href=\"/rsh/compute/#rsh_==\" title=\"rsh: ==\"><span style=\"color: var(--shiki-token-keyword)\">==</span></a><span style=\"color: var(--shiki-color-text)\"> cost </span><a href=\"/rsh/compute/#rsh_*\" title=\"rsh: *\"><span style=\"color: var(--shiki-token-keyword)\">*</span></a><span style=\"color: var(--shiki-color-text)\"> ticketsSold)</span></li><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_parallelReduce.invariant\" title=\"rsh: parallelReduce.invariant\"><span style=\"color: var(--shiki-token-function)\">.invariant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/compute/#rsh_balance\" title=\"rsh: balance\"><span style=\"color: var(--shiki-token-function)\">balance</span></a><span style=\"color: var(--shiki-color-text)\">(tok) </span><a href=\"/rsh/compute/#rsh_==\" title=\"rsh: ==\"><span style=\"color: var(--shiki-token-keyword)\">==</span></a><span style=\"color: var(--shiki-color-text)\"> supply </span><a href=\"/rsh/compute/#rsh_-\" title=\"rsh: -\"><span style=\"color: var(--shiki-token-keyword)\">-</span></a><span style=\"color: var(--shiki-color-text)\"> ticketsSold)</span></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_parallelReduce.while\" title=\"rsh: parallelReduce.while\"><span style=\"color: var(--shiki-token-function)\">.while</span></a><span style=\"color: var(--shiki-color-text)\">(ticketsSold </span><a href=\"/rsh/compute/#rsh_%3C\" title=\"rsh: <\"><span style=\"color: var(--shiki-token-keyword)\">&lt;</span></a><span style=\"color: var(--shiki-color-text)\"> supply)</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_57\" class=\"pid\"></i>Line 25 declares a new <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span> and sets it up to track a single value <code>ticketsSold</code>, which is initialized to zero.<a href=\"#p_57\" class=\"pid\">57</a></li>\n  <li><i id=\"p_58\" class=\"pid\"></i>Line 26 states an <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_invariant\" title=\"rsh: invariant\"><span style=\"color: var(--shiki-color-text)\">invariant</span></a></span> about our loop that the network token balance will always equal <code>cost * ticketsSold</code>.<a href=\"#p_58\" class=\"pid\">58</a></li>\n  <li><i id=\"p_59\" class=\"pid\"></i>Line 27 states an <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_invariant\" title=\"rsh: invariant\"><span style=\"color: var(--shiki-color-text)\">invariant</span></a></span> about our loop that the non-network token balance will always equal the initial <code>supply - ticketsSold</code>.<a href=\"#p_59\" class=\"pid\">59</a></li>\n  <li><i id=\"p_60\" class=\"pid\"></i>Line 28 sets our <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_while\" title=\"rsh: while\"><span style=\"color: var(--shiki-token-keyword)\">while</span></a></span> loop to run until <code>ticketsSold == supply</code> at which point it will exit the <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span>.<a href=\"#p_60\" class=\"pid\">60</a></li>\n</ul>\n<p><i id=\"p_61\" class=\"pid\"></i>It is important to note the relationship between the values above.<a href=\"#p_61\" class=\"pid\">61</a></p>\n<p><i id=\"p_62\" class=\"pid\"></i>The Reach compiler will check your DApp for <em>all</em> of the possibilities related to your program values in an <em>unbounded</em> way, bound only by the limits of the data type you are working with.<a href=\"#p_62\" class=\"pid\">62</a></p>\n<p><i id=\"p_63\" class=\"pid\"></i>Reach will put bounds on those checks as determined by your verification checks and <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_invariant\" title=\"rsh: invariant\"><span style=\"color: var(--shiki-color-text)\">invariant</span></a></span>s.<a href=\"#p_63\" class=\"pid\">63</a></p>\n<p><i id=\"p_64\" class=\"pid\"></i>By tightly tracking all of the <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_invariant\" title=\"rsh: invariant\"><span style=\"color: var(--shiki-color-text)\">invariant</span></a></span> values in our <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span> LHS and <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_while\" title=\"rsh: while\"><span style=\"color: var(--shiki-token-keyword)\">while</span></a></span> loop -- and relating them to the contract balance of network tokens and non-network tokens, we can satisfy the Reach Verification Engine to produce no errors.<a href=\"#p_64\" class=\"pid\">64</a></p>\n<p><i id=\"p_65\" class=\"pid\"></i>Read more about <a href=\"/guide/assert/#guide-assert\">How and what to verify</a>.<a href=\"#p_65\" class=\"pid\">65</a></p>\n<p><i id=\"p_66\" class=\"pid\"></i>Understanding this relationship is key to building Reach DApps.<a href=\"#p_66\" class=\"pid\">66</a></p>\n<p><i id=\"p_67\" class=\"pid\"></i>Now we can actually define our API function.<a href=\"#p_67\" class=\"pid\">67</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.rsh\">/examples/ticket-sales/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"    .api_(B.buyTicket, () => {\n      return[cost, (ret) => {\n        transfer(1, tok).to(this);\n        ret(null);\n        return [ticketsSold + 1];\n      }];\n    });\n  transfer(cost * ticketsSold).to(A);\" href=\"#\" id=\"copyBtn10\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">.api_</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">.buyTicket</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">      </span><a href=\"/rsh/compute/#rsh_return\" title=\"rsh: return\"><span style=\"color: var(--shiki-token-keyword)\">return</span></a><span style=\"color: var(--shiki-color-text)\">[cost</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> (ret) </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"31\"><span style=\"color: var(--shiki-color-text)\">        </span><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-token-function)\">transfer</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">1</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> tok)</span><a href=\"/rsh/consensus/#rsh_transfer.to\" title=\"rsh: transfer.to\"><span style=\"color: var(--shiki-token-function)\">.to</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/compute/#rsh_this\" title=\"rsh: this\"><span style=\"color: var(--shiki-token-constant)\">this</span></a><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"32\"><span style=\"color: var(--shiki-color-text)\">        </span><span style=\"color: var(--shiki-token-function)\">ret</span><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/compute/#rsh_null\" title=\"rsh: null\"><span style=\"color: var(--shiki-token-constant)\">null</span></a><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"33\"><span style=\"color: var(--shiki-color-text)\">        </span><a href=\"/rsh/compute/#rsh_return\" title=\"rsh: return\"><span style=\"color: var(--shiki-token-keyword)\">return</span></a><span style=\"color: var(--shiki-color-text)\"> [ticketsSold </span><a href=\"/rsh/compute/#rsh_+\" title=\"rsh: +\"><span style=\"color: var(--shiki-token-keyword)\">+</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">1</span><span style=\"color: var(--shiki-color-text)\">];</span></li><li value=\"34\"><span style=\"color: var(--shiki-color-text)\">      }];</span></li><li value=\"35\"><span style=\"color: var(--shiki-color-text)\">    });</span></li><li value=\"36\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-token-function)\">transfer</span></a><span style=\"color: var(--shiki-color-text)\">(cost </span><a href=\"/rsh/compute/#rsh_*\" title=\"rsh: *\"><span style=\"color: var(--shiki-token-keyword)\">*</span></a><span style=\"color: var(--shiki-color-text)\"> ticketsSold)</span><a href=\"/rsh/consensus/#rsh_transfer.to\" title=\"rsh: transfer.to\"><span style=\"color: var(--shiki-token-function)\">.to</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">A</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_68\" class=\"pid\"></i>Line 29 defines an API macro <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">.api_</span></span> from the <code>B</code> API with the name <code>buyTicket</code>. It takes no parameters.<a href=\"#p_68\" class=\"pid\">68</a></li>\n  <li><i id=\"p_69\" class=\"pid\"></i>Line 30 starts the outer <span class=\"snip\"><a href=\"/rsh/compute/#rsh_return\" title=\"rsh: return\"><span style=\"color: var(--shiki-token-keyword)\">return</span></a></span>. Here we sepecify a <code>PAY_EXPR</code> of <code>cost</code> and declare our <span class=\"snip\"><a href=\"/rsh/compute/#rsh_return\" title=\"rsh: return\"><span style=\"color: var(--shiki-token-keyword)\">return</span></a></span> function <code>ret</code>.<a href=\"#p_69\" class=\"pid\">69</a></li>\n  <li><i id=\"p_70\" class=\"pid\"></i>Line 31 sends one non-network token (ticket) to the API caller.<a href=\"#p_70\" class=\"pid\">70</a></li>\n  <li><i id=\"p_71\" class=\"pid\"></i>Line 32 returns <span class=\"snip\"><a href=\"/rsh/compute/#rsh_null\" title=\"rsh: null\"><span style=\"color: var(--shiki-token-constant)\">null</span></a></span> to the caller.<a href=\"#p_71\" class=\"pid\">71</a></li>\n  <li><i id=\"p_72\" class=\"pid\"></i>Line 33 is our inner <span class=\"snip\"><a href=\"/rsh/compute/#rsh_return\" title=\"rsh: return\"><span style=\"color: var(--shiki-token-keyword)\">return</span></a></span>, where we increment <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span> LHS value <code>ticketsSold</code>.<a href=\"#p_72\" class=\"pid\">72</a></li>\n</ul>\n<div class=\"note\">\n  <p><i id=\"p_73\" class=\"pid\"></i>On incrementing, Reach <em>does not</em> support incrementing with <code>i++</code>, because this is a mutation of <code>i</code> and Reach insists that we always return new, updated values.<a href=\"#p_73\" class=\"pid\">73</a></p>\n  <p><i id=\"p_74\" class=\"pid\"></i>Use <code>i + 1</code> instead.<a href=\"#p_74\" class=\"pid\">74</a></p>\n</div>\n<p><i id=\"p_75\" class=\"pid\"></i>That is all for our API member function <code>buyTicket</code>.<a href=\"#p_75\" class=\"pid\">75</a></p>\n<p><i id=\"p_76\" class=\"pid\"></i>After this loop terminates, the next step is to transfer the network token balance to the ticket seller.<a href=\"#p_76\" class=\"pid\">76</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.rsh\">/examples/ticket-sales/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  commit();\n  exit();\n});\" href=\"#\" id=\"copyBtn11\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"37\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"38\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"39\"><span style=\"color: var(--shiki-color-text)\">});</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_77\" class=\"pid\"></i>Line 37 transfers the exact known balance back to the seller. It is bad practice to use <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-token-function)\">transfer</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/compute/#rsh_balance\" title=\"rsh: balance\"><span style=\"color: var(--shiki-token-function)\">balance</span></a><span style=\"color: var(--shiki-color-text)\">())</span><a href=\"/rsh/consensus/#rsh_transfer.to\" title=\"rsh: transfer.to\"><span style=\"color: var(--shiki-token-function)\">.to</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">A</span><span style=\"color: var(--shiki-color-text)\">)</span></span> here. Instead, use a formula that evaluates to the known balance.<a href=\"#p_77\" class=\"pid\">77</a></li>\n  <li><i id=\"p_78\" class=\"pid\"></i>Line 38-39 has us <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-color-text)\">commit</span></a></span> and <span class=\"snip\"><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-color-text)\">exit</span></a></span> the DApp.<a href=\"#p_78\" class=\"pid\">78</a></li>\n</ul>\n<p><i id=\"p_79\" class=\"pid\"></i>We are almost done. The final step is to test our API function by making some calls in the frontend <code>mjs</code> file.<a href=\"#p_79\" class=\"pid\">79</a></p>\n<p><i id=\"p_80\" class=\"pid\"></i>To test our users, we need functions to create accounts and contract information.<a href=\"#p_80\" class=\"pid\">80</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales/index.mjs\">/examples/ticket-sales/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const startBuyers = async () => {\n  const runBuyer = async (i) => {\n    const acc = await stdlib.newTestAccount(stdlib.parseCurrency(100));\n    const ctc = acc.contract(backend, ctcA.getInfo());\n    await acc.tokenAccept(tickets.id);\n    await ctc.apis.Buyer.buyTicket();\n    console.log(`Tickets sold: ${i}`);\n  }// end of runBuyer\n  for(let i = 0; i < MAX; i++){\n    await runBuyer(i);\n  }\n}// end of startBuyers\" href=\"#\" id=\"copyBtn12\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"11\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">startBuyers</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> () </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"12\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">runBuyer</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (i) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"13\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">100</span><span style=\"color: var(--shiki-color-text)\">));</span></li><li value=\"14\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">ctcA</span><a href=\"/frontend/#js_getInfo\" title=\"js: getInfo\"><span style=\"color: var(--shiki-token-function)\">.getInfo</span></a><span style=\"color: var(--shiki-color-text)\">());</span></li><li value=\"15\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_tokenAccept\" title=\"js: tokenAccept\"><span style=\"color: var(--shiki-token-function)\">.tokenAccept</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">tickets</span><span style=\"color: var(--shiki-color-text)\">.id);</span></li><li value=\"16\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.apis\" title=\"js: ctc.apis\"><span style=\"color: var(--shiki-token-constant)\">apis</span></a><span style=\"color: var(--shiki-token-function)\">.</span><span style=\"color: var(--shiki-token-constant)\">Buyer</span><span style=\"color: var(--shiki-token-function)\">.buyTicket</span><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"17\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Tickets sold: </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">i</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"18\"><span style=\"color: var(--shiki-color-text)\">  }</span><span style=\"color: var(--shiki-token-comment)\">// end of runBuyer</span></li><li value=\"19\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">for</span><span style=\"color: var(--shiki-color-text)\">(let i </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">0</span><span style=\"color: var(--shiki-color-text)\">; i </span><span style=\"color: var(--shiki-token-keyword)\">&lt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">MAX</span><span style=\"color: var(--shiki-color-text)\">; i</span><span style=\"color: var(--shiki-token-keyword)\">++</span><span style=\"color: var(--shiki-color-text)\">){</span></li><li value=\"20\"><span style=\"color: var(--shiki-color-text)\">    await </span><span style=\"color: var(--shiki-token-function)\">runBuyer</span><span style=\"color: var(--shiki-color-text)\">(i);</span></li><li value=\"21\"><span style=\"color: var(--shiki-color-text)\">  }</span></li><li value=\"22\"><span style=\"color: var(--shiki-color-text)\">}</span><span style=\"color: var(--shiki-token-comment)\">// end of startBuyers</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_81\" class=\"pid\"></i>Line 11 is the outer function that will be called from <code>launched</code> to start making API calls.<a href=\"#p_81\" class=\"pid\">81</a></li>\n  <li><i id=\"p_82\" class=\"pid\"></i>Line 12 will allow for repeating actions for individual users.<a href=\"#p_82\" class=\"pid\">82</a></li>\n  <li><i id=\"p_83\" class=\"pid\"></i>Line 13-14 creates an account, funds it, and connects it to the Admins contract instance.<a href=\"#p_83\" class=\"pid\">83</a></li>\n  <li><i id=\"p_84\" class=\"pid\"></i>Line 15 has the account opt-in to our ticket token.<a href=\"#p_84\" class=\"pid\">84</a></li>\n  <li><i id=\"p_85\" class=\"pid\"></i>Line 16 is our API call. It uses the contract handle to access the <code>Buyer.buyTicket</code> function.<a href=\"#p_85\" class=\"pid\">85</a></li>\n  <li><i id=\"p_86\" class=\"pid\"></i>Line 19-20 is a looping construct for easily repeating users up to <code>MAX</code>.<a href=\"#p_86\" class=\"pid\">86</a></li>\n</ul>\n<p><i id=\"p_87\" class=\"pid\"></i>That is everything you need for a decentralized <a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/ticket-sales\" target=\"_blank\">ticket-sales</a> contract in Reach.<a href=\"#p_87\" class=\"pid\">87</a></p>\n<p><i id=\"p_88\" class=\"pid\"></i>Let's run it..<a href=\"#p_88\" class=\"pid\">88</a></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"./reach run\" href=\"#\" id=\"copyBtn13\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> ./reach run</span></li></ol></pre>\n<div class=\"note\">\n  <p><i id=\"p_89\" class=\"pid\"></i>If you have not specified a network via <code>reach config</code>, you will need to specify one with <code>REACH_CONNECTOR_MODE</code>.<a href=\"#p_89\" class=\"pid\">89</a></p>\n</div>\n<p><i id=\"p_90\" class=\"pid\"></i>The output looks something like:<a href=\"#p_90\" class=\"pid\">90</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Welcome to the ticket distributor\nLets get you a ticket\nReady at contract: 407\nTickets sold: 0\nTickets sold: 1\nTickets sold: 2\nTickets sold: 3\nTickets sold: 4\nTickets sold: 5\nTickets sold: 6\nTickets sold: 7\nTickets sold: 8\nTickets sold: 9\nTickets sold: 10\nTickets sold: 11\nTickets sold: 12\nTickets sold: 13\nTickets sold: 14\nTickets sold: 15\nTickets sold: 16\nTickets sold: 17\nTickets sold: 18\nTickets sold: 19\nTickets sold: 20\nTickets sold: 21\nTickets sold: 22\nTickets sold: 23\nTickets sold: 24\nTickets sold: 25\nTickets sold: 26\nTickets sold: 27\nTickets sold: 28\nTickets sold: 29\nTickets sold: 30\nTickets sold: 31\nTickets sold: 32\nTickets sold: 33\nTickets sold: 34\nTickets sold: 35\nTickets sold: 36\nTickets sold: 37\nTickets sold: 38\nTickets sold: 39\nTickets sold: 40\nTickets sold: 41\nTickets sold: 42\nTickets sold: 43\nTickets sold: 44\nTickets sold: 45\nTickets sold: 46\nTickets sold: 47\nTickets sold: 48\nTickets sold: 49\nExiting...\" href=\"#\" id=\"copyBtn14\" title=\"Copy to clipboard\"></a></div><ol class=\"snippet\"><li value=\"1\">Welcome to the ticket distributor</li><li value=\"2\">Lets get you a ticket</li><li value=\"3\">Ready at contract: 407</li><li value=\"4\">Tickets sold: 0</li><li value=\"5\">Tickets sold: 1</li><li value=\"6\">Tickets sold: 2</li><li value=\"7\">Tickets sold: 3</li><li value=\"8\">Tickets sold: 4</li><li value=\"9\">Tickets sold: 5</li><li value=\"10\">Tickets sold: 6</li><li value=\"11\">Tickets sold: 7</li><li value=\"12\">Tickets sold: 8</li><li value=\"13\">Tickets sold: 9</li><li value=\"14\">Tickets sold: 10</li><li value=\"15\">Tickets sold: 11</li><li value=\"16\">Tickets sold: 12</li><li value=\"17\">Tickets sold: 13</li><li value=\"18\">Tickets sold: 14</li><li value=\"19\">Tickets sold: 15</li><li value=\"20\">Tickets sold: 16</li><li value=\"21\">Tickets sold: 17</li><li value=\"22\">Tickets sold: 18</li><li value=\"23\">Tickets sold: 19</li><li value=\"24\">Tickets sold: 20</li><li value=\"25\">Tickets sold: 21</li><li value=\"26\">Tickets sold: 22</li><li value=\"27\">Tickets sold: 23</li><li value=\"28\">Tickets sold: 24</li><li value=\"29\">Tickets sold: 25</li><li value=\"30\">Tickets sold: 26</li><li value=\"31\">Tickets sold: 27</li><li value=\"32\">Tickets sold: 28</li><li value=\"33\">Tickets sold: 29</li><li value=\"34\">Tickets sold: 30</li><li value=\"35\">Tickets sold: 31</li><li value=\"36\">Tickets sold: 32</li><li value=\"37\">Tickets sold: 33</li><li value=\"38\">Tickets sold: 34</li><li value=\"39\">Tickets sold: 35</li><li value=\"40\">Tickets sold: 36</li><li value=\"41\">Tickets sold: 37</li><li value=\"42\">Tickets sold: 38</li><li value=\"43\">Tickets sold: 39</li><li value=\"44\">Tickets sold: 40</li><li value=\"45\">Tickets sold: 41</li><li value=\"46\">Tickets sold: 42</li><li value=\"47\">Tickets sold: 43</li><li value=\"48\">Tickets sold: 44</li><li value=\"49\">Tickets sold: 45</li><li value=\"50\">Tickets sold: 46</li><li value=\"51\">Tickets sold: 47</li><li value=\"52\">Tickets sold: 48</li><li value=\"53\">Tickets sold: 49</li><li value=\"54\">Exiting...</li></ol></pre>\n<p><i id=\"p_91\" class=\"pid\"></i>Again, the number of tickets sold here can be changed by editing the <code>MAX</code> constant.<a href=\"#p_91\" class=\"pid\">91</a></p>\n<p><i id=\"p_92\" class=\"pid\"></i>Next, we'll start working on a frontend to demonstrate integrating this Reach DApp with React.<a href=\"#p_92\" class=\"pid\">92</a></p>\n<p><i id=\"p_93\" class=\"pid\"></i>This code is open source. Nudge, nudge, wink, wink.<a href=\"#p_93\" class=\"pid\">93</a></p>\n<p><i id=\"p_94\" class=\"pid\"></i>Someone use it to unseat Ticketmaster, please.<a href=\"#p_94\" class=\"pid\">94</a></p>\n<p><i id=\"p_95\" class=\"pid\"></i>We are tired of paying $3k USD for Taylor Swift tickets.<a href=\"#p_95\" class=\"pid\">95</a></p>","<ul><li class=\"dynamic\"><a href=\"#ticket-sales\">Ticket Sales</a></li></ul>"]
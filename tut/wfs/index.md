[{"bookPath":"tut","title":"Wisdom For Sale","titleId":"wfs","hasOtp":true,"hasPageHeader":true},"<p>\n  <i id=\"p_0\" class=\"pid\"></i>Wisdom for Sale is a command-line and Web-based application that enables two participants (a <code>seller</code> and a <code>buyer</code>) to trade wise expressions for tokens via a Reach Decentralized Application (DApp).\n  Reach programs are built using a Docker container on your computer.\n  If you need help installing Reach and its prerequisites then get started at our <a href=\"/quickstart/#quickstart\">Quick Installation Guide</a>.<a href=\"#p_0\" class=\"pid\">0</a>\n</p>\n<p><i id=\"p_1\" class=\"pid\"></i>Wisdom For Sale creates and funds two accounts (one for each participant), enables the <code>seller</code> and <code>buyer</code> to make a transaction, and then exits.<a href=\"#p_1\" class=\"pid\">1</a></p>\n<h1 id=\"wfs-1\" class=\"refHeader\">Learning Objectives<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-1\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_2\" class=\"pid\"></i>At the end of this tutorial you will be able to:<a href=\"#p_2\" class=\"pid\">2</a></p>\n<ol>\n  <li><i id=\"p_3\" class=\"pid\"></i>Define essential Reach terms.<a href=\"#p_3\" class=\"pid\">3</a></li>\n  <li><i id=\"p_4\" class=\"pid\"></i>Build a Reach command-line DApp.<a href=\"#p_4\" class=\"pid\">4</a></li>\n  <li><i id=\"p_5\" class=\"pid\"></i>Convert the command-line DApp into a vanilla Web-app.<a href=\"#p_5\" class=\"pid\">5</a></li>\n</ol>\n<h1 id=\"wfs-2\" class=\"refHeader\">Reach Modes<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-2\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_6\" class=\"pid\"></i>Reach programs (the <code>index.rsh</code> portion of your Reach DApp) are organized into four modes: <code>Init Mode</code>, <code>Step Mode</code>, <code>Local Step Mode</code>, and <code>Consensus Step Mode</code>.\n  Consider this diagram:<a href=\"#p_6\" class=\"pid\">6</a>\n</p>\n<p>\n  <img src=\"/tut/wfs/modes.png\" alt=\"Reach mode diagram\">\n</p>\n<p>\n  <i id=\"p_7\" class=\"pid\"></i>The dark blue boxes in the diagram represent modes.\n  The light blue boxes represent actions (functions) permitted within the mode.\n  The red text represents functions that cause transitions between modes.<a href=\"#p_7\" class=\"pid\">7</a>\n</p>\n<h2 id=\"wfs-3\" class=\"refHeader\">Reach Mode Definitions<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-3\"><span class=\"icon icon-link\"></span></a></h2>\n<h3 id=\"wfs-4\" class=\"refHeader\">Init Mode<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-4\"><span class=\"icon icon-link\"></span></a></h3>\n<p><i id=\"p_8\" class=\"pid\"></i>Application Initialization defines participants and views.<a href=\"#p_8\" class=\"pid\">8</a></p>\n<div class=\"note\">\n  <p><i id=\"p_9\" class=\"pid\"></i>If you want to see the entire program from the start, skip to the section <a href=\"/tut/wfs/#wfs-20\">View the contract</a> later in this tutorial.<a href=\"#p_9\" class=\"pid\">9</a></p>\n</div>\n<p><i id=\"p_10\" class=\"pid\"></i>Lines 2 and 3 below occur in the <code>App Init</code> section of the program:<a href=\"#p_10\" class=\"pid\">10</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"export const main = Reach.App(() => {\n  const S = Participant('Seller', sellerInteract);\n  const B = Participant('Buyer', buyerInteract);\n  init();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export\" title=\"js: export\"><span style=\"color: var(--shiki-token-keyword)\">export</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">main</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">Reach</span><span style=\"color: var(--shiki-token-function)\">.App</span><span style=\"color: var(--shiki-color-text)\">(() </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"2\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">Participant</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Seller'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> sellerInteract);</span></li><li value=\"3\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">Participant</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Buyer'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> buyerInteract);</span></li><li value=\"4\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">init</span><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n<p><i id=\"p_11\" class=\"pid\"></i>The <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-color-text)\">init</span></a></span> function transitions the program from <code>App Init</code> to <code>Step</code>.<a href=\"#p_11\" class=\"pid\">11</a></p>\n<h3 id=\"wfs-5\" class=\"refHeader\">Step Mode<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-5\"><span class=\"icon icon-link\"></span></a></h3>\n<p>\n  <i id=\"p_12\" class=\"pid\"></i>A <code>Step</code> specifies actions taken by each and every participant.\n  <code>exit()</code>, for example, is a function that must occur within a step, and it means that each and every participant exits the contract after which that instance of the contract becomes forever unavailable.<a href=\"#p_12\" class=\"pid\">12</a>\n</p>\n<h3 id=\"wfs-6\" class=\"refHeader\">Local Step Mode<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-6\"><span class=\"icon icon-link\"></span></a></h3>\n<p>\n  <i id=\"p_13\" class=\"pid\"></i>A <code>Local Step</code> specifies actions taken by a single participant.\n  Local steps must occur within the body of <span class=\"snip\"><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-color-text)\">only</span></a></span> or <span class=\"snip\"><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-color-text)\">each</span></a></span> statements.\n  Here is an example:<a href=\"#p_13\" class=\"pid\">13</a>\n</p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"S.only(() => { const price = declassify(interact.price); });\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-function)\">.only</span><span style=\"color: var(--shiki-color-text)\">(() </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">price</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">declassify</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">interact</span><span style=\"color: var(--shiki-color-text)\">.price); });</span></li></ol></pre>\n<p><i id=\"p_14\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">only</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> and <span class=\"snip\"><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> transition to a local step and then back to the originating mode (either <code>Step</code> or <code>Consensus Step</code>).<a href=\"#p_14\" class=\"pid\">14</a></p>\n<h3 id=\"wfs-7\" class=\"refHeader\">Consensus Step Mode<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-7\"><span class=\"icon icon-link\"></span></a></h3>\n<p>\n  <i id=\"p_15\" class=\"pid\"></i>A <code>Consensus Step</code> specifies actions taken by the contract itself.\n  Later in this tutorial, the contract calls <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-color-text)\">transfer</span></a></span> to transfer funds from the contract to the <code>seller</code>.<a href=\"#p_15\" class=\"pid\">15</a>\n</p>\n<h1 id=\"wfs-8\" class=\"refHeader\">Pre-coding preparation<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-8\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_16\" class=\"pid\"></i>Before you start to code, it is a good idea to think about the application that you want to create and write down a plan for the actions.\n  This makes it easier to code the app, add in all of the functionality, and be less likely to make a mistake.<a href=\"#p_16\" class=\"pid\">16</a>\n</p>\n<p><i id=\"p_17\" class=\"pid\"></i>Wisdom for Sale requirements:<a href=\"#p_17\" class=\"pid\">17</a></p>\n<ol>\n  <li><i id=\"p_18\" class=\"pid\"></i>Wisdom for Sale requires two participants, a <code>Buyer</code> and a <code>Seller</code>.<a href=\"#p_18\" class=\"pid\">18</a></li>\n  <li><i id=\"p_19\" class=\"pid\"></i>The <code>buyer</code> will need a pay function and a function that displays the wisdom.<a href=\"#p_19\" class=\"pid\">19</a></li>\n  <li><i id=\"p_20\" class=\"pid\"></i>The <code>seller</code> will need a function to input the wisdom, and to put it up for sale.<a href=\"#p_20\" class=\"pid\">20</a></li>\n  <li><i id=\"p_21\" class=\"pid\"></i>Both participants will be publishing information: the seller will publish the wisdom and the price, the buyer will publish their decision to purchase.<a href=\"#p_21\" class=\"pid\">21</a></li>\n  <li><i id=\"p_22\" class=\"pid\"></i>The <code>buyer</code> needs to be able to decide to NOT purchase the wisdom, so we need to create a function for cancelling the sale.<a href=\"#p_22\" class=\"pid\">22</a></li>\n  <li><i id=\"p_23\" class=\"pid\"></i>If the <code>buyer</code> does decide to buy the wisdom, then there needs to be a function that reports the payment to both the <code>seller</code> and the <code>buyer</code>.<a href=\"#p_23\" class=\"pid\">23</a></li>\n</ol>\n<h1 id=\"wfs-9\" class=\"refHeader\">Examine the transaction<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-9\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_24\" class=\"pid\"></i>The following diagram represents the Wisdom for Sale application flow:<a href=\"#p_24\" class=\"pid\">24</a></p>\n<p>\n  <img src=\"/tut/wfs/seller-buyer.png\" alt=\"Seller and buyer roles\">\n</p>\n<p>\n  <i id=\"p_25\" class=\"pid\"></i>This particular transaction took place on an Algorand devnet.\n  The Algorand cryptocurrency standard token unit is the <code>ALGO</code>.\n  As indicated by the final balances in the diagram, the <code>seller</code> received 0.006 ALGO less than the agreed upon price, and the <code>buyer</code> paid 0.003 ALGO more.\n  These expenses represent <code>fees</code>, the cost of doing business on a consensus network.\n  The <code>seller</code> paid a little more fees than the <code>buyer</code> because the <code>seller</code> paid a small fee to deploy the contract.<a href=\"#p_25\" class=\"pid\">25</a>\n</p>\n<h1 id=\"wfs-10\" class=\"refHeader\">Create the files<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-10\"><span class=\"icon icon-link\"></span></a></h1>\n<ol>\n  <li>\n    <p><i id=\"p_26\" class=\"pid\"></i>Create a project folder and <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">cd</span></span> into it via the command line.<a href=\"#p_26\" class=\"pid\">26</a></p>\n    <pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"mkdir -p ~/reach/wisdom &amp;&amp; cd ~/reach/wisdom\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> mkdir </span><span style=\"color: var(--shiki-token-keyword)\">-</span><span style=\"color: var(--shiki-color-text)\">p </span><span style=\"color: var(--shiki-token-keyword)\">~</span><span style=\"color: var(--shiki-color-text)\">/reach/wisdom </span><span style=\"color: var(--shiki-token-keyword)\">&amp;&amp;</span><span style=\"color: var(--shiki-color-text)\"> cd </span><span style=\"color: var(--shiki-token-keyword)\">~</span><span style=\"color: var(--shiki-color-text)\">/reach/wisdom</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_27\" class=\"pid\"></i>Create <code>index.mjs</code> and <code>index.rsh</code> in your project folder and open both new files in your preferred editor.<a href=\"#p_27\" class=\"pid\">27</a></p>\n    <p>\n      <img src=\"/tut/wfs/vscode-open.png\" alt=\"Open VSCode\">\n    </p>\n  </li>\n</ol>\n<h2 id=\"wfs-11\" class=\"refHeader\">Create the Frontend<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-11\"><span class=\"icon icon-link\"></span></a></h2>\n<p><i id=\"p_28\" class=\"pid\"></i>Type the following code into the file named <code>index.mjs</code>.<a href=\"#p_28\" class=\"pid\">28</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.mjs\">/examples/wisdom-1-starter/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"import { loadStdlib } from '@reach-sh/stdlib';\nimport * as backend from './build/index.main.mjs';\n\nconst role = 'seller';\nconsole.log(`Your role is ${role}`);\n\nconst stdlib = loadStdlib(process.env);\nconsole.log(`The consensus network is ${stdlib.connector}.`);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> { loadStdlib } </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'@reach-sh/stdlib'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">*</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">as</span><span style=\"color: var(--shiki-color-text)\"> backend </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'./build/index.main.mjs'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"3\"></li><li value=\"4\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">role</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"5\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your role is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">role</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"6\"></li><li value=\"7\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_loadStdlib\" title=\"js: loadStdlib\"><span style=\"color: var(--shiki-token-function)\">loadStdlib</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.env);</span></li><li value=\"8\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The consensus network is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.connector\" title=\"js: stdlib.connector\"><span style=\"color: var(--shiki-color-text)\">.connector</span></a><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_29\" class=\"pid\"></i>Line 1: Import the Reach JS Standard Library loader.<a href=\"#p_29\" class=\"pid\">29</a></li>\n  <li><i id=\"p_30\" class=\"pid\"></i>Line 2: Import the JS backend compiled from <code>index.rsh</code>.<a href=\"#p_30\" class=\"pid\">30</a></li>\n  <li><i id=\"p_31\" class=\"pid\"></i>Line 4: Hard-code the role. You will change this later.<a href=\"#p_31\" class=\"pid\">31</a></li>\n  <li><i id=\"p_32\" class=\"pid\"></i>Line 5: Display the role.<a href=\"#p_32\" class=\"pid\">32</a></li>\n  <li><i id=\"p_33\" class=\"pid\"></i>Line 7: Load the Reach JS Stdlib for the consensus network specified by <span class=\"snip\"><a href=\"/tool/#cmd_REACH_CONNECTOR_MODE\" title=\"cmd: REACH_CONNECTOR_MODE\"><span style=\"color: var(--shiki-color-text)\">REACH_CONNECTOR_MODE</span></a></span> env var.<a href=\"#p_33\" class=\"pid\">33</a></li>\n  <li><i id=\"p_34\" class=\"pid\"></i>Line 8: Display the consensus network type.<a href=\"#p_34\" class=\"pid\">34</a></li>\n</ul>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.mjs\">/examples/wisdom-1-starter/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const commonInteract = {};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"10\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {};</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_35\" class=\"pid\"></i>Line 10: Define an empty (for now) common interaction object.<a href=\"#p_35\" class=\"pid\">35</a></li>\n</ul>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.mjs\">/examples/wisdom-1-starter/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Seller\nif (role === 'seller') {\n  const sellerInteract = {\n    ...commonInteract,\n  };\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"12\"><span style=\"color: var(--shiki-token-comment)\">// Seller</span></li><li value=\"13\"><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (role </span><span style=\"color: var(--shiki-token-keyword)\">===</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\">) {</span></li><li value=\"14\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"15\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"16\"><span style=\"color: var(--shiki-color-text)\">  };</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_36\" class=\"pid\"></i>Line 13: Code for when you run this app as the <code>seller</code>.<a href=\"#p_36\" class=\"pid\">36</a></li>\n  <li><i id=\"p_37\" class=\"pid\"></i>Line 14: Define an empty (for now) Seller interaction object.<a href=\"#p_37\" class=\"pid\">37</a></li>\n</ul>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.mjs\">/examples/wisdom-1-starter/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  const acc = await stdlib.newTestAccount(stdlib.parseCurrency(1000));\n  const ctc = acc.contract(backend);\n  await ctc.participants.Seller(sellerInteract);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"18\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">1000</span><span style=\"color: var(--shiki-color-text)\">));</span></li><li value=\"19\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend);</span></li><li value=\"20\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.participants\" title=\"js: ctc.participants\"><span style=\"color: var(--shiki-token-constant)\">participants</span></a><span style=\"color: var(--shiki-token-function)\">.Seller</span><span style=\"color: var(--shiki-color-text)\">(sellerInteract);</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_38\" class=\"pid\"></i>Line 18: Create an account for the <code>seller</code>. <span class=\"snip\"><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></a></span> transforms units from standard to atomic.<a href=\"#p_38\" class=\"pid\">38</a></li>\n  <li><i id=\"p_39\" class=\"pid\"></i>Line 19: Get a reference to the contract.<a href=\"#p_39\" class=\"pid\">39</a></li>\n  <li><i id=\"p_40\" class=\"pid\"></i>Line 20: Initiate interaction with contract for <code>seller</code>.<a href=\"#p_40\" class=\"pid\">40</a></li>\n</ul>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.mjs\">/examples/wisdom-1-starter/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Buyer\n} else {\n  const buyerInteract = {\n    ...commonInteract,\n  };\n\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"22\"><span style=\"color: var(--shiki-token-comment)\">// Buyer</span></li><li value=\"23\"><span style=\"color: var(--shiki-color-text)\">} </span><span style=\"color: var(--shiki-token-keyword)\">else</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"24\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"26\"><span style=\"color: var(--shiki-color-text)\">  };</span></li><li value=\"27\"></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_41\" class=\"pid\"></i>Line 23: Code for when you run this app as the <code>buyer</code>.<a href=\"#p_41\" class=\"pid\">41</a></li>\n  <li><i id=\"p_42\" class=\"pid\"></i>Line 24 and 25: Define empty (for now) Buyer interaction object.<a href=\"#p_42\" class=\"pid\">42</a></li>\n</ul>\n<h2 id=\"wfs-12\" class=\"refHeader\">Create the Backened<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-12\"><span class=\"icon icon-link\"></span></a></h2>\n<p><i id=\"p_43\" class=\"pid\"></i>Type the following into <code>index.rsh</code>:<a href=\"#p_43\" class=\"pid\">43</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.rsh\">/examples/wisdom-1-starter/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"'reach 0.1';\n\nconst commonInteract = {};\nconst sellerInteract = {\n  ...commonInteract,\n};\nconst buyerInteract = {\n  ...commonInteract,\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-string-expression)\">'reach 0.1'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"></li><li value=\"3\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {};</span></li><li value=\"4\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">};</span></li><li value=\"7\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"8\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"9\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_44\" class=\"pid\"></i>Line 1: Instruction to the compiler.<a href=\"#p_44\" class=\"pid\">44</a></li>\n  <li><i id=\"p_45\" class=\"pid\"></i>Lines 3-9: Define empty (for now) participant interaction interface objects.<a href=\"#p_45\" class=\"pid\">45</a></li>\n</ul>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.rsh\">/examples/wisdom-1-starter/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"export const main = Reach.App(() => {\n  const S = Participant('Seller', sellerInteract);\n  const B = Participant('Buyer', buyerInteract);\n  init();\n\n  exit();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"11\"><a href=\"/rsh/module/#rsh_export\" title=\"rsh: export\"><span style=\"color: var(--shiki-token-keyword)\">export</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">main</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/module/#rsh_Reach\" title=\"rsh: Reach\"><span style=\"color: var(--shiki-token-constant)\">Reach</span></a><a href=\"/rsh/module/#rsh_Reach.App\" title=\"rsh: Reach.App\"><span style=\"color: var(--shiki-token-function)\">.App</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"12\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Seller'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> sellerInteract);</span></li><li value=\"13\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Buyer'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> buyerInteract);</span></li><li value=\"14\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"15\"></li><li value=\"16\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n<ul>\n  <li><i id=\"p_46\" class=\"pid\"></i>Line 11: Reach standard application initialization.<a href=\"#p_46\" class=\"pid\">46</a></li>\n  <li><i id=\"p_47\" class=\"pid\"></i>Line 12: Define a constant to represent the <code>seller</code>.<a href=\"#p_47\" class=\"pid\">47</a></li>\n  <li><i id=\"p_48\" class=\"pid\"></i>Line 13: Define a constant to represent the <code>buyer</code>.<a href=\"#p_48\" class=\"pid\">48</a></li>\n  <li><i id=\"p_49\" class=\"pid\"></i>Line 14: Finalize participant and other options, and proceed to a Reach step.<a href=\"#p_49\" class=\"pid\">49</a></li>\n  <li><i id=\"p_50\" class=\"pid\"></i>Line 16: Terminate computation.<a href=\"#p_50\" class=\"pid\">50</a></li>\n</ul>\n<h1 id=\"wfs-13\" class=\"refHeader\">Run the DApp<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-13\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_51\" class=\"pid\"></i>Reach can currently compile the DApp to run on any of the following consensus network types:<a href=\"#p_51\" class=\"pid\">51</a></p>\n<ul>\n  <li><i id=\"p_52\" class=\"pid\"></i><code>ALGO</code> -- Algorand<a href=\"#p_52\" class=\"pid\">52</a></li>\n  <li><i id=\"p_53\" class=\"pid\"></i><code>CFX</code> -- Conflux<a href=\"#p_53\" class=\"pid\">53</a></li>\n  <li><i id=\"p_54\" class=\"pid\"></i><code>ETH</code> -- Ethereum (and other EVM-based networks)<a href=\"#p_54\" class=\"pid\">54</a></li>\n</ul>\n<ol>\n  <li>\n    <p>\n      <i id=\"p_55\" class=\"pid\"></i>Instruct the Reach compiler to connect to a network by setting the <span class=\"snip\"><a href=\"/tool/#cmd_REACH_CONNECTOR_MODE\" title=\"cmd: REACH_CONNECTOR_MODE\"><span style=\"color: var(--shiki-color-text)\">REACH_CONNECTOR_MODE</span></a></span> environment variable.\n      Open a command prompt, and run the following command:<a href=\"#p_55\" class=\"pid\">55</a>\n    </p>\n    <pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"export REACH_CONNECTOR_MODE=ALGO\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> export REACH_CONNECTOR_MODE</span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\">ALGO</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_56\" class=\"pid\"></i>Run the program with the following command:<a href=\"#p_56\" class=\"pid\">56</a></p>\n    <pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"./reach run\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> ./reach run</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_57\" class=\"pid\"></i>You can repeat the first step to switch the consensus network to <code>CFX</code> and <code>ETH</code>.<a href=\"#p_57\" class=\"pid\">57</a></p>\n    <blockquote>\n      <p><i id=\"p_58\" class=\"pid\"></i>For consistency, output in this tutorial reflects <span class=\"snip\"><a href=\"/tool/#cmd_REACH_CONNECTOR_MODE\" title=\"cmd: REACH_CONNECTOR_MODE\"><span style=\"color: var(--shiki-color-text)\">REACH_CONNECTOR_MODE</span></a><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\">ALGO</span></span>.<a href=\"#p_58\" class=\"pid\">58</a></p>\n    </blockquote>\n    <div class=\"note\">\n      <p>\n        <i id=\"p_59\" class=\"pid\"></i>Where does the DApp run?\n        In a local \"devnet\" environment, the Reach compiler, the consensus network devnets, your application, and the smart contract run on your computer in Docker containers instantiated from Reach Docker images.\n        A devnet refers to Reach's Dockerized developer network that allows developers to rapidly test their DApp.<a href=\"#p_59\" class=\"pid\">59</a>\n      </p>\n    </div>\n    <p><i id=\"p_60\" class=\"pid\"></i>The bottom of the output should have the following lines:<a href=\"#p_60\" class=\"pid\">60</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"The consensus network is ALGO.\nYour role is seller.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">The consensus network is ALGO.</li><li value=\"2\">Your role is seller.</li></ol></pre>\n  </li>\n</ol>\n<h1 id=\"wfs-14\" class=\"refHeader\">Pass an argument<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-14\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_61\" class=\"pid\"></i>This section shows you how to tell your DApp whether to run as the <code>seller</code> or the <code>buyer</code>.\n  You do this by passing <code>role</code> as a command-line argument (e.g. <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">reach run index seller</span></span>).\n  You cannot do this by passing <code>role</code> as a custom environment variable (e.g. <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">ROLE</span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\">seller reach run</span></span>) because in order to protect you, the <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">reach</span></span> tool exports only a pre-determined list of environment variables (including <span class=\"snip\"><a href=\"/tool/#cmd_REACH_CONNECTOR_MODE\" title=\"cmd: REACH_CONNECTOR_MODE\"><span style=\"color: var(--shiki-color-text)\">REACH_CONNECTOR_MODE</span></a></span>) within the Docker container where it runs your DApp.\n  Follow these directions to pass <code>role</code> as a command-line argument:<a href=\"#p_61\" class=\"pid\">61</a>\n</p>\n<ol>\n  <li>\n    <p><i id=\"p_62\" class=\"pid\"></i>In <code>index.mjs</code>, find the following line:<a href=\"#p_62\" class=\"pid\">62</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-1-starter/index.mjs\">/examples/wisdom-1-starter/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const role = 'seller';\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"4\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">role</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\">;</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_63\" class=\"pid\"></i>Replace it with the following to be able to set the role in the command line arguments, and save the file:<a href=\"#p_63\" class=\"pid\">63</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-2-roles/index.mjs\">/examples/wisdom-2-roles/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"if (process.argv.length < 3 || ['seller', 'buyer'].includes(process.argv[2]) == false) {\n  console.log('Usage: reach run index [seller|buyer]');\n  process.exit(0);\n}\nconst role = process.argv[2];\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"4\"><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (</span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.</span><span style=\"color: var(--shiki-token-constant)\">argv</span><span style=\"color: var(--shiki-color-text)\">.</span><span style=\"color: var(--shiki-token-constant)\">length</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">&lt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">3</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">||</span><span style=\"color: var(--shiki-color-text)\"> [</span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'buyer'</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-function)\">.includes</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.argv[</span><span style=\"color: var(--shiki-token-constant)\">2</span><span style=\"color: var(--shiki-color-text)\">]) </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">false</span><span style=\"color: var(--shiki-color-text)\">) {</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Usage: reach run index [seller|buyer]'</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-token-function)\">.exit</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">0</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"7\"><span style=\"color: var(--shiki-color-text)\">}</span></li><li value=\"8\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">role</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.argv[</span><span style=\"color: var(--shiki-token-constant)\">2</span><span style=\"color: var(--shiki-color-text)\">];</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_64\" class=\"pid\"></i>Open two terminals (i.e. shells):<a href=\"#p_64\" class=\"pid\">64</a></p>\n    <p>\n      <img src=\"/tut/wfs/terminals-empty.png\" alt=\"Open two terminals\">\n    </p>\n  </li>\n  <li>\n    <p><i id=\"p_65\" class=\"pid\"></i>Change the directory in both terminals by typing the following command:<a href=\"#p_65\" class=\"pid\">65</a></p>\n    <pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"cd reach/wisdom/\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> cd reach/wisdom/</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_66\" class=\"pid\"></i>In the Seller Terminal, run your DApp as the <code>seller</code>:<a href=\"#p_66\" class=\"pid\">66</a></p>\n    <pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"./reach run index seller\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-keyword)\">$</span><span style=\"color: var(--shiki-color-text)\"> ./reach run index seller</span></li></ol></pre>\n    <p><i id=\"p_67\" class=\"pid\"></i>When you pass arguments to <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">./reach run</span></span>, the first one must be the name of the <code>rsh</code> file without the extension (i.e. <code>index</code>) as seen above.<a href=\"#p_67\" class=\"pid\">67</a></p>\n    <p><i id=\"p_68\" class=\"pid\"></i>Application output should resemble the following:<a href=\"#p_68\" class=\"pid\">68</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"The consensus network is ALGO.\nYour role is seller.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">The consensus network is ALGO.</li><li value=\"2\">Your role is seller.</li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_69\" class=\"pid\"></i>In the Buyer Terminal, run your DApp as the <code>buyer</code>:<a href=\"#p_69\" class=\"pid\">69</a></p>\n    <pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"$ ./reach run index buyer\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">$ ./reach run index buyer</li></ol></pre>\n    <p><i id=\"p_70\" class=\"pid\"></i>The output should resemble the following:<a href=\"#p_70\" class=\"pid\">70</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"The consensus network is ALGO.\nYour role is buyer.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">The consensus network is ALGO.</li><li value=\"2\">Your role is buyer.</li></ol></pre>\n  </li>\n</ol>\n<h1 id=\"wfs-15\" class=\"refHeader\">Explore units and balances<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-15\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_71\" class=\"pid\"></i>This section helps you explore standard and atomic units using the <a href=\"/en/essentials/frontend-programming/javascript-frontends/\">JavaScript Standard Library</a>.\n  Regarding tokens, each consensus network has a (divisible) standard unit and an (indivisible) atomic unit.\n  Users usually want to see standard units.\n  A smart contract, on the other hand, always deals with atomic units.<a href=\"#p_71\" class=\"pid\">71</a>\n</p>\n<p>\n  <i id=\"p_72\" class=\"pid\"></i>So, your DApp needs to convert between the two frequently.\n  We use the commands <span class=\"snip\"><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></a></span> and <span class=\"snip\"><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-color-text)\">formatCurrency</span></a></span> to do the conversions.\n  <span class=\"snip\"><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></a></span> converts from standard to atomic.\n  <span class=\"snip\"><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-color-text)\">formatCurrency</span></a></span> converts from atomic to standard.<a href=\"#p_72\" class=\"pid\">72</a>\n</p>\n<p>\n  <i id=\"p_73\" class=\"pid\"></i>As mentioned, <span class=\"snip\"><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></a></span> is often used for human interactions: setting a contract price, paying the contract, wagers, staking, and other items where a user will either set the amount, or use the amount.\n  <span class=\"snip\"><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-color-text)\">formatCurrency</span></a></span> is more frequently used with computer interactions or with small costs: such as paying fees, making sure the contract balance is zero, or showing wallet balances after contracts exit.<a href=\"#p_73\" class=\"pid\">73</a>\n</p>\n<ol>\n  <li>\n    <p><i id=\"p_74\" class=\"pid\"></i>In <code>index.mjs</code>, find the <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-color-text)\">.log</span></span> statement below:<a href=\"#p_74\" class=\"pid\">74</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-2-roles/index.mjs\">/examples/wisdom-2-roles/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"console.log(`The consensus network is ${stdlib.connector}.`);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"12\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The consensus network is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.connector\" title=\"js: stdlib.connector\"><span style=\"color: var(--shiki-color-text)\">.connector</span></a><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_75\" class=\"pid\"></i>Add the following two <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-color-text)\">.log</span></span> statements that utilize the <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_standardUnit\" title=\"js: standardUnit\"><span style=\"color: var(--shiki-color-text)\">.standardUnit</span></a></span> and <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_atomicUnit\" title=\"js: atomicUnit\"><span style=\"color: var(--shiki-color-text)\">.atomicUnit</span></a></span> below it, and run your DApp as the <code>seller</code> to view the standard and atomic units for your network:<a href=\"#p_75\" class=\"pid\">75</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-3-units1/index.mjs\">/examples/wisdom-3-units1/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"console.log(`The standard unit is ${stdlib.standardUnit}`);\nconsole.log(`The atomic unit is ${stdlib.atomicUnit}`);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"13\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The standard unit is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_standardUnit\" title=\"js: standardUnit\"><span style=\"color: var(--shiki-color-text)\">.standardUnit</span></a><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"14\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The atomic unit is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_atomicUnit\" title=\"js: atomicUnit\"><span style=\"color: var(--shiki-color-text)\">.atomicUnit</span></a><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n    <p><i id=\"p_76\" class=\"pid\"></i>The output should resemble the following:<a href=\"#p_76\" class=\"pid\">76</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"The consensus network is ALGO.\nThe standard unit is ALGO\nThe atomic unit is ALGO\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">The consensus network is ALGO.</li><li value=\"2\">The standard unit is ALGO</li><li value=\"3\">The atomic unit is ALGO</li></ol></pre>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_77\" class=\"pid\"></i>Remove the two <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-color-text)\">.log</span></span> additions and then create <code>suStr</code> and <code>auStr</code>.\n      Set <code>suStr</code> to <span class=\"snip\"><a href=\"/frontend/#js_standardUnit\" title=\"js: standardUnit\"><span style=\"color: var(--shiki-color-text)\">standardUnit</span></a></span>, and <code>auStr</code> to <span class=\"snip\"><a href=\"/frontend/#js_atomicUnit\" title=\"js: atomicUnit\"><span style=\"color: var(--shiki-color-text)\">atomicUnit</span></a></span>.\n      Replace the <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">stdlib</span></span> statements with the corresponding <span class=\"snip\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a></span> statements:<a href=\"#p_77\" class=\"pid\">77</a>\n    </p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-4-units2/index.mjs\">/examples/wisdom-4-units2/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const suStr = stdlib.standardUnit;\nconst auStr = stdlib.atomicUnit;\nconsole.log(`The standard unit is ${suStr}`);\nconsole.log(`The atomic unit is ${auStr}`);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"13\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">suStr</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\">.standardUnit;</span></li><li value=\"14\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">auStr</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\">.atomicUnit;</span></li><li value=\"15\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The standard unit is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"16\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The atomic unit is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">auStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n    <p><i id=\"p_78\" class=\"pid\"></i>The output should be the same.<a href=\"#p_78\" class=\"pid\">78</a></p>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_79\" class=\"pid\"></i>Now, let's create a way to go back and forth between the two unit types.\n      We will then utilize <span class=\"snip\"><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></a></span> and <span class=\"snip\"><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-color-text)\">formatCurrency</span></a></span> to change unit types.\n      We will also create a <code>suBal</code> to add 1000 standard units of funds, then utilize the <code>toAU</code> method to change the unit type of <code>suBal</code> to atomic units.\n      Let's write a couple of statements to the console to make sure it works as we expect, and then run again:<a href=\"#p_79\" class=\"pid\">79</a>\n    </p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-5-swap-units/index.mjs\">/examples/wisdom-5-swap-units/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const suStr = stdlib.standardUnit;\nconst auStr = stdlib.atomicUnit;\nconst toAU = (su) => stdlib.parseCurrency(su);\nconst toSU = (au) => stdlib.formatCurrency(au, 4);\nconst suBal = 1000;\nconsole.log(`Balance is ${suBal} ${suStr}`);\nconst auBal = toAU(suBal);\nconsole.log(`Balance is ${auBal} ${auStr}`);\nconsole.log(`Balance is ${toSU(auBal)} ${suStr}`);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"13\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">suStr</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\">.standardUnit;</span></li><li value=\"14\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">auStr</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\">.atomicUnit;</span></li><li value=\"15\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (su) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(su);</span></li><li value=\"16\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (au) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-token-function)\">.formatCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(au</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">4</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"17\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">suBal</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">1000</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"18\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Balance is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suBal</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"19\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">auBal</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\">(suBal);</span></li><li value=\"20\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Balance is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">auBal</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">auStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"21\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Balance is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(auBal)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n    <p><i id=\"p_80\" class=\"pid\"></i>The output should resemble the following:<a href=\"#p_80\" class=\"pid\">80</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"The consensus network is ALGO.\nBalance is 1000 ALGO\nBalance is 1000000000 ALGO\nBalance is 1000 ALGO\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">The consensus network is ALGO.</li><li value=\"2\">Balance is 1000 ALGO</li><li value=\"3\">Balance is 1000000000 ALGO</li><li value=\"4\">Balance is 1000 ALGO</li></ol></pre>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_81\" class=\"pid\"></i>Now, since that worked, we should refine the code.\n      We want to keep <code>toAU</code> and <code>toSU</code> because they are useful, but we do not need all of the console statements.\n      Instead, we can create a single <span class=\"snip\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a></span> named <code>iBalance</code> and set it to atomic units using <code>toAU</code>, then wrap the account with <code>toSU</code> when we want to display standard units.\n      We want to display the account balance to the console, as well as test wrapping the account with <code>toSU</code>, so let's write one more statement to the console.\n      Your new code should look like the following:<a href=\"#p_81\" class=\"pid\">81</a>\n    </p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-6-swap-refined/index.mjs\">/examples/wisdom-6-swap-refined/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const toAU = (su) => stdlib.parseCurrency(su);\nconst toSU = (au) => stdlib.formatCurrency(au, 4);\nconst iBalance = toAU(1000);\nconst showBalance = async (acc) => console.log(`Your balance is ${toSU(await stdlib.balanceOf(acc))} ${suStr}.`);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"14\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (su) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(su);</span></li><li value=\"15\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (au) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-token-function)\">.formatCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(au</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">4</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"16\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">iBalance</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">1000</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"17\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (acc) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your balance is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.balanceOf\" title=\"js: stdlib.balanceOf\"><span style=\"color: var(--shiki-token-function)\">.balanceOf</span></a><span style=\"color: var(--shiki-color-text)\">(acc))</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li></ol></pre>\n    <p><i id=\"p_82\" class=\"pid\"></i>You use <code>iBalance</code> and <code>showBalance</code> in the next steps.<a href=\"#p_82\" class=\"pid\">82</a></p>\n  </li>\n  <li>\n    <p><i id=\"p_83\" class=\"pid\"></i>In <code>index.mjs</code>, find the line below and replace <code>stdlib.parseCurrency(1000)</code> with <code>iBalance</code>:<a href=\"#p_83\" class=\"pid\">83</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-6-swap-refined/index.mjs\">/examples/wisdom-6-swap-refined/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  const acc = await stdlib.newTestAccount(stdlib.parseCurrency(1000));\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">1000</span><span style=\"color: var(--shiki-color-text)\">));</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_84\" class=\"pid\"></i>In <code>index.mjs</code>, insert <code>showBalance</code> in the two places shown below to show the account balance before and after contract deployment:<a href=\"#p_84\" class=\"pid\">84</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-7-display-balance/index.mjs\">/examples/wisdom-7-display-balance/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  const acc = await stdlib.newTestAccount(iBalance);\n  await showBalance(acc);\n  const ctc = acc.contract(backend);\n  await ctc.participants.Seller(sellerInteract);\n  await showBalance(acc);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(iBalance);</span></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend);</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.participants\" title=\"js: ctc.participants\"><span style=\"color: var(--shiki-token-constant)\">participants</span></a><span style=\"color: var(--shiki-token-function)\">.Seller</span><span style=\"color: var(--shiki-color-text)\">(sellerInteract);</span></li><li value=\"31\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_85\" class=\"pid\"></i>Run your DApp again. Output should resemble the following:<a href=\"#p_85\" class=\"pid\">85</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is seller.\nThe consensus network is ALGO.\nYour balance is 1000 ALGO.\nYour balance is 1000 ALGO.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is seller.</li><li value=\"2\">The consensus network is ALGO.</li><li value=\"3\">Your balance is 1000 ALGO.</li><li value=\"4\">Your balance is 1000 ALGO.</li></ol></pre>\n    <p><i id=\"p_86\" class=\"pid\"></i>The second balance is now poised to reflect the results of the transactions you will implement below.<a href=\"#p_86\" class=\"pid\">86</a></p>\n  </li>\n</ol>\n<h1 id=\"wfs-16\" class=\"refHeader\">Deploy the contract (seller)<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-16\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_87\" class=\"pid\"></i>This section shows you how to have the <code>seller</code> (1) deploy the contract and (2) return the contract information to be used later by the <code>buyer</code> to attach to the contract.\n  The format of contract information varies depending on the consensus network but can always be serialized to and from JSON without losing information.\n  The following are examples of contract information written in JSON:<a href=\"#p_87\" class=\"pid\">87</a>\n</p>\n<table>\n  <thead>\n    <tr>\n      <th>Consensus Network</th>\n      <th>Contract Information Example</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>Algorand</td>\n      <td><code>{\"type\":\"BigNumber\",\"hex\":\"0x6e\"}</code></td>\n    </tr>\n    <tr>\n      <td>Conflux</td>\n      <td><code>\"NET999:TYPE.CONTRACT:ACDWGDGH6DKDAJ528Y5CCWMX8NBVPHXU72S3FPF8CY\"</code></td>\n    </tr>\n    <tr>\n      <td>Ethereum</td>\n      <td><code>\"0x403372276F841d7451E6417Cc7B17fDD159FE34C\"</code></td>\n    </tr>\n  </tbody>\n</table>\n<p>\n  <i id=\"p_88\" class=\"pid\"></i>In this tutorial, the <code>seller</code> outputs the contract information to the Seller Terminal, and the <code>buyer</code> copies &amp; pastes the contract information from the Seller Terminal to the Buyer Terminal (including the quotation marks if present).\n  In an actual deployment, the <code>seller</code> would need to search for a contract name and its associated contract information in some repository, or receive it in the form of something like a QR code.<a href=\"#p_88\" class=\"pid\">88</a>\n</p>\n<p><i id=\"p_89\" class=\"pid\"></i>Follow these directions to have the <code>seller</code> deploy the contract and return the contract information:<a href=\"#p_89\" class=\"pid\">89</a></p>\n<ol>\n  <li>\n    <p><i id=\"p_90\" class=\"pid\"></i>In <code>index.mjs</code>, find the <code>sellerInteract</code> code:<a href=\"#p_90\" class=\"pid\">90</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-7-display-balance/index.mjs\">/examples/wisdom-7-display-balance/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Seller\nif (role === 'seller') {\n  const sellerInteract = {\n    ...commonInteract,\n  };\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"21\"><span style=\"color: var(--shiki-token-comment)\">// Seller</span></li><li value=\"22\"><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (role </span><span style=\"color: var(--shiki-token-keyword)\">===</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\">) {</span></li><li value=\"23\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"24\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">  };</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_91\" class=\"pid\"></i>Add <code>price</code> and <code>reportReady</code> methods to it:<a href=\"#p_91\" class=\"pid\">91</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-8-pricing/index.mjs\">/examples/wisdom-8-pricing/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Seller\nif (role === 'seller') {\n  const sellerInteract = {\n    ...commonInteract,\n    price: toAU(5),\n    reportReady: async (price) => {\n      console.log(`Your wisdom is for sale at ${toSU(price)} ${suStr}.`);\n      console.log(`Contract info: ${JSON.stringify(await ctc.getInfo())}`);\n    },\n  };\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"21\"><span style=\"color: var(--shiki-token-comment)\">// Seller</span></li><li value=\"22\"><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (role </span><span style=\"color: var(--shiki-token-keyword)\">===</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\">) {</span></li><li value=\"23\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"24\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">    price</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">5</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"26\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">reportReady</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (price) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your wisdom is for sale at </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(price)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Contract info: </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-constant)\">JSON</span><span style=\"color: var(--shiki-token-function)\">.stringify</span><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><a href=\"/frontend/#js_getInfo\" title=\"js: getInfo\"><span style=\"color: var(--shiki-token-function)\">.getInfo</span></a><span style=\"color: var(--shiki-color-text)\">())</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">    }</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">  };</span></li></ol></pre>\n    <p><i id=\"p_92\" class=\"pid\"></i>You will add a <code>wisdom</code> property to the <code>sellerInteract</code> later in the tutorial.<a href=\"#p_92\" class=\"pid\">92</a></p>\n  </li>\n  <li>\n    <p><i id=\"p_93\" class=\"pid\"></i>In <code>index.rsh</code>, find the <code>sellerInteract</code> code:<a href=\"#p_93\" class=\"pid\">93</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-8-pricing/index.rsh\">/examples/wisdom-8-pricing/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const sellerInteract = {\n  ...commonInteract,\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"4\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_94\" class=\"pid\"></i>Add <code>price</code> and <code>reportReady</code> that was added in the <code>index.mjs</code> file to the <code>index.rsh</code> code:<a href=\"#p_94\" class=\"pid\">94</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-8-pricing/index.rsh\">/examples/wisdom-8-pricing/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const sellerInteract = {\n  ...commonInteract,\n    price: UInt,\n    reportReady: Fun([UInt], Null),\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"4\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">    price</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"7\"><span style=\"color: var(--shiki-color-text)\">    reportReady</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"8\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n    <ul>\n      <li><i id=\"p_95\" class=\"pid\"></i>Line 4: <code>sellerInteract</code> is a user-defined Reach object.<a href=\"#p_95\" class=\"pid\">95</a></li>\n      <li><i id=\"p_96\" class=\"pid\"></i>Line 5: The spread syntax <code>...</code> adds all <code>commonInteract</code> properties (none yet) to the object.<a href=\"#p_96\" class=\"pid\">96</a></li>\n      <li><i id=\"p_97\" class=\"pid\"></i>Line 6: <code>price</code> is a <span class=\"snip\"><a href=\"/rsh/compute/#rsh_UInt\" title=\"rsh: UInt\"><span style=\"color: var(--shiki-color-text)\">UInt</span></a></span>, a Reach-defined unsigned integer.<a href=\"#p_97\" class=\"pid\">97</a></li>\n      <li><i id=\"p_98\" class=\"pid\"></i>Line 7: <code>reportReady</code> is a function that takes a <span class=\"snip\"><a href=\"/rsh/compute/#rsh_UInt\" title=\"rsh: UInt\"><span style=\"color: var(--shiki-color-text)\">UInt</span></a></span> as an argument and returns nothing.<a href=\"#p_98\" class=\"pid\">98</a></li>\n    </ul>\n  </li>\n  <li>\n    <p><i id=\"p_99\" class=\"pid\"></i>In <code>index.rsh</code>, add the following code between <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-color-text)\">init</span></a></span> and <span class=\"snip\"><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-color-text)\">exit</span></a></span>:<a href=\"#p_99\" class=\"pid\">99</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-8-pricing/index.rsh\">/examples/wisdom-8-pricing/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  init();\n\n  S.only(() => { const price = declassify(interact.price); });\n  S.publish(price);\n  S.interact.reportReady(price);\n  commit();\n\n  exit();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"16\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"17\"></li><li value=\"18\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">price</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.price); });</span></li><li value=\"19\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(price);</span></li><li value=\"20\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportReady</span><span style=\"color: var(--shiki-color-text)\">(price);</span></li><li value=\"21\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"22\"></li><li value=\"23\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n    <ul>\n      <li><i id=\"p_100\" class=\"pid\"></i>Line 16: <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-color-text)\">init</span></a></span> initializes the DApp, and transitions to a step.<a href=\"#p_100\" class=\"pid\">100</a></li>\n      <li><i id=\"p_101\" class=\"pid\"></i>Line 18: <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> transitions to a local step in which <code>seller</code> gets <code>price</code>.<a href=\"#p_101\" class=\"pid\">101</a></li>\n      <li><i id=\"p_102\" class=\"pid\"></i>Line 19: <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> transitions to a consensus step.<a href=\"#p_102\" class=\"pid\">102</a></li>\n      <li><i id=\"p_103\" class=\"pid\"></i>Line 20: <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-color-text)\">.interact</span></a></span> transitions to a local step in which <code>seller</code> passes <code>price</code> to frontend.<a href=\"#p_103\" class=\"pid\">103</a></li>\n      <li><i id=\"p_104\" class=\"pid\"></i>Line 21: <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> transitions to a step.<a href=\"#p_104\" class=\"pid\">104</a></li>\n      <li><i id=\"p_105\" class=\"pid\"></i>Line 23: <span class=\"snip\"><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> halts the contract forever.<a href=\"#p_105\" class=\"pid\">105</a></li>\n    </ul>\n    <p>\n      <i id=\"p_106\" class=\"pid\"></i>The next section explains these functions in more detail.\n      For now, know that Reach programs (the <code>index.rsh</code> portion of your Reach DApp) are organized into four modes, and that <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-color-text)\">init</span></a></span>, <span class=\"snip\"><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-color-text)\">only</span></a></span>, <span class=\"snip\"><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-color-text)\">publish</span></a></span>, <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-color-text)\">commit</span></a></span>, and <span class=\"snip\"><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-color-text)\">exit</span></a></span> cause mode transitions.<a href=\"#p_106\" class=\"pid\">106</a>\n    </p>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_107\" class=\"pid\"></i>Run your DApp as the <code>seller</code>.\n      The output should resemble the following:<a href=\"#p_107\" class=\"pid\">107</a>\n    </p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is seller.\nThe consensus network is ALGO.\nYour balance is 1000 ALGO.\nYour wisdom is for sale at 5 ALGO.\nContract info: {&quot;type&quot;:&quot;BigNumber&quot;,&quot;hex&quot;:&quot;0xa6&quot;}\nYour balance is 999.996 ALGO.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is seller.</li><li value=\"2\">The consensus network is ALGO.</li><li value=\"3\">Your balance is 1000 ALGO.</li><li value=\"4\">Your wisdom is for sale at 5 ALGO.</li><li value=\"5\">Contract info: {\"type\":\"BigNumber\",\"hex\":\"0xa6\"}</li><li value=\"6\">Your balance is 999.996 ALGO.</li></ol></pre>\n    <p>\n      <i id=\"p_108\" class=\"pid\"></i>The <code>seller</code> creates the contract, retrieves the contract information, and makes it available to the <code>buyer</code> who will use the information to attach to the contract.\n      Deploying the contract costs the <code>seller</code> a fee.\n      Here, you can see that the balance after creating the contract is displayed using atomic units, because <code>acc</code> references <code>iBalance</code> which takes the input of 1000 standard units and turns it into the atomic units using <span class=\"snip\"><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></a></span>.<a href=\"#p_108\" class=\"pid\">108</a>\n    </p>\n  </li>\n</ol>\n<p><i id=\"p_109\" class=\"pid\"></i>The interact objects introduced in this section facilitate communication between the frontend (e.g. <code>index.mjs</code>) and backend (e.g. <code>index.main.mjs</code>) of Reach applications, (remembering that <code>index.rsh</code> is the pre-compiled version of <code>index.main.mjs</code>).<a href=\"#p_109\" class=\"pid\">109</a></p>\n<h1 id=\"wfs-17\" class=\"refHeader\">Attach to the contract (buyer)<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-17\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_110\" class=\"pid\"></i>This section demonstrates how the <code>buyer</code> attaches to the contact.\n  It also introduces <code>@reach-sh/stdlib/ask.mjs</code>, a minimal Reach Node.js package for command-line input.<a href=\"#p_110\" class=\"pid\">110</a>\n</p>\n<p>\n  <i id=\"p_111\" class=\"pid\"></i>Interaction is often necessary between the DApp and the participants.\n  <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-color-text)\">ask</span></a></span> is a convenient way to allow interaction in a variety of different ways, each with a specific use.\n  <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.yesno\" title=\"js: ask.yesno\"><span style=\"color: var(--shiki-color-text)\">.yesno</span></a></span> is used to ask a question where the answer is either yes or no, and accepts a single letter response (<code>y</code> for yes and <code>n</code> for no).\n  <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-color-text)\">.ask</span></a></span> is valuable for queries where the expected response is a string, such as \"What is your name?\".\n  <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.done\" title=\"js: ask.done\"><span style=\"color: var(--shiki-color-text)\">.done</span></a></span> is used when there are no more questions.<a href=\"#p_111\" class=\"pid\">111</a>\n</p>\n<ol>\n  <li>\n    <p><i id=\"p_112\" class=\"pid\"></i>In <code>index.mjs</code>, add <code>ask</code> to the imports from the Reach standard library:<a href=\"#p_112\" class=\"pid\">112</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.mjs\">/examples/wisdom-9-interaction/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"import { loadStdlib } from '@reach-sh/stdlib';\nimport * as backend from './build/index.main.mjs';\nimport { ask } from '@reach-sh/stdlib';\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> { loadStdlib } </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'@reach-sh/stdlib'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">*</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">as</span><span style=\"color: var(--shiki-color-text)\"> backend </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'./build/index.main.mjs'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"3\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> { ask } </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'@reach-sh/stdlib'</span><span style=\"color: var(--shiki-color-text)\">;</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_113\" class=\"pid\"></i>In <code>index.mjs</code>, find the <code>buyerInteract</code> code:<a href=\"#p_113\" class=\"pid\">113</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-8-pricing/index.mjs\">/examples/wisdom-8-pricing/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Buyer\n} else {\n  const buyerInteract = {\n    ...commonInteract,\n  };\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"38\"><span style=\"color: var(--shiki-token-comment)\">// Buyer</span></li><li value=\"39\"><span style=\"color: var(--shiki-color-text)\">} </span><span style=\"color: var(--shiki-token-keyword)\">else</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"40\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"41\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"42\"><span style=\"color: var(--shiki-color-text)\">  };</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_114\" class=\"pid\"></i>Replace it with the following:<a href=\"#p_114\" class=\"pid\">114</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.mjs\">/examples/wisdom-9-interaction/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Buyer\n} else {\n  const buyerInteract = {\n    ...commonInteract,\n    confirmPurchase: async (price) => await ask.ask(`Do you want to purchase wisdom for ${toSU(price)} ${suStr}?`, ask.yesno),\n  };\n  const acc = await stdlib.newTestAccount(iBalance);\n  const info = await ask.ask('Paste contract info:', (s) => JSON.parse(s));\n  const ctc = acc.contract(backend, info);\n  await showBalance(acc);\n  await ctc.p.Buyer(buyerInteract);\n  await showBalance(acc);\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"39\"><span style=\"color: var(--shiki-token-comment)\">// Buyer</span></li><li value=\"40\"><span style=\"color: var(--shiki-color-text)\">} </span><span style=\"color: var(--shiki-token-keyword)\">else</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"41\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"42\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">confirmPurchase</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (price) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Do you want to purchase wisdom for </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(price)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">?`</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><span style=\"color: var(--shiki-color-text)\">.yesno)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"44\"><span style=\"color: var(--shiki-color-text)\">  };</span></li><li value=\"45\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(iBalance);</span></li><li value=\"46\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">info</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Paste contract info:'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> (s) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">JSON</span><span style=\"color: var(--shiki-token-function)\">.parse</span><span style=\"color: var(--shiki-color-text)\">(s));</span></li><li value=\"47\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> info);</span></li><li value=\"48\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"49\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.p\" title=\"js: ctc.p\"><span style=\"color: var(--shiki-token-constant)\">p</span></a><span style=\"color: var(--shiki-token-function)\">.Buyer</span><span style=\"color: var(--shiki-color-text)\">(buyerInteract);</span></li><li value=\"50\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"51\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n    <ul>\n      <li>\n        <i id=\"p_115\" class=\"pid\"></i>Line 44: <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-color-text)\">.ask</span></a></span> and <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.yesno\" title=\"js: ask.yesno\"><span style=\"color: var(--shiki-color-text)\">.yesno</span></a></span> are functions in <code>@reach-sh/stdlib</code>.\n        <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.yesno\" title=\"js: ask.yesno\"><span style=\"color: var(--shiki-color-text)\">.yesno</span></a></span> accepts only <code>y</code> or <code>n</code>.<a href=\"#p_115\" class=\"pid\">115</a>\n      </li>\n      <li><i id=\"p_116\" class=\"pid\"></i>Line 48: You must parse contract information (so, it must be parsable).<a href=\"#p_116\" class=\"pid\">116</a></li>\n      <li><i id=\"p_117\" class=\"pid\"></i>Line 51: You can substitute <code>participants</code> for <code>p</code>.<a href=\"#p_117\" class=\"pid\">117</a></li>\n    </ul>\n  </li>\n  <li>\n    <p><i id=\"p_118\" class=\"pid\"></i>And, add <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.done\" title=\"js: ask.done\"><span style=\"color: var(--shiki-token-function)\">.done</span></a><span style=\"color: var(--shiki-color-text)\">();</span></span> at the bottom of the file.<a href=\"#p_118\" class=\"pid\">118</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.mjs\">/examples/wisdom-9-interaction/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"ask.done();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"53\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.done\" title=\"js: ask.done\"><span style=\"color: var(--shiki-token-function)\">.done</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n    <p><i id=\"p_119\" class=\"pid\"></i><span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.done\" title=\"js: ask.done\"><span style=\"color: var(--shiki-token-function)\">.done</span></a><span style=\"color: var(--shiki-color-text)\">();</span></span> needs to be after <code>};</code> so that it is accessible by both the <code>Seller</code> and the <code>Buyer</code><a href=\"#p_119\" class=\"pid\">119</a></p>\n  </li>\n  <li>\n    <p><i id=\"p_120\" class=\"pid\"></i>In <code>index.rsh</code>, find the <code>buyerInteract</code> code:<a href=\"#p_120\" class=\"pid\">120</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-8-pricing/index.rsh\">/examples/wisdom-8-pricing/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const buyerInteract = {\n  ...commonInteract,\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"9\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"10\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"11\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_121\" class=\"pid\"></i>Add a <code>confirmPurchase</code> method as shown below:<a href=\"#p_121\" class=\"pid\">121</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.rsh\">/examples/wisdom-9-interaction/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const buyerInteract = {\n  ...commonInteract,\n  confirmPurchase: Fun([UInt], Bool)\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"9\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"10\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"11\"><span style=\"color: var(--shiki-color-text)\">  confirmPurchase</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Bool)</span></li><li value=\"12\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n    <p>\n      <i id=\"p_122\" class=\"pid\"></i>After the <code>...commonInteract</code>, there needs to be a comma.\n      When you add a property, all properties above the final property require a comma at the end of the line.<a href=\"#p_122\" class=\"pid\">122</a>\n    </p>\n    <ul>\n      <li><i id=\"p_123\" class=\"pid\"></i>Line 9: <code>buyerInteract</code> is a user-defined Reach object.<a href=\"#p_123\" class=\"pid\">123</a></li>\n      <li><i id=\"p_124\" class=\"pid\"></i>Line 10: The spread syntax <code>...</code> adds all <code>commonInteract</code> properties (none yet) to the object.<a href=\"#p_124\" class=\"pid\">124</a></li>\n      <li><i id=\"p_125\" class=\"pid\"></i>Line 11: <code>confirmPurchase</code> is a function that takes a <code>UInt</code> and returns a <code>Bool</code>.<a href=\"#p_125\" class=\"pid\">125</a></li>\n    </ul>\n  </li>\n  <li>\n    <p><i id=\"p_126\" class=\"pid\"></i>In <code>index.rsh</code>, add the following before <span class=\"snip\"><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> to utilize <code>confirmPurchase</code>:<a href=\"#p_126\" class=\"pid\">126</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.rsh\">/examples/wisdom-9-interaction/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  B.only(() => { const willBuy = declassify(interact.confirmPurchase(price)); });\n  B.publish(willBuy);\n  if (!willBuy) {\n    commit();\n  } else {\n    commit();\n  }\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"24\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">willBuy</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.confirmPurchase</span><span style=\"color: var(--shiki-color-text)\">(price)); });</span></li><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(willBuy);</span></li><li value=\"26\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_if\" title=\"rsh: if\"><span style=\"color: var(--shiki-token-keyword)\">if</span></a><span style=\"color: var(--shiki-color-text)\"> (</span><a href=\"/rsh/compute/#rsh_!\" title=\"rsh: !\"><span style=\"color: var(--shiki-token-keyword)\">!</span></a><span style=\"color: var(--shiki-color-text)\">willBuy) {</span></li><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">  } </span><a href=\"/rsh/compute/#rsh_else\" title=\"rsh: else\"><span style=\"color: var(--shiki-token-keyword)\">else</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">  }</span></li></ol></pre>\n    <ul>\n      <li><i id=\"p_127\" class=\"pid\"></i>Line 24: <code>confirmPurchase</code> passes <code>price</code> and returns <code>true</code> or <code>false</code> from frontend.<a href=\"#p_127\" class=\"pid\">127</a></li>\n      <li><i id=\"p_128\" class=\"pid\"></i>Line 25: <code>B.publish()</code> transitions to a consensus step.<a href=\"#p_128\" class=\"pid\">128</a></li>\n      <li><i id=\"p_129\" class=\"pid\"></i>Line 27: <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> transitions to a step.<a href=\"#p_129\" class=\"pid\">129</a></li>\n    </ul>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_130\" class=\"pid\"></i>Run your DApp as both the <code>seller</code> and the <code>buyer</code>.\n      When prompted, copy &amp; paste the contract info from the Seller Terminal to the Buyer Terminal.\n      Output should resemble the following:<a href=\"#p_130\" class=\"pid\">130</a>\n    </p>\n    <div class=\"row gx-3\">\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is seller.\nThe consensus network is ALGO.\nYour balance is 1000 ALGO.\nYour wisdom is for sale at 5 ALGO.\nContract info: {&quot;type&quot;:&quot;BigNumber&quot;,&quot;hex&quot;:&quot;0xa6&quot;}\nYour balance is 999.997 ALGO.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is seller.</li><li value=\"2\">The consensus network is ALGO.</li><li value=\"3\">Your balance is 1000 ALGO.</li><li value=\"4\">Your wisdom is for sale at 5 ALGO.</li><li value=\"5\">Contract info: {\"type\":\"BigNumber\",\"hex\":\"0xa6\"}</li><li value=\"6\">Your balance is 999.997 ALGO.</li></ol></pre>\n      </div>\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is buyer.\nThe consensus network is ALGO.\nPaste contract info:\n{&quot;type&quot;:&quot;BigNumber&quot;,&quot;hex&quot;:&quot;0xa6&quot;}\nYour balance is 1000 ALGO.\nDo you want to purchase wisdom for 5 ALGO?\nn\nYour balance is 999.998 ALGO.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is buyer.</li><li value=\"2\">The consensus network is ALGO.</li><li value=\"3\">Paste contract info:</li><li value=\"4\">{\"type\":\"BigNumber\",\"hex\":\"0xa6\"}</li><li value=\"5\">Your balance is 1000 ALGO.</li><li value=\"6\">Do you want to purchase wisdom for 5 ALGO?</li><li value=\"7\">n</li><li value=\"8\">Your balance is 999.998 ALGO.</li></ol></pre>\n      </div>\n    </div>\n  </li>\n</ol>\n<h1 id=\"wfs-18\" class=\"refHeader\">Cancel a transaction<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-18\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_131\" class=\"pid\"></i>This section shows you how to display that a transaction is cancelled.<a href=\"#p_131\" class=\"pid\">131</a></p>\n<ol>\n  <li>\n    <p><i id=\"p_132\" class=\"pid\"></i>In <code>index.mjs</code>, find the following line:<a href=\"#p_132\" class=\"pid\">132</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.mjs\">/examples/wisdom-9-interaction/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const commonInteract = {};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"20\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {};</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_133\" class=\"pid\"></i>Replace it with the following:<a href=\"#p_133\" class=\"pid\">133</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-10-cancel1/index.mjs\">/examples/wisdom-10-cancel1/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const commonInteract = {\n  reportCancellation: () => { console.log(`The buyer cancelled the order.`); }\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"20\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"21\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">reportCancellation</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> () </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The buyer cancelled the order.`</span><span style=\"color: var(--shiki-color-text)\">); }</span></li><li value=\"22\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_134\" class=\"pid\"></i>In <code>index.rsh</code>, find the following line:<a href=\"#p_134\" class=\"pid\">134</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.rsh\">/examples/wisdom-9-interaction/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const commonInteract = {};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"3\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {};</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_135\" class=\"pid\"></i>Replace it with the following:<a href=\"#p_135\" class=\"pid\">135</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-10-cancel1/index.rsh\">/examples/wisdom-10-cancel1/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const commonInteract = {\n  reportCancellation: Fun([], Null)\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"3\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"4\"><span style=\"color: var(--shiki-color-text)\">  reportCancellation</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_136\" class=\"pid\"></i>In <code>index.rsh</code>, add Lines 3 and 4 to existing code:<a href=\"#p_136\" class=\"pid\">136</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-10-cancel1/index.rsh\">/examples/wisdom-10-cancel1/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  if (!willBuy) {\n    commit();\n    each([S, B], () => interact.reportCancellation());\n    exit();\n  } else {\n    commit();\n  }\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_if\" title=\"rsh: if\"><span style=\"color: var(--shiki-token-keyword)\">if</span></a><span style=\"color: var(--shiki-color-text)\"> (</span><a href=\"/rsh/compute/#rsh_!\" title=\"rsh: !\"><span style=\"color: var(--shiki-token-keyword)\">!</span></a><span style=\"color: var(--shiki-color-text)\">willBuy) {</span></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportCancellation</span><span style=\"color: var(--shiki-color-text)\">());</span></li><li value=\"31\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"32\"><span style=\"color: var(--shiki-color-text)\">  } </span><a href=\"/rsh/compute/#rsh_else\" title=\"rsh: else\"><span style=\"color: var(--shiki-token-keyword)\">else</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"33\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"34\"><span style=\"color: var(--shiki-color-text)\">  }</span></li></ol></pre>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_137\" class=\"pid\"></i>Run your DApp as both the <code>seller</code> and the <code>buyer</code>.\n      Answer <code>n</code> when asked to buy wisdom. Output should include the following:<a href=\"#p_137\" class=\"pid\">137</a>\n    </p>\n    <div class=\"row gx-3\">\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is seller.\nThe buyer cancelled the order.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is seller.</li><li value=\"2\">The buyer cancelled the order.</li></ol></pre>\n      </div>\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is buyer.\nThe buyer cancelled the order.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is buyer.</li><li value=\"2\">The buyer cancelled the order.</li></ol></pre>\n      </div>\n    </div>\n    <p>\n      <i id=\"p_138\" class=\"pid\"></i>In the Buyer Terminal, it might be more consistent to output <code>You cancelled the order</code> instead of <code>The buyer cancelled the order</code>.\n      The following steps implement this slight change.<a href=\"#p_138\" class=\"pid\">138</a>\n    </p>\n  </li>\n  <li>\n    <p><i id=\"p_139\" class=\"pid\"></i>In <code>index.mjs</code>, modify <code>commonInteract</code>:<a href=\"#p_139\" class=\"pid\">139</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-11-cancel2/index.mjs\">/examples/wisdom-11-cancel2/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const commonInteract = (role) => ({\n  reportCancellation: () => { console.log(`${role == 'buyer' ? 'You' : 'The buyer'} cancelled the order.`); }\n});\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"20\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (role) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> ({</span></li><li value=\"21\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">reportCancellation</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> () </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">role </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'buyer'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'You'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'The buyer'</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> cancelled the order.`</span><span style=\"color: var(--shiki-color-text)\">); }</span></li><li value=\"22\"><span style=\"color: var(--shiki-color-text)\">});</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_140\" class=\"pid\"></i>In <code>index.mjs</code>, modify both <code>sellerInteract</code> and <code>buyerInteract</code> to pass <code>role</code> to <code>commonInteract</code>:<a href=\"#p_140\" class=\"pid\">140</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-11-cancel2/index.mjs\">/examples/wisdom-11-cancel2/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"    ...commonInteract(role),\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-token-function)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\">(role)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li></ol></pre>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_141\" class=\"pid\"></i>Rerun your DApp as the <code>seller</code> and <code>buyer</code>.\n      Answer <code>n</code> again. Now, <code>buyer</code> output should include <code>You cancelled the order</code>:<a href=\"#p_141\" class=\"pid\">141</a>\n    </p>\n    <div class=\"row gx-3\">\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is seller.\nThe buyer cancelled the order.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is seller.</li><li value=\"2\">The buyer cancelled the order.</li></ol></pre>\n      </div>\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is buyer.\nYou cancelled the order.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is buyer.</li><li value=\"2\">You cancelled the order.</li></ol></pre>\n      </div>\n    </div>\n  </li>\n</ol>\n<h1 id=\"wfs-19\" class=\"refHeader\">Complete a transaction<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-19\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_142\" class=\"pid\"></i>This section shows you how to get wisdom from the <code>seller</code> on the frontend, and swap it for tokens on the backend.<a href=\"#p_142\" class=\"pid\">142</a></p>\n<ol>\n  <li>\n    <p><i id=\"p_143\" class=\"pid\"></i>In <code>index.mjs</code>, add a <code>wisdom</code> property to <code>sellerInteract</code> right after the <code>price</code> property:<a href=\"#p_143\" class=\"pid\">143</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.mjs\">/examples/wisdom-12-complete/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Seller\nif (role === 'seller') {\n  const sellerInteract = {\n    ...commonInteract(role),\n    price: toAU(5),\n    wisdom: await ask.ask('Enter a wise phrase, or press Enter for default:', (s) => {\n      let w = !s ? 'Build healthy communities.' : s;\n      if (!s) { console.log(w); }\n      return w;\n    }),\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"26\"><span style=\"color: var(--shiki-token-comment)\">// Seller</span></li><li value=\"27\"><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (role </span><span style=\"color: var(--shiki-token-keyword)\">===</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\">) {</span></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-token-function)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\">(role)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">    price</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">5</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"31\"><span style=\"color: var(--shiki-color-text)\">    wisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Enter a wise phrase, or press Enter for default:'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> (s) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"32\"><span style=\"color: var(--shiki-color-text)\">      </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let\" title=\"js: let\"><span style=\"color: var(--shiki-token-keyword)\">let</span></a><span style=\"color: var(--shiki-color-text)\"> w </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">!</span><span style=\"color: var(--shiki-color-text)\">s </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'Build healthy communities.'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> s;</span></li><li value=\"33\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (</span><span style=\"color: var(--shiki-token-keyword)\">!</span><span style=\"color: var(--shiki-color-text)\">s) { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(w); }</span></li><li value=\"34\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-keyword)\">return</span><span style=\"color: var(--shiki-color-text)\"> w;</span></li><li value=\"35\"><span style=\"color: var(--shiki-color-text)\">    })</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_144\" class=\"pid\"></i>In <code>index.rsh</code>, add a <code>wisdom</code> property to <code>sellerInteract</code> right after the <code>price</code> property:<a href=\"#p_144\" class=\"pid\">144</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.rsh\">/examples/wisdom-12-complete/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const sellerInteract = {\n  ...commonInteract,\n  price: UInt,\n  wisdom: Bytes(128),\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"7\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"8\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"9\"><span style=\"color: var(--shiki-color-text)\">  price</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"10\"><span style=\"color: var(--shiki-color-text)\">  wisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Bytes\" title=\"rsh: Bytes\"><span style=\"color: var(--shiki-token-function)\">Bytes</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">128</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_145\" class=\"pid\"></i>In <code>index.rsh</code>, add a <code>reportPayment</code> property to <code>commonInteract</code> right after the <code>reportCancellation</code> property:<a href=\"#p_145\" class=\"pid\">145</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.rsh\">/examples/wisdom-12-complete/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const commonInteract = {\n  reportCancellation: Fun([], Null),\n  reportPayment: Fun([UInt], Null),\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"3\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"4\"><span style=\"color: var(--shiki-color-text)\">  reportCancellation</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  reportPayment</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_146\" class=\"pid\"></i>In <code>index.mjs</code>, add <code>reportWisdom</code> to <code>buyerInteract</code> after <code>confirmPurchase</code>:<a href=\"#p_146\" class=\"pid\">146</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.mjs\">/examples/wisdom-12-complete/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"// Buyer\n} else {\n  const buyerInteract = {\n    ...commonInteract(role),\n    confirmPurchase: async (price) => await ask.ask(`Do you want to purchase wisdom for ${toSU(price)} ${suStr}?`, ask.yesno),\n    reportWisdom: (wisdom) => console.log(`Your new wisdom is &quot;${wisdom}&quot;`),\n  };\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"48\"><span style=\"color: var(--shiki-token-comment)\">// Buyer</span></li><li value=\"49\"><span style=\"color: var(--shiki-color-text)\">} </span><span style=\"color: var(--shiki-token-keyword)\">else</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"50\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"51\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-token-function)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\">(role)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"52\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">confirmPurchase</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (price) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Do you want to purchase wisdom for </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(price)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">?`</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><span style=\"color: var(--shiki-color-text)\">.yesno)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"53\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">reportWisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> (wisdom) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your new wisdom is \"</span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">wisdom</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">\"`</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"54\"><span style=\"color: var(--shiki-color-text)\">  };</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_147\" class=\"pid\"></i>In <code>index.rsh</code>, add <code>reportWisdom</code> to <code>buyerInteract</code>:<a href=\"#p_147\" class=\"pid\">147</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.rsh\">/examples/wisdom-12-complete/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const buyerInteract = {\n  ...commonInteract,\n  confirmPurchase: Fun([UInt], Bool),\n  reportWisdom: Fun([Bytes(128)], Null)\n};\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"13\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"14\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"15\"><span style=\"color: var(--shiki-color-text)\">  confirmPurchase</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Bool)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"16\"><span style=\"color: var(--shiki-color-text)\">  reportWisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([</span><a href=\"/rsh/compute/#rsh_Bytes\" title=\"rsh: Bytes\"><span style=\"color: var(--shiki-token-function)\">Bytes</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">128</span><span style=\"color: var(--shiki-color-text)\">)]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span></li><li value=\"17\"><span style=\"color: var(--shiki-color-text)\">};</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_148\" class=\"pid\"></i>In <code>index.rsh</code>, add the following before <span class=\"snip\"><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span>:<a href=\"#p_148\" class=\"pid\">148</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.rsh\">/examples/wisdom-12-complete/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  B.pay(price);\n  each([S, B], () => interact.reportPayment(price));\n  commit();\n\n  S.only(() => { const wisdom = declassify(interact.wisdom); });\n  S.publish(wisdom);\n  transfer(price).to(S);\n  commit();\n\n  B.interact.reportWisdom(wisdom);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"39\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-token-function)\">.pay</span></a><span style=\"color: var(--shiki-color-text)\">(price);</span></li><li value=\"40\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportPayment</span><span style=\"color: var(--shiki-color-text)\">(price));</span></li><li value=\"41\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"42\"></li><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">wisdom</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.wisdom); });</span></li><li value=\"44\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li><li value=\"45\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-token-function)\">transfer</span></a><span style=\"color: var(--shiki-color-text)\">(price)</span><a href=\"/rsh/consensus/#rsh_transfer.to\" title=\"rsh: transfer.to\"><span style=\"color: var(--shiki-token-function)\">.to</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"46\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"47\"></li><li value=\"48\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportWisdom</span><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li></ol></pre>\n    <ul>\n      <li><i id=\"p_149\" class=\"pid\"></i>Line 39: The <code>buyer</code> always pays the contract.<a href=\"#p_149\" class=\"pid\">149</a></li>\n      <li><i id=\"p_150\" class=\"pid\"></i>Line 42: After the <code>buyer</code> commits to purchase, the <code>seller</code> declassifies the wisdom.<a href=\"#p_150\" class=\"pid\">150</a></li>\n      <li><i id=\"p_151\" class=\"pid\"></i>Line 43: The <code>seller</code> makes the wisdom available to the <code>buyer</code>.<a href=\"#p_151\" class=\"pid\">151</a></li>\n      <li><i id=\"p_152\" class=\"pid\"></i>Line 44: The contract transfers funds to the <code>seller</code>.<a href=\"#p_152\" class=\"pid\">152</a></li>\n      <li><i id=\"p_153\" class=\"pid\"></i>Line 47: The <code>buyer</code> sends the new wisdom to the frontend for the user.<a href=\"#p_153\" class=\"pid\">153</a></li>\n    </ul>\n    <p>\n      <i id=\"p_154\" class=\"pid\"></i>It might be nice to inform the <code>seller</code> and the <code>buyer</code> when the <span class=\"snip\"><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-color-text)\">pay</span></a></span> and <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-color-text)\">transfer</span></a></span> actions take place.\n      The next steps add these improvements.<a href=\"#p_154\" class=\"pid\">154</a>\n    </p>\n  </li>\n  <li>\n    <p><i id=\"p_155\" class=\"pid\"></i>In <code>index.mjs</code>, add <code>reportCancellation</code> to <code>commonInteract</code>:<a href=\"#p_155\" class=\"pid\">155</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.mjs\">/examples/wisdom-12-complete/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  reportCancellation: () => { console.log(`${role == 'buyer' ? 'You' : 'The buyer'} cancelled the order.`); }\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"23\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">reportCancellation</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> () </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">role </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'buyer'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'You'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'The buyer'</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> cancelled the order.`</span><span style=\"color: var(--shiki-color-text)\">); }</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_156\" class=\"pid\"></i>In <code>index.rsh</code>, add <code>reportPayment</code> to <code>commonInteract</code>:<a href=\"#p_156\" class=\"pid\">156</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.rsh\">/examples/wisdom-12-complete/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  reportPayment: Fun([UInt], Null),\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  reportPayment</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_157\" class=\"pid\"></i>In <code>index.rsh</code>, add Lines 2 and 10 to existing code:<a href=\"#p_157\" class=\"pid\">157</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.rsh\">/examples/wisdom-12-complete/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  each([S, B], () => interact.reportPayment(price));\n  commit();\n\n  S.only(() => { const wisdom = declassify(interact.wisdom); });\n  S.publish(wisdom);\n  transfer(price).to(S);\n  commit();\n\n  B.interact.reportWisdom(wisdom);\n\n  exit();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"40\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportPayment</span><span style=\"color: var(--shiki-color-text)\">(price));</span></li><li value=\"41\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"42\"></li><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">wisdom</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.wisdom); });</span></li><li value=\"44\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li><li value=\"45\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-token-function)\">transfer</span></a><span style=\"color: var(--shiki-color-text)\">(price)</span><a href=\"/rsh/consensus/#rsh_transfer.to\" title=\"rsh: transfer.to\"><span style=\"color: var(--shiki-token-function)\">.to</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"46\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"47\"></li><li value=\"48\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportWisdom</span><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li><li value=\"49\"></li><li value=\"50\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n    <ul>\n      <li><i id=\"p_158\" class=\"pid\"></i>Line 41: <span class=\"snip\"><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-color-text)\">each</span></a></span> calls <span class=\"snip\"><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.reportPayment</span></span> for each participant in the array.<a href=\"#p_158\" class=\"pid\">158</a></li>\n      <li><i id=\"p_159\" class=\"pid\"></i>Line 49: <span class=\"snip\"><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-color-text)\">each</span></a></span> calls <span class=\"snip\"><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.reportTransfer</span></span> for each participant in the array.<a href=\"#p_159\" class=\"pid\">159</a></li>\n    </ul>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_160\" class=\"pid\"></i>Run your DApp as the <code>seller</code> and the <code>buyer</code>.\n      Answer <code>y</code> when asked to buy wisdom.\n      Output should resemble the following:<a href=\"#p_160\" class=\"pid\">160</a>\n    </p>\n    <div class=\"row gx-3\">\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is seller.\nThe consensus network is ALGO.\nEnter a wise phrase, or press Enter for default:\n\nBuild healthy communities.\nYour balance is 1000 ALGO.\nYour wisdom is for sale at 5 ALGO.\nContract info: {&quot;type&quot;:&quot;BigNumber&quot;,&quot;hex&quot;:&quot;0x6e&quot;}\nThe buyer paid 5 ALGO to the contract.\nThe contract paid 5 ALGO to you.\nYour balance is 1004.994 ALGO.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is seller.</li><li value=\"2\">The consensus network is ALGO.</li><li value=\"3\">Enter a wise phrase, or press Enter for default:</li><li value=\"4\"></li><li value=\"5\">Build healthy communities.</li><li value=\"6\">Your balance is 1000 ALGO.</li><li value=\"7\">Your wisdom is for sale at 5 ALGO.</li><li value=\"8\">Contract info: {\"type\":\"BigNumber\",\"hex\":\"0x6e\"}</li><li value=\"9\">The buyer paid 5 ALGO to the contract.</li><li value=\"10\">The contract paid 5 ALGO to you.</li><li value=\"11\">Your balance is 1004.994 ALGO.</li></ol></pre>\n      </div>\n      <div class=\"col-xl-4 col-md-6 col-sm-12\">\n        <pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Your role is buyer.\nThe consensus network is ALGO.\nPaste contract info:\n{&quot;type&quot;:&quot;BigNumber&quot;,&quot;hex&quot;:&quot;0x6e&quot;}\nYour balance is 1000 ALGO.\nDo you want to purchase wisdom for 5 ALGO?\ny\nYou paid 5 ALGO to the contract.\nThe contract paid 5 ALGO to the seller.\nYour new wisdom is &quot;Build healthy communities.&quot;\nYour balance is 994.997 ALGO.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">Your role is buyer.</li><li value=\"2\">The consensus network is ALGO.</li><li value=\"3\">Paste contract info:</li><li value=\"4\">{\"type\":\"BigNumber\",\"hex\":\"0x6e\"}</li><li value=\"5\">Your balance is 1000 ALGO.</li><li value=\"6\">Do you want to purchase wisdom for 5 ALGO?</li><li value=\"7\">y</li><li value=\"8\">You paid 5 ALGO to the contract.</li><li value=\"9\">The contract paid 5 ALGO to the seller.</li><li value=\"10\">Your new wisdom is \"Build healthy communities.\"</li><li value=\"11\">Your balance is 994.997 ALGO.</li></ol></pre>\n      </div>\n    </div>\n    <p>\n      <i id=\"p_161\" class=\"pid\"></i>Congratulations on completing the contract!\n      So far, you have learned how to create a contract, attach to the contract, cancel the contract, and complete the contract.\n      These are some of the most common interactions participants will experience after deploying or attaching to a Reach DApp.<a href=\"#p_161\" class=\"pid\">161</a>\n    </p>\n    <p><i id=\"p_162\" class=\"pid\"></i>Let's take a look at the final Reach code:<a href=\"#p_162\" class=\"pid\">162</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.rsh\">/examples/wisdom-12-complete/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"'reach 0.1';\n\nconst commonInteract = {\n  reportCancellation: Fun([], Null),\n  reportPayment: Fun([UInt], Null),\n};\nconst sellerInteract = {\n  ...commonInteract,\n  price: UInt,\n  wisdom: Bytes(128),\n  reportReady: Fun([UInt], Null),\n};\nconst buyerInteract = {\n  ...commonInteract,\n  confirmPurchase: Fun([UInt], Bool),\n  reportWisdom: Fun([Bytes(128)], Null)\n};\n\nexport const main = Reach.App(() => {\n  const S = Participant('Seller', sellerInteract);\n  const B = Participant('Buyer', buyerInteract);\n  init();\n\n  S.only(() => { const price = declassify(interact.price); });\n  S.publish(price);\n  S.interact.reportReady(price);\n  commit();\n\n  B.only(() => { const willBuy = declassify(interact.confirmPurchase(price)); });\n  B.publish(willBuy);\n  if (!willBuy) {\n    commit();\n    each([S, B], () => interact.reportCancellation());\n    exit();\n  } else {\n    commit();\n  }\n\n  B.pay(price);\n  each([S, B], () => interact.reportPayment(price));\n  commit();\n\n  S.only(() => { const wisdom = declassify(interact.wisdom); });\n  S.publish(wisdom);\n  transfer(price).to(S);\n  commit();\n\n  B.interact.reportWisdom(wisdom);\n\n  exit();\n});\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-string-expression)\">'reach 0.1'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"></li><li value=\"3\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"4\"><span style=\"color: var(--shiki-color-text)\">  reportCancellation</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  reportPayment</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">};</span></li><li value=\"7\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"8\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"9\"><span style=\"color: var(--shiki-color-text)\">  price</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"10\"><span style=\"color: var(--shiki-color-text)\">  wisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Bytes\" title=\"rsh: Bytes\"><span style=\"color: var(--shiki-token-function)\">Bytes</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">128</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"11\"><span style=\"color: var(--shiki-color-text)\">  reportReady</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"12\"><span style=\"color: var(--shiki-color-text)\">};</span></li><li value=\"13\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"14\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">commonInteract</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"15\"><span style=\"color: var(--shiki-color-text)\">  confirmPurchase</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Bool)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"16\"><span style=\"color: var(--shiki-color-text)\">  reportWisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([</span><a href=\"/rsh/compute/#rsh_Bytes\" title=\"rsh: Bytes\"><span style=\"color: var(--shiki-token-function)\">Bytes</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">128</span><span style=\"color: var(--shiki-color-text)\">)]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span></li><li value=\"17\"><span style=\"color: var(--shiki-color-text)\">};</span></li><li value=\"18\"></li><li value=\"19\"><a href=\"/rsh/module/#rsh_export\" title=\"rsh: export\"><span style=\"color: var(--shiki-token-keyword)\">export</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">main</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/module/#rsh_Reach\" title=\"rsh: Reach\"><span style=\"color: var(--shiki-token-constant)\">Reach</span></a><a href=\"/rsh/module/#rsh_Reach.App\" title=\"rsh: Reach.App\"><span style=\"color: var(--shiki-token-function)\">.App</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"20\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Seller'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> sellerInteract);</span></li><li value=\"21\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Buyer'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> buyerInteract);</span></li><li value=\"22\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"23\"></li><li value=\"24\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">price</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.price); });</span></li><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(price);</span></li><li value=\"26\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportReady</span><span style=\"color: var(--shiki-color-text)\">(price);</span></li><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"28\"></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">willBuy</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.confirmPurchase</span><span style=\"color: var(--shiki-color-text)\">(price)); });</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(willBuy);</span></li><li value=\"31\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_if\" title=\"rsh: if\"><span style=\"color: var(--shiki-token-keyword)\">if</span></a><span style=\"color: var(--shiki-color-text)\"> (</span><a href=\"/rsh/compute/#rsh_!\" title=\"rsh: !\"><span style=\"color: var(--shiki-token-keyword)\">!</span></a><span style=\"color: var(--shiki-color-text)\">willBuy) {</span></li><li value=\"32\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"33\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportCancellation</span><span style=\"color: var(--shiki-color-text)\">());</span></li><li value=\"34\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"35\"><span style=\"color: var(--shiki-color-text)\">  } </span><a href=\"/rsh/compute/#rsh_else\" title=\"rsh: else\"><span style=\"color: var(--shiki-token-keyword)\">else</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"36\"><span style=\"color: var(--shiki-color-text)\">    </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"37\"><span style=\"color: var(--shiki-color-text)\">  }</span></li><li value=\"38\"></li><li value=\"39\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-token-function)\">.pay</span></a><span style=\"color: var(--shiki-color-text)\">(price);</span></li><li value=\"40\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportPayment</span><span style=\"color: var(--shiki-color-text)\">(price));</span></li><li value=\"41\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"42\"></li><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">wisdom</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.wisdom); });</span></li><li value=\"44\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li><li value=\"45\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-token-function)\">transfer</span></a><span style=\"color: var(--shiki-color-text)\">(price)</span><a href=\"/rsh/consensus/#rsh_transfer.to\" title=\"rsh: transfer.to\"><span style=\"color: var(--shiki-token-function)\">.to</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"46\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"47\"></li><li value=\"48\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportWisdom</span><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li><li value=\"49\"></li><li value=\"50\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_exit\" title=\"rsh: exit\"><span style=\"color: var(--shiki-token-function)\">exit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"51\"><span style=\"color: var(--shiki-color-text)\">});</span></li></ol></pre>\n    <p><i id=\"p_163\" class=\"pid\"></i>And the final frontend code:<a href=\"#p_163\" class=\"pid\">163</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-12-complete/index.mjs\">/examples/wisdom-12-complete/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"import { loadStdlib } from '@reach-sh/stdlib';\nimport * as backend from './build/index.main.mjs';\nimport {ask} from '@reach-sh/stdlib';\n\nif (process.argv.length < 3 || ['seller', 'buyer'].includes(process.argv[2]) == false) {\n  console.log('Usage: reach run index [seller|buyer]');\n  process.exit(0);\n}\nconst role = process.argv[2];\nconsole.log(`Your role is ${role}`);\n\nconst stdlib = loadStdlib(process.env);\nconsole.log(`The consensus network is ${stdlib.connector}.`);\nconst suStr = stdlib.standardUnit;\nconst toAU = (su) => stdlib.parseCurrency(su);\nconst toSU = (au) => stdlib.formatCurrency(au, 4);\nconst iBalance = toAU(1000);\nconst showBalance = async (acc) => console.log(`Your balance is ${toSU(await stdlib.balanceOf(acc))} ${suStr}.`);\n\nconst commonInteract = (role) => ({\n  reportTransfer: (payment) => { console.log(`The contract paid ${toSU(payment)} ${suStr} to ${role == 'seller' ? 'you' : 'the seller'}.`) },\n  reportPayment: (payment) => { console.log(`${role == 'buyer' ? 'You' : 'The buyer'} paid ${toSU(payment)} ${suStr} to the contract.`) },\n  reportCancellation: () => { console.log(`${role == 'buyer' ? 'You' : 'The buyer'} cancelled the order.`); }\n});\n\n// Seller\nif (role === 'seller') {\n  const sellerInteract = {\n    ...commonInteract(role),\n    price: toAU(5),\n    wisdom: await ask.ask('Enter a wise phrase, or press Enter for default:', (s) => {\n      let w = !s ? 'Build healthy communities.' : s;\n      if (!s) { console.log(w); }\n      return w;\n    }),\n    reportReady: async (price) => {\n      console.log(`Your wisdom is for sale at ${toSU(price)} ${suStr}.`);\n      console.log(`Contract info: ${JSON.stringify(await ctc.getInfo())}`);\n    },\n  };\n\n  const acc = await stdlib.newTestAccount(iBalance);\n  await showBalance(acc);\n  const ctc = acc.contract(backend);\n  await ctc.participants.Seller(sellerInteract);\n  await showBalance(acc);\n\n// Buyer\n} else {\n  const buyerInteract = {\n    ...commonInteract(role),\n    confirmPurchase: async (price) => await ask.ask(`Do you want to purchase wisdom for ${toSU(price)} ${suStr}?`, ask.yesno),\n    reportWisdom: (wisdom) => console.log(`Your new wisdom is &quot;${wisdom}&quot;`),\n  };\n\n  const acc = await stdlib.newTestAccount(iBalance);\n  const info = await ask.ask('Paste contract info:', (s) => JSON.parse(s));\n  const ctc = acc.contract(backend, info);\n  await showBalance(acc);\n  await ctc.p.Buyer(buyerInteract);\n  await showBalance(acc);\n};\n\nask.done();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> { loadStdlib } </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'@reach-sh/stdlib'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">*</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">as</span><span style=\"color: var(--shiki-color-text)\"> backend </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'./build/index.main.mjs'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"3\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\" title=\"js: import\"><span style=\"color: var(--shiki-token-keyword)\">import</span></a><span style=\"color: var(--shiki-color-text)\"> {ask} </span><span style=\"color: var(--shiki-token-keyword)\">from</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'@reach-sh/stdlib'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"4\"></li><li value=\"5\"><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (</span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.</span><span style=\"color: var(--shiki-token-constant)\">argv</span><span style=\"color: var(--shiki-color-text)\">.</span><span style=\"color: var(--shiki-token-constant)\">length</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">&lt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">3</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">||</span><span style=\"color: var(--shiki-color-text)\"> [</span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'buyer'</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-function)\">.includes</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.argv[</span><span style=\"color: var(--shiki-token-constant)\">2</span><span style=\"color: var(--shiki-color-text)\">]) </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">false</span><span style=\"color: var(--shiki-color-text)\">) {</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Usage: reach run index [seller|buyer]'</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"7\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-token-function)\">.exit</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">0</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"8\"><span style=\"color: var(--shiki-color-text)\">}</span></li><li value=\"9\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">role</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.argv[</span><span style=\"color: var(--shiki-token-constant)\">2</span><span style=\"color: var(--shiki-color-text)\">];</span></li><li value=\"10\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your role is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">role</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"11\"></li><li value=\"12\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_loadStdlib\" title=\"js: loadStdlib\"><span style=\"color: var(--shiki-token-function)\">loadStdlib</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">process</span><span style=\"color: var(--shiki-color-text)\">.env);</span></li><li value=\"13\"><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The consensus network is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.connector\" title=\"js: stdlib.connector\"><span style=\"color: var(--shiki-color-text)\">.connector</span></a><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"14\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">suStr</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><span style=\"color: var(--shiki-color-text)\">.standardUnit;</span></li><li value=\"15\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (su) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_parseCurrency\" title=\"js: parseCurrency\"><span style=\"color: var(--shiki-token-function)\">.parseCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(su);</span></li><li value=\"16\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (au) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_formatCurrency\" title=\"js: formatCurrency\"><span style=\"color: var(--shiki-token-function)\">.formatCurrency</span></a><span style=\"color: var(--shiki-color-text)\">(au</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">4</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"17\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">iBalance</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">1000</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"18\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (acc) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your balance is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.balanceOf\" title=\"js: stdlib.balanceOf\"><span style=\"color: var(--shiki-token-function)\">.balanceOf</span></a><span style=\"color: var(--shiki-color-text)\">(acc))</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"19\"></li><li value=\"20\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> (role) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> ({</span></li><li value=\"21\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">reportTransfer</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> (payment) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The contract paid </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(payment)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> to </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">role </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'you'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'the seller'</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">) }</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"22\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">reportPayment</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> (payment) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">role </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'buyer'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'You'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'The buyer'</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> paid </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(payment)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> to the contract.`</span><span style=\"color: var(--shiki-color-text)\">) }</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"23\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-function)\">reportCancellation</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> () </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">role </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'buyer'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'You'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'The buyer'</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> cancelled the order.`</span><span style=\"color: var(--shiki-color-text)\">); }</span></li><li value=\"24\"><span style=\"color: var(--shiki-color-text)\">});</span></li><li value=\"25\"></li><li value=\"26\"><span style=\"color: var(--shiki-token-comment)\">// Seller</span></li><li value=\"27\"><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (role </span><span style=\"color: var(--shiki-token-keyword)\">===</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'seller'</span><span style=\"color: var(--shiki-color-text)\">) {</span></li><li value=\"28\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">sellerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"29\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-token-function)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\">(role)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"30\"><span style=\"color: var(--shiki-color-text)\">    price</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toAU</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">5</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"31\"><span style=\"color: var(--shiki-color-text)\">    wisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Enter a wise phrase, or press Enter for default:'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> (s) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"32\"><span style=\"color: var(--shiki-color-text)\">      </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let\" title=\"js: let\"><span style=\"color: var(--shiki-token-keyword)\">let</span></a><span style=\"color: var(--shiki-color-text)\"> w </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">!</span><span style=\"color: var(--shiki-color-text)\">s </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'Build healthy communities.'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> s;</span></li><li value=\"33\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-keyword)\">if</span><span style=\"color: var(--shiki-color-text)\"> (</span><span style=\"color: var(--shiki-token-keyword)\">!</span><span style=\"color: var(--shiki-color-text)\">s) { </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(w); }</span></li><li value=\"34\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-keyword)\">return</span><span style=\"color: var(--shiki-color-text)\"> w;</span></li><li value=\"35\"><span style=\"color: var(--shiki-color-text)\">    })</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"36\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">reportReady</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (price) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"37\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your wisdom is for sale at </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(price)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"38\"><span style=\"color: var(--shiki-color-text)\">      </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Contract info: </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-constant)\">JSON</span><span style=\"color: var(--shiki-token-function)\">.stringify</span><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><a href=\"/frontend/#js_getInfo\" title=\"js: getInfo\"><span style=\"color: var(--shiki-token-function)\">.getInfo</span></a><span style=\"color: var(--shiki-color-text)\">())</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"39\"><span style=\"color: var(--shiki-color-text)\">    }</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"40\"><span style=\"color: var(--shiki-color-text)\">  };</span></li><li value=\"41\"></li><li value=\"42\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(iBalance);</span></li><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"44\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend);</span></li><li value=\"45\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.participants\" title=\"js: ctc.participants\"><span style=\"color: var(--shiki-token-constant)\">participants</span></a><span style=\"color: var(--shiki-token-function)\">.Seller</span><span style=\"color: var(--shiki-color-text)\">(sellerInteract);</span></li><li value=\"46\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"47\"></li><li value=\"48\"><span style=\"color: var(--shiki-token-comment)\">// Buyer</span></li><li value=\"49\"><span style=\"color: var(--shiki-color-text)\">} </span><span style=\"color: var(--shiki-token-keyword)\">else</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"50\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">buyerInteract</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"51\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-token-function)\">commonInteract</span><span style=\"color: var(--shiki-color-text)\">(role)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"52\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">confirmPurchase</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (price) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Do you want to purchase wisdom for </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(price)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">?`</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><span style=\"color: var(--shiki-color-text)\">.yesno)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"53\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">reportWisdom</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> (wisdom) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Your new wisdom is \"</span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">wisdom</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">\"`</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"54\"><span style=\"color: var(--shiki-color-text)\">  };</span></li><li value=\"55\"></li><li value=\"56\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(iBalance);</span></li><li value=\"57\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">info</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Paste contract info:'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> (s) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">JSON</span><span style=\"color: var(--shiki-token-function)\">.parse</span><span style=\"color: var(--shiki-color-text)\">(s));</span></li><li value=\"58\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> info);</span></li><li value=\"59\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"60\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.p\" title=\"js: ctc.p\"><span style=\"color: var(--shiki-token-constant)\">p</span></a><span style=\"color: var(--shiki-token-function)\">.Buyer</span><span style=\"color: var(--shiki-color-text)\">(buyerInteract);</span></li><li value=\"61\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"62\"><span style=\"color: var(--shiki-color-text)\">};</span></li><li value=\"63\"></li><li value=\"64\"><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.done\" title=\"js: ask.done\"><span style=\"color: var(--shiki-token-function)\">.done</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n  </li>\n</ol>\n<h1 id=\"wfs-20\" class=\"refHeader\">View the contract<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-20\"><span class=\"icon icon-link\"></span></a></h1>\n<p>\n  <i id=\"p_164\" class=\"pid\"></i>You have learned about command-line DApps, but customers prefer to use a GUI DApp.\n  GUI stands for \"graphical user interface\" and uses buttons, pop-ups, or other graphical elements to make the interface more user-friendly.\n  This section gives a taste of using a GUI to have the <code>buyer</code> peek into the deployed contract before attaching to view the price.\n  Allowing a <code>buyer</code> to view the contract before attaching is a better user experience, and better user experiences generally lead to more users.<a href=\"#p_164\" class=\"pid\">164</a>\n</p>\n<p><i id=\"p_165\" class=\"pid\"></i>Review the the <code>index.mjs</code> version of <code>confirmPurchase</code> from the <code>buyerInteract</code> object:<a href=\"#p_165\" class=\"pid\">165</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-9-interaction/index.mjs\">/examples/wisdom-9-interaction/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"    confirmPurchase: async (price) => await ask.ask(`Do you want to purchase wisdom for ${toSU(price)} ${suStr}?`, ask.yesno),\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-function)\">confirmPurchase</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" title=\"js: async\"><span style=\"color: var(--shiki-token-keyword)\">async</span></a><span style=\"color: var(--shiki-color-text)\"> (price) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`Do you want to purchase wisdom for </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(price)</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">?`</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><span style=\"color: var(--shiki-color-text)\">.yesno)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li></ol></pre>\n<p>\n  <i id=\"p_166\" class=\"pid\"></i>Currently, the backend calls the function passing the <code>price</code> of the contract, and the frontend displays <code>price</code> to the <code>buyer</code>, asks for a decision, waits for the answer, and returns <code>true</code> or <code>false</code> to the backend.\n  This approach doesn't work well for a Web-app which might use a modal (an informative pop-up) in place of <span class=\"snip\"><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.yesno\" title=\"js: ask.yesno\"><span style=\"color: var(--shiki-color-text)\">.yesno</span></a></span>:<a href=\"#p_166\" class=\"pid\">166</a>\n</p>\n<div>\n  <img src=\"/tut/wfs/modal.png\" class=\"img-fluid my-4 d-block\" width=\"400\" loading=\"lazy\">\n</div>\n<p><i id=\"p_167\" class=\"pid\"></i>Here is how to display a modal using Bootstrap:<a href=\"#p_167\" class=\"pid\">167</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"const modal = new bootstrap.Modal(document.getElementById('confirm-modal'), {})\nmodal.show();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">modal</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">new</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">bootstrap</span><span style=\"color: var(--shiki-token-function)\">.Modal</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">document</span><span style=\"color: var(--shiki-token-function)\">.getElementById</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'confirm-modal'</span><span style=\"color: var(--shiki-color-text)\">)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {})</span></li><li value=\"2\"><span style=\"color: var(--shiki-token-constant)\">modal</span><span style=\"color: var(--shiki-token-function)\">.show</span><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n<p><i id=\"p_168\" class=\"pid\"></i>A Web-app can do the following prior to attaching to the contract:<a href=\"#p_168\" class=\"pid\">168</a></p>\n<ol>\n  <li><i id=\"p_169\" class=\"pid\"></i>Get and display the price to the <code>buyer</code>.<a href=\"#p_169\" class=\"pid\">169</a></li>\n  <li><i id=\"p_170\" class=\"pid\"></i>Get confirmation from the <code>buyer</code>.<a href=\"#p_170\" class=\"pid\">170</a></li>\n</ol>\n<p>\n  <i id=\"p_171\" class=\"pid\"></i>Once confirmed, the Web-app can attach to the contract and complete the transaction.\n  The following directions show you how to obtain <code>price</code> from the contract before attaching:<a href=\"#p_171\" class=\"pid\">171</a>\n</p>\n<ol>\n  <li>\n    <p><i id=\"p_172\" class=\"pid\"></i>In <code>index.rsh</code>, add Lines 46 and 51:<a href=\"#p_172\" class=\"pid\">172</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-14-modal/index.rsh\">/examples/wisdom-14-modal/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  B.pay(price);\n  each([S, B], () => interact.reportPayment(price));\n  commit();\n\n  S.only(() => { const wisdom = declassify(interact.wisdom); });\n  S.publish(wisdom);\n  transfer(price).to(S);\n  commit();\n\n  each([S, B], () => interact.reportTransfer(price));\n  B.interact.reportWisdom(wisdom);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"42\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><a href=\"/rsh/step/#rsh_pay\" title=\"rsh: pay\"><span style=\"color: var(--shiki-token-function)\">.pay</span></a><span style=\"color: var(--shiki-color-text)\">(price);</span></li><li value=\"43\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportPayment</span><span style=\"color: var(--shiki-color-text)\">(price));</span></li><li value=\"44\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"45\"></li><li value=\"46\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_only\" title=\"rsh: only\"><span style=\"color: var(--shiki-token-function)\">.only</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> { </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">wisdom</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_declassify\" title=\"rsh: declassify\"><span style=\"color: var(--shiki-token-function)\">declassify</span></a><span style=\"color: var(--shiki-color-text)\">(</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-color-text)\">.wisdom); });</span></li><li value=\"47\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">S</span><a href=\"/rsh/step/#rsh_publish\" title=\"rsh: publish\"><span style=\"color: var(--shiki-token-function)\">.publish</span></a><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li><li value=\"48\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_transfer\" title=\"rsh: transfer\"><span style=\"color: var(--shiki-token-function)\">transfer</span></a><span style=\"color: var(--shiki-color-text)\">(price)</span><a href=\"/rsh/consensus/#rsh_transfer.to\" title=\"rsh: transfer.to\"><span style=\"color: var(--shiki-token-function)\">.to</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"49\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/consensus/#rsh_commit\" title=\"rsh: commit\"><span style=\"color: var(--shiki-token-function)\">commit</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"50\"></li><li value=\"51\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/step/#rsh_each\" title=\"rsh: each\"><span style=\"color: var(--shiki-token-function)\">each</span></a><span style=\"color: var(--shiki-color-text)\">([</span><span style=\"color: var(--shiki-token-constant)\">S</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-color-text)\">]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> () </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportTransfer</span><span style=\"color: var(--shiki-color-text)\">(price));</span></li><li value=\"52\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">B</span><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/rsh/local/#rsh_interact\" title=\"rsh: interact\"><span style=\"color: var(--shiki-token-constant)\">interact</span></a><span style=\"color: var(--shiki-token-function)\">.reportWisdom</span><span style=\"color: var(--shiki-color-text)\">(wisdom);</span></li></ol></pre>\n  </li>\n  <li>\n    <p><i id=\"p_173\" class=\"pid\"></i>In <code>index.mjs</code>, add Lines 59 and 60 (in the <code>buyer</code> section):<a href=\"#p_173\" class=\"pid\">173</a></p>\n    <pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/wisdom-14-modal/index.mjs\">/examples/wisdom-14-modal/index.mjs</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  const acc = await stdlib.newTestAccount(iBalance);\n  const info = await ask.ask('Paste contract info:', (s) => JSON.parse(s));\n  const ctc = acc.contract(backend, info);\n  const price = await ctc.views.Main.price();\n  console.log(`The price of wisdom is ${price[0] == 'None' ? '0' : toSU(price[1])} ${suStr}.`);\n  await showBalance(acc);\n  await ctc.p.Buyer(buyerInteract);\n  await showBalance(acc);\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"56\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">stdlib</span><a href=\"/frontend/#js_stdlib.newTestAccount\" title=\"js: stdlib.newTestAccount\"><span style=\"color: var(--shiki-token-function)\">.newTestAccount</span></a><span style=\"color: var(--shiki-color-text)\">(iBalance);</span></li><li value=\"57\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">info</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ask\" title=\"js: ask\"><span style=\"color: var(--shiki-token-constant)\">ask</span></a><a href=\"/frontend/#js_ask.ask\" title=\"js: ask.ask\"><span style=\"color: var(--shiki-token-function)\">.ask</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Paste contract info:'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> (s) </span><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">JSON</span><span style=\"color: var(--shiki-token-function)\">.parse</span><span style=\"color: var(--shiki-color-text)\">(s));</span></li><li value=\"58\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_acc\" title=\"js: acc\"><span style=\"color: var(--shiki-token-constant)\">acc</span></a><a href=\"/frontend/#js_contract\" title=\"js: contract\"><span style=\"color: var(--shiki-token-function)\">.contract</span></a><span style=\"color: var(--shiki-color-text)\">(backend</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> info);</span></li><li value=\"59\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" title=\"js: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">price</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.views\" title=\"js: ctc.views\"><span style=\"color: var(--shiki-token-constant)\">views</span></a><span style=\"color: var(--shiki-token-function)\">.</span><span style=\"color: var(--shiki-token-constant)\">Main</span><span style=\"color: var(--shiki-token-function)\">.price</span><span style=\"color: var(--shiki-color-text)\">();</span></li><li value=\"60\"><span style=\"color: var(--shiki-color-text)\">  </span><span style=\"color: var(--shiki-token-constant)\">console</span><span style=\"color: var(--shiki-token-function)\">.log</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">`The price of wisdom is </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">price[</span><span style=\"color: var(--shiki-token-constant)\">0</span><span style=\"color: var(--shiki-color-text)\">] </span><span style=\"color: var(--shiki-token-keyword)\">==</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'None'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">?</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">'0'</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">toSU</span><span style=\"color: var(--shiki-color-text)\">(price[</span><span style=\"color: var(--shiki-token-constant)\">1</span><span style=\"color: var(--shiki-color-text)\">])</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\"> </span><span style=\"color: var(--shiki-token-keyword)\">${</span><span style=\"color: var(--shiki-color-text)\">suStr</span><span style=\"color: var(--shiki-token-keyword)\">}</span><span style=\"color: var(--shiki-token-string-expression)\">.`</span><span style=\"color: var(--shiki-color-text)\">);</span></li><li value=\"61\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li><li value=\"62\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/frontend/#js_ctc\" title=\"js: ctc\"><span style=\"color: var(--shiki-token-constant)\">ctc</span></a><span style=\"color: var(--shiki-token-function)\">.</span><a href=\"/frontend/#js_ctc.p\" title=\"js: ctc.p\"><span style=\"color: var(--shiki-token-constant)\">p</span></a><span style=\"color: var(--shiki-token-function)\">.Buyer</span><span style=\"color: var(--shiki-color-text)\">(buyerInteract);</span></li><li value=\"63\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await\" title=\"js: await\"><span style=\"color: var(--shiki-token-keyword)\">await</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">showBalance</span><span style=\"color: var(--shiki-color-text)\">(acc);</span></li></ol></pre>\n  </li>\n  <li>\n    <p>\n      <i id=\"p_174\" class=\"pid\"></i>Run your DApp as the <code>seller</code> and the <code>buyer</code>.\n      <code>Buyer</code> output should include the following:<a href=\"#p_174\" class=\"pid\">174</a>\n    </p>\n    <pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"The price of wisdom is 5 ALGO.\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\">The price of wisdom is 5 ALGO.</li></ol></pre>\n  </li>\n</ol>\n<p>\n  <i id=\"p_175\" class=\"pid\"></i>The <code>buyer</code> is able to obtain <code>price</code> before attaching to the contract by using a view.\n  Now, if the <code>buyer</code> decides not to buy, he did not pay the cost of connecting to the contract, as he did in <a href=\"/tut/wfs/#wfs-17\">Attach to the contract</a>.\n  This saves the <code>buyer</code> money and frustration from paying a fee while getting nothing in return, and greatly improves the user experience.\n  If you want to learn more about GUI Dapps, see our next tutorial.<a href=\"#p_175\" class=\"pid\">175</a>\n</p>\n<h1 id=\"wfs-21\" class=\"refHeader\">Review and further learning<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-21\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_176\" class=\"pid\"></i>Let's review the subjects learned in this tutorial:<a href=\"#p_176\" class=\"pid\">176</a></p>\n<ul>\n  <li><i id=\"p_177\" class=\"pid\"></i>In <a href=\"/tut/wfs/#wfs-2\">Reach Modes</a>, we learned the different modes of a Reach program: Init, Step, Local Step, and Consensus Step.<a href=\"#p_177\" class=\"pid\">177</a></li>\n  <li><i id=\"p_178\" class=\"pid\"></i><a href=\"/tut/wfs/#wfs-8\">Pre-coding preparation</a> helped us learn how to pre-code, increasing coding accuracy and speed.<a href=\"#p_178\" class=\"pid\">178</a></li>\n  <li><i id=\"p_179\" class=\"pid\"></i>In <a href=\"/tut/wfs/#wfs-10\">Create the files</a>, we created the initial Reach files so we could start coding our DApp.<a href=\"#p_179\" class=\"pid\">179</a></li>\n  <li><i id=\"p_180\" class=\"pid\"></i><a href=\"/tut/wfs/#wfs-13\">Run the DApp</a> showed us how to run a Reach program.<a href=\"#p_180\" class=\"pid\">180</a></li>\n  <li><i id=\"p_181\" class=\"pid\"></i>We explored <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">formatCurrency</span></span> and <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></span>, their uses, and how to convert between them in <a href=\"/tut/wfs/#wfs-15\">Explore units and balances</a>.<a href=\"#p_181\" class=\"pid\">181</a></li>\n  <li><i id=\"p_182\" class=\"pid\"></i>In <a href=\"/tut/wfs/#wfs-16\">Deploy the contract</a>, we learned how to deploy a contract to the devnet.<a href=\"#p_182\" class=\"pid\">182</a></li>\n  <li><i id=\"p_183\" class=\"pid\"></i>We learned about attaching to a contract in <a href=\"/tut/wfs/#wfs-17\">Attach to the contract</a>.<a href=\"#p_183\" class=\"pid\">183</a></li>\n  <li><i id=\"p_184\" class=\"pid\"></i>We figured out how to tell participants that the contract was cancelled in <a href=\"/tut/wfs/#wfs-18\">Cancel a transaction</a>.<a href=\"#p_184\" class=\"pid\">184</a></li>\n  <li><i id=\"p_185\" class=\"pid\"></i>In <a href=\"/tut/wfs/#wfs-19\">Complete a transaction</a>, we completed the transaction and saw the results of the contract.<a href=\"#p_185\" class=\"pid\">185</a></li>\n  <li><i id=\"p_186\" class=\"pid\"></i>And finally, in <a href=\"/tut/wfs/#wfs-20\">View the contract</a>, we utilized Bootstrap to allow buyers to see the contract prior to attaching.<a href=\"#p_186\" class=\"pid\">186</a></li>\n</ul>\n<p>\n  <i id=\"p_187\" class=\"pid\"></i>Congratulations!\n  A great next step is to check out the next <a href=\"/tut/rps/#tut\">tutorial</a> to continue your learning, or visit one of our <a href=\"/guide/#guide\">guide topics</a> or <a href=\"/workshop/#workshop\">workshops</a> for self-guided exploration of Reach.<a href=\"#p_187\" class=\"pid\">187</a>\n</p>\n<p>\n  <i id=\"p_188\" class=\"pid\"></i>Join us on Discord <a href=\"https://discord.gg/AZsgcXu\">the Discord community</a> and message <code>@team, I just completed the Wisdom For Sale tutorial!</code>.\n  We will give you the <code>tutorial veteran</code> role, so you can more easily help others work through it!<a href=\"#p_188\" class=\"pid\">188</a>\n</p>\n<h1 id=\"wfs-22\" class=\"refHeader\">Self Assessment<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#wfs-22\"><span class=\"icon icon-link\"></span></a></h1>\n<p><i id=\"p_189\" class=\"pid\"></i>Click on the question to view the answer.<a href=\"#p_189\" class=\"pid\">189</a></p>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q0\">\n  <p><i id=\"p_190\" class=\"pid\"></i>Do smart contracts use standard or atomic units?<a href=\"#p_190\" class=\"pid\">190</a></p>\n  <div class=\"collapse\" id=\"q0\">\n    <p>\n      <i id=\"p_191\" class=\"pid\"></i>Smart contracts use atomic (indivisible) units. User interfaces, on the other hand, often use standard units to present cryptocurrency amounts to users. Therefore, Reach frontends frequently need to convert between the two. The Reach JS Stdlib function <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">parseCurrency</span></span> converts from standard to atomic, and the function <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">formatCurrency</span></span> converts from atomic to standard.\n      :::<a href=\"#p_191\" class=\"pid\">191</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q1\">\n  <p><i id=\"p_192\" class=\"pid\"></i>Reach DApps create smart contracts that enable ____ to interact on consensus networks.<a href=\"#p_192\" class=\"pid\">192</a></p>\n  <div class=\"collapse\" id=\"q1\">\n    <p>\n      <i id=\"p_193\" class=\"pid\"></i>Participants. A Reach program describes participant interactions from which the Reach compiler derives a smart contract.\n      :::<a href=\"#p_193\" class=\"pid\">193</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q2\">\n  <p><i id=\"p_194\" class=\"pid\"></i>Name the objects that comprise the interface between Reach frontend and backend participants.<a href=\"#p_194\" class=\"pid\">194</a></p>\n  <div class=\"collapse\" id=\"q2\">\n    <p>\n      <i id=\"p_195\" class=\"pid\"></i>Interact objects enable Reach frontend and backend participants to communicate.\n      :::<a href=\"#p_195\" class=\"pid\">195</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q3\">\n  <p><i id=\"p_196\" class=\"pid\"></i>Name the Reach default frontend and backend files.<a href=\"#p_196\" class=\"pid\">196</a></p>\n  <div class=\"collapse\" id=\"q3\">\n    <p>\n      <i id=\"p_197\" class=\"pid\"></i><code>index.mjs</code> and <code>index.rsh</code> are the default frontend and backend filenames respectively. The Reach compiler compiles <code>index.rsh</code> into <code>index.main.mjs</code>.\n      :::<a href=\"#p_197\" class=\"pid\">197</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q4\">\n  <p><i id=\"p_198\" class=\"pid\"></i>In addition to participant backends, what does <code>index.main.mjs</code> contain?<a href=\"#p_198\" class=\"pid\">198</a></p>\n  <div class=\"collapse\" id=\"q4\">\n    <p>\n      <i id=\"p_199\" class=\"pid\"></i>It also contains the smart contract bytecode for each supported consensus network.\n      :::<a href=\"#p_199\" class=\"pid\">199</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q5\">\n  <p><i id=\"p_200\" class=\"pid\"></i>When does the Reach Verification Engine run?<a href=\"#p_200\" class=\"pid\">200</a></p>\n  <div class=\"collapse\" id=\"q5\">\n    <p>\n      <i id=\"p_201\" class=\"pid\"></i>Compile time.\n      :::<a href=\"#p_201\" class=\"pid\">201</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q6\">\n  <p><i id=\"p_202\" class=\"pid\"></i>Can Reach DApps run on local Dockerized devnets?<a href=\"#p_202\" class=\"pid\">202</a></p>\n  <div class=\"collapse\" id=\"q6\">\n    <p>\n      <i id=\"p_203\" class=\"pid\"></i>Yes. Running Reach DApps on local Dockerized devnets is a convenient way to develop and test.\n      :::<a href=\"#p_203\" class=\"pid\">203</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q7\">\n  <p><i id=\"p_204\" class=\"pid\"></i>Name the environment variable used by Reach to determine the target consensus network.<a href=\"#p_204\" class=\"pid\">204</a></p>\n  <div class=\"collapse\" id=\"q7\">\n    <p>\n      <i id=\"p_205\" class=\"pid\"></i><span class=\"snip\"><a href=\"/tool/#cmd_REACH_CONNECTOR_MODE\" title=\"cmd: REACH_CONNECTOR_MODE\"><span style=\"color: var(--shiki-color-text)\">REACH_CONNECTOR_MODE</span></a></span>\n      :::<a href=\"#p_205\" class=\"pid\">205</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q8\">\n  <p><i id=\"p_206\" class=\"pid\"></i>Name the <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">reach</span></span> command that stops and removes all Reach Docker containers.<a href=\"#p_206\" class=\"pid\">206</a></p>\n  <div class=\"collapse\" id=\"q8\">\n    <p>\n      <i id=\"p_207\" class=\"pid\"></i><code>./reach down</code>\n      :::<a href=\"#p_207\" class=\"pid\">207</a>\n    </p>\n  </div>\n</div>\n<div class=\"q-and-a\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" href=\"#q9\">\n  <p><i id=\"p_208\" class=\"pid\"></i>Name the Reach object that allows frontends to peak into a contract without attaching.<a href=\"#p_208\" class=\"pid\">208</a></p>\n  <div class=\"collapse\" id=\"q9\">\n    <p>\n      <i id=\"p_209\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-color-text)\">View</span></a></span>\n      :::<a href=\"#p_209\" class=\"pid\">209</a>\n    </p>\n  </div>\n</div>","<ul><li class=\"dynamic\">\n    <a href=\"#wfs\">Wisdom For Sale</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-1\">Learning Objectives</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-2\">Reach Modes</a>\n    <ul class=\"dynamic\">\n      <li class=\"dynamic\">\n        <a href=\"#wfs-3\">Reach Mode Definitions</a>\n        <ul class=\"dynamic\">\n          <li class=\"dynamic\"><a href=\"#wfs-4\">Init Mode</a></li>\n          <li class=\"dynamic\"><a href=\"#wfs-5\">Step Mode</a></li>\n          <li class=\"dynamic\"><a href=\"#wfs-6\">Local Step Mode</a></li>\n          <li class=\"dynamic\"><a href=\"#wfs-7\">Consensus Step Mode</a></li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-8\">Pre-coding preparation</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-9\">Examine the transaction</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-10\">Create the files</a>\n    <ul class=\"dynamic\">\n      <li class=\"dynamic\"><a href=\"#wfs-11\">Create the Frontend</a></li>\n      <li class=\"dynamic\"><a href=\"#wfs-12\">Create the Backened</a></li>\n    </ul>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-13\">Run the DApp</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-14\">Pass an argument</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-15\">Explore units and balances</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-16\">Deploy the contract (seller)</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-17\">Attach to the contract (buyer)</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-18\">Cancel a transaction</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-19\">Complete a transaction</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-20\">View the contract</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-21\">Review and further learning</a>\n  </li>\n  <li class=\"dynamic\">\n    <a href=\"#wfs-22\">Self Assessment</a>\n  </li></ul>"]